---
title: æ­£åˆ™è¡¨è¾¾å¼
date: 2018-11-21 10:56:52
tags: 
categories: 
    - åŸºç¡€çŸ¥è¯†
---

ğŸ’ 

- 1. [æ­£åˆ™è¡¨è¾¾å¼](#æ­£åˆ™è¡¨è¾¾å¼)
    - 1.1. [åŸºæœ¬å­—ç¬¦](#åŸºæœ¬å­—ç¬¦)
    - 1.2. [ç‰¹æ®Šå­—ç¬¦](#ç‰¹æ®Šå­—ç¬¦)
    - 1.3. [åˆ†ç»„æ•è·](#åˆ†ç»„æ•è·)
    - 1.4. [å˜é‡](#å˜é‡)
    - 1.5. [é›¶å®½æ–­è¨€](#é›¶å®½æ–­è¨€)
- 2. [æ­£åˆ™è¡¨è¾¾å¼å¼•æ“](#æ­£åˆ™è¡¨è¾¾å¼å¼•æ“)
    - 2.1. [NFAåŒ¹é…æ¨¡å¼](#nfaåŒ¹é…æ¨¡å¼)
    - 2.2. [æ€§èƒ½é™·é˜±](#æ€§èƒ½é™·é˜±)
- 3. [è¯­è¨€å®ç°](#è¯­è¨€å®ç°)
    - 3.1. [Java](#java)
    - 3.2. [Python](#python)
    - 3.3. [Shell](#shell)
- 4. [Tips](#tips)

ğŸ’  2024-09-20 11:10:09
****************************************
# æ­£åˆ™è¡¨è¾¾å¼
> [Regular Expression Language - Quick Reference](https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference)  

> [Grex](https://github.com/pemistahl/grex)  
> [Regex-Vis](https://github.com/Bowen7/regex-vis)  

## åŸºæœ¬å­—ç¬¦ 

| æ¨¡å¼ | ä½œç”¨ |
|:----|:----|
| `^`     | åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œé™¤éåœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œæ­¤æ—¶å®ƒè¡¨ç¤ºä¸æ¥å—è¯¥å­—ç¬¦é›†åˆã€‚
| `$`     | åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“å°¾ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œåˆ™ $ ä¹ŸåŒ¹é… '\n' æˆ– '\r'ã€‚
| `( )`   | æ ‡è®°ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚å­è¡¨è¾¾å¼å¯ä»¥è·å–ä¾›ä»¥åä½¿ç”¨ï¼š`([0-9]{3})?` åŒ¹é…å‡ºç°ä¸‰ä¸ªæ•°å­—è¿ç€çš„å­—ç¬¦ä¸²
| `{N}`   | åŒ¹é…å‰é¢å‡ºç°çš„å­è¡¨è¾¾å¼ N æ¬¡
| `{N,M}` | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ N-M æ¬¡
| `[...]` | åŒ¹é…å­—ç¬¦é›†çš„ä»»ä¸€å•ä¸ªå­—ç¬¦ ï¼š `[abcdejk]`å°±æ˜¯åŒ¹é…é‡Œé¢ä»»ä¸€å•ä¸ªå­—ç¬¦ 
| `[^...]`| ä¸åŒ¹é…æ­¤é›†åˆä¸­ä»»ä¸€å­—ç¬¦ï¼ŒåŒ…æ‹¬æŸä¸€èŒƒå›´çš„å­—ç¬¦ï¼š`[^0-9]` å­—ç¬¦ä¸²ä¸­ä¸å«æ•°å­—
| `[x-y]` | åŒ¹é…x-yèŒƒå›´å†…å•ä¸€å­—ç¬¦ ï¼š `[0-9] [a-z]`
| `*`     | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ 0æˆ–å¤šæ¬¡ã€‚ 
| `+`     | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ 1æˆ–å¤šæ¬¡ã€‚
| `?`     | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ 0æˆ–1æ¬¡ï¼Œæˆ–æŒ‡æ˜ä¸€ä¸ªéè´ªå©ªé™å®šç¬¦ã€‚
| `.`     | åŒ¹é…é™¤æ¢è¡Œç¬¦ `\r` `\n` ä¹‹å¤–çš„ä»»ä½• å•ä¸ªå­—ç¬¦ã€‚
| `\`     | å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºæˆ–è½¬ä¹‰å­—ç¬¦ã€æˆ–åŸä¹‰å­—ç¬¦ã€æˆ–å‘åå¼•ç”¨ã€æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚'\n' åŒ¹é…æ¢è¡Œç¬¦ã€‚ 
| `|`     | æŒ‡æ˜ä¸¤é¡¹ä¹‹é—´çš„ä¸€ä¸ªé€‰æ‹©ã€‚

`ä»¥ä¸Šå­—ç¬¦éœ€è¦åŒ¹é…å­—é¢å€¼æ—¶éƒ½éœ€è½¬ä¹‰`

************************

## ç‰¹æ®Šå­—ç¬¦
| æ¨¡å¼ | ä½œç”¨ |
|:----|:----|
| `\d`    | åŒ¹é…ä»»ä½•åè¿›åˆ¶æ•°å­— ä¸ `[0-9]` ç›¸åŒ `\D`ä¸ä¹‹ç›¸å |
| `\w`    | åŒ¹é…ä»»ä½•å­—æ¯æ•°å­—å­—ç¬¦ ä¸ `[a-zA-Z0-9_]` ç›¸åŒï¼Œ `\W`ä¸ä¹‹ç›¸å |
| `\s`    | åŒ¹é…ä»»ä½•ç©ºå­—ç¬¦(ç©ºæ ¼ tab å›è½¦) ä¸ `[\n\t\r\v\f]` ç›¸åŒï¼Œ`\S`ä¸ä¹‹ç›¸å |
| `\b`    | åŒ¹é…ä»»ä½•å•è¯çš„è¾¹ç•Œ `\B`ä¸ä¹‹ç›¸å |
| `\N`    | åŒ¹é…å·²ä¿å­˜çš„å­ç»„Næ¬¡ `name\100` |
| `\c`    | é€å­—åŒ¹é…ä»»ä½•ç‰¹æ®Šå­—ç¬¦ `c` å°±æ˜¯è½¬ä¹‰å­—ç¬¦çš„ä½¿ç”¨ |
| `\A \Z` | åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“æŸ |

> æ„é€ æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•å’Œåˆ›å»ºæ•°å­¦è¡¨è¾¾å¼çš„æ–¹æ³•ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯ç”¨å¤šç§å…ƒå­—ç¬¦ä¸æ“ä½œç¬¦å°†å°çš„è¡¨è¾¾å¼ç»“åˆåœ¨ä¸€èµ·æ¥åˆ›å»ºæ›´å¤§çš„è¡¨è¾¾å¼ã€‚
> æ­£åˆ™è¡¨è¾¾å¼çš„ç»„ä»¶å¯ä»¥æ˜¯å•ä¸ªçš„å­—ç¬¦ã€å­—ç¬¦é›†åˆã€å­—ç¬¦èŒƒå›´ã€å­—ç¬¦é—´çš„é€‰æ‹©æˆ–è€…æ‰€æœ‰è¿™äº›ç»„ä»¶çš„ä»»æ„ç»„åˆã€‚ 

************************

> Pattern
- (?i) å¼€å¯å¿½ç•¥å¤§å°å†™ (?-i) å…³é—­å¿½ç•¥å¤§å°å†™
    - ä½†æ˜¯iåªå¤„ç† ASCII å­—ç¬¦ï¼Œå¦‚æœéœ€è¦å¤„ç†Unicodeå­—ç¬¦éœ€è¦åŠ ä¸Šuæˆ–U ä¾‹å¦‚ `(?iu)`, `(?iU)`

```
i - Ignore case
m - Treat a newline as a character matched by .
x - Ignore whitespace and comments in the pattern
o -> Perform #{} interpolation only once
```

************************
## åˆ†ç»„æ•è·
> [Grouping Constructs](https://learn.microsoft.com/en-us/dotnet/standard/base-types/regular-expression-language-quick-reference#grouping-constructs)

æ­£åˆ™ä¸­çš„()éƒ½æ˜¯ä¸€ä¸ªåˆ†ç»„æ•è·ï¼Œåº“é€šå¸¸ä½¿ç”¨ä¸‹æ ‡æ¥å®šä½åŒ¹é…åˆ°çš„åˆ†ç»„

åŒæ—¶å¯ä»¥ä½¿ç”¨å‘½ååˆ†ç»„  Named groupsã€‚

```java
    Pattern idxGroup = Pattern.compile("(\\d{4})-(\\d{2})");
    Matcher matcher = idxGroup.matcher("2012-12");
    System.out.println(matcher.matches());
    assertThat(matcher.group(1), equalTo("2012"));
    assertThat(matcher.group(2), equalTo("12"));

    Pattern nameGroup = Pattern.compile("(?<year>\\d{4})-(?<month>\\d{2})");
    matcher = nameGroup.matcher("2012-12");
    System.out.println(matcher.matches());
    assertThat(matcher.group("year"), equalTo("2012"));
    assertThat(matcher.group("month"), equalTo("12"));
```

## å˜é‡

å¸¸ç”¨äºæ­£åˆ™æ›¿æ¢
1. `(\w*)_(\w*)_(\w*)` => `\l$1\u$2\u$3` 
    - user_name_flag => userNameFlag
1. `(.*)/\d+\.\d+\.\d+\.\d+(.*)` => `$1/1.1.1.1/$2` 
    - http://1.2.3.4/path/url => http://1.1.1.1/path/url

## é›¶å®½æ–­è¨€
> ç”¨äºæŸ¥æ‰¾åœ¨æŸäº›å†…å®¹(ä½†å¹¶ä¸åŒ…æ‹¬è¿™äº›å†…å®¹)ä¹‹å‰æˆ–ä¹‹åçš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åƒ \b, ^, $, <, >, é‚£æ ·ç”¨äºæŒ‡å®šä¸€ä¸ªä½ç½®  
> è¿™ä¸ªä½ç½®åº”è¯¥æ»¡è¶³ä¸€å®šçš„æ¡ä»¶(å³æ–­è¨€)ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºé›¶å®½æ–­è¨€

> [å‚è€ƒ: é›¶å®½æ–­è¨€](https://www.cnblogs.com/shangdawei/p/4673117.html)
> [æ­£åˆ™è¡¨è¾¾å¼çš„å…ˆè¡Œæ–­è¨€(lookahead)å’Œåè¡Œæ–­è¨€(lookbehind)](https://www.runoob.com/w3cnote/reg-lookahead-lookbehind.html)

- `(?=exp)`  é›¶å®½æ­£å‘å…ˆè¡Œæ–­è¨€(zero-width positive lookahead assertion) 
- `(?!exp)`  é›¶å®½è´Ÿå‘å…ˆè¡Œæ–­è¨€(zero-width negative lookahead assertion)
- `(?<=exp)` é›¶å®½æ­£å‘åè¡Œæ–­è¨€(zero-width positive lookbehind assertion)
- `(?<!exp)` é›¶å®½è´Ÿå‘åè¡Œæ–­è¨€(zero-width negative lookbehind assertion)

> egï¼š
- `(?<=a).*(?=b)` æå–abå­—ç¬¦ä¹‹é—´çš„å€¼

***************************

# æ­£åˆ™è¡¨è¾¾å¼å¼•æ“
æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªç”¨æ­£åˆ™ç¬¦å·å†™å‡ºçš„å…¬å¼ï¼Œç¨‹åºå¯¹è¿™ä¸ªå…¬å¼è¿›è¡Œè¯­æ³•åˆ†æï¼Œå»ºç«‹ä¸€ä¸ªè¯­æ³•åˆ†ææ ‘ï¼Œå†æ ¹æ®è¿™ä¸ªåˆ†ææ ‘ç»“åˆæ­£åˆ™è¡¨è¾¾å¼çš„å¼•æ“ç”Ÿæˆæ‰§è¡Œç¨‹åºï¼ˆè¿™ä¸ªæ‰§è¡Œç¨‹åºæˆ‘ä»¬æŠŠå®ƒç§°ä½œçŠ¶æ€æœºï¼Œä¹Ÿå«çŠ¶æ€è‡ªåŠ¨æœºï¼‰ï¼Œç”¨äºå­—ç¬¦åŒ¹é…ã€‚

è€Œè¿™é‡Œçš„æ­£åˆ™è¡¨è¾¾å¼å¼•æ“å°±æ˜¯ä¸€å¥—æ ¸å¿ƒç®—æ³•ï¼Œç”¨äºå»ºç«‹çŠ¶æ€æœºã€‚

ç›®å‰å®ç°æ­£åˆ™è¡¨è¾¾å¼å¼•æ“çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šDFA [ç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœº](https://en.wikipedia.org/wiki/Deterministic_finite_automaton) å’Œ NFA [éç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœº](https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)ã€‚

å¯¹æ¯”æ¥çœ‹ï¼Œæ„é€  DFA è‡ªåŠ¨æœºçš„ä»£ä»·è¿œå¤§äº NFA è‡ªåŠ¨æœºï¼Œä½† DFA è‡ªåŠ¨æœºçš„æ‰§è¡Œæ•ˆç‡é«˜äº NFA è‡ªåŠ¨æœºã€‚

å‡è®¾ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯ nï¼Œå¦‚æœç”¨ DFA è‡ªåŠ¨æœºä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼Œåˆ™åŒ¹é…çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›å¦‚æœç”¨ NFA è‡ªåŠ¨æœºä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼Œç”±äº NFA è‡ªåŠ¨æœºåœ¨åŒ¹é…è¿‡ç¨‹ä¸­å­˜åœ¨å¤§é‡çš„åˆ†æ”¯å’Œå›æº¯ï¼Œå‡è®¾ NFA çš„çŠ¶æ€æ•°ä¸º sï¼Œåˆ™è¯¥åŒ¹é…ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(ns)ã€‚

NFA è‡ªåŠ¨æœºçš„ä¼˜åŠ¿æ˜¯æ”¯æŒæ›´å¤šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šæ•è·groupã€ç¯è§†ã€å æœ‰ä¼˜å…ˆé‡è¯ç­‰é«˜çº§åŠŸèƒ½ã€‚è¿™äº›éƒ½æ˜¯åŸºäºå­è¡¨è¾¾å¼ç‹¬ç«‹è¿›è¡ŒåŒ¹é…ï¼Œå› æ­¤åœ¨ç¼–ç¨‹è¯­è¨€é‡Œï¼Œæ­£åˆ™è¡¨è¾¾å¼åº“**éƒ½æ˜¯åŸºäº NFA å®ç°çš„**ã€‚

## NFAåŒ¹é…æ¨¡å¼
> [what are possessive quantifiers in Java regular expression used for?](https://stackoverflow.com/questions/26006653/what-are-possessive-quantifiers-in-java-regular-expression-used-for)

**è´ªå©ªæ¨¡å¼ï¼ˆGreedyï¼‰**

å¦‚æœå•ç‹¬ä½¿ç”¨ +ã€ï¼Ÿã€*æˆ–{min,max}ç­‰é‡è¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å†…å®¹ã€‚

ä¾‹å¦‚ æ–‡æœ¬ abbc æ¨¡å¼ `ab{1,3}c`ï¼Œ NFAä¼šå…ˆè¯»å–æœ€å¤§åŒ¹é…èŒƒå›´3ï¼ŒåŒ¹é…å¤±è´¥åå›æº¯åˆ°2åŒ¹é…æˆåŠŸï¼Œå¦‚æœæ–‡æœ¬æ˜¯ abbbc å°±ä¸ä¼šå›æº¯ç›´æ¥åŒ¹é…æˆåŠŸäº†
å½“æœ‰å¤šä¸ªåŒ¹é…ç»„æ—¶ï¼Œæ€§èƒ½ä¸‹é™ä¼šæ›´æ˜æ˜¾ ä¾‹å¦‚ `^([A-Za-z0-9]+)([A-Z0-9][A-Z0-9])(.*)` å¯ä»¥çœ‹åˆ°æœ‰ä¸‰ä¸ªåŒ¹é…åˆ†ç»„ç¬¬ä¸€ä¸ªå¯èƒ½å°†åŒ¹é…å¤±è´¥çš„å­—ç¬¦ç»™åˆ°ç¬¬äºŒä¸ªç¬¬ä¸‰ä¸ªç»„åŒ¹é…ï¼Œåˆ†æ”¯æ•°ä¼šå¤§é‡è†¨èƒ€

**æ‡’æƒ°æ¨¡å¼ï¼ˆReluctantï¼‰**

å°½å¯èƒ½å°‘åœ°é‡å¤åŒ¹é…å­—ç¬¦ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå®ƒä¼šç»§ç»­åŒ¹é…å‰©ä½™çš„å­—ç¬¦ä¸²ã€‚

ä¾‹å¦‚ æ–‡æœ¬ abbc æ¨¡å¼ `ab{1,3}?c`, NFAè‡ªåŠ¨æœºä¼šå…ˆè¯»å–æœ€å°åŒ¹é…èŒƒå›´1å†ç»§ç»­åŒ¹é…ï¼Œ*é¿å…äº†å›æº¯é—®é¢˜*ã€‚
å½“å¤šåŒ¹é…ç»„æ—¶ æ”¹è¿›å‰æ–‡ä¸­è¡¨è¾¾å¼ `^([A-Za-z0-9]+?)([A-Z0-9][A-Z0-9])(.*)` é™ä½äº†åˆ†æ”¯æ•°ã€‚

**ç‹¬å æ¨¡å¼ï¼ˆPossessiveï¼‰**

å’Œè´ªå©ªæ¨¡å¼ä¸€æ ·ï¼Œç‹¬å æ¨¡å¼ä¸€æ ·ä¼šæœ€å¤§é™åº¦åœ°åŒ¹é…æ›´å¤šå†…å®¹ï¼›ä¸åŒçš„æ˜¯ï¼Œåœ¨ç‹¬å æ¨¡å¼ä¸‹ï¼ŒåŒ¹é…å¤±è´¥å°±ä¼šç»“æŸåŒ¹é…ï¼Œä¸ä¼šå‘ç”Ÿå›æº¯é—®é¢˜ã€‚å¤šç»„åŒ¹é…æ—¶ä¸€ä¸ªç»„çš„åŒ¹é…å¤±è´¥çš„å­—ç¬¦ä¸ä¼šç»™åˆ°å¦ä¸€ä¸ªç»„

ä¾‹å¦‚ æ–‡æœ¬ abbcï¼Œæ¨¡å¼ä¸º`ab{1,3}+c`ã€‚ 
- JavaScriptä¸­åŒ¹é…ä¼šæŠ¥é”™ **Invalid regular expression Nothing to repeat**ã€‚ 
- Javaä¸­èƒ½åŒ¹é…æˆåŠŸï¼Œä½†æ²¡æœ‰å‘ç”Ÿæ‰€è°“çš„ç‹¬å æ¨¡å¼å¼•å‘åŒ¹é…å¤±è´¥çš„åœºæ™¯, å¥‡æ€ªï¼Ÿ
- Golangä¸­ä¼šæŠ¥é”™ **invalid nested repetition operator**
å½“å¤šåŒ¹é…ç»„æ—¶ ä¾‹å¦‚ `^([A-Z]++)([H-Zw])(.*)` 

> æ³¨æ„ï¼šJavaScriptï¼ŒPythonå’ŒGo çš„æ ‡å‡†åº“*ä¸æ”¯æŒ*ç‹¬å æ¨¡å¼

## æ€§èƒ½é™·é˜±
> [å¦‚ä½•ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼æ€§èƒ½ï¼Ÿ](https://segmentfault.com/a/1190000039941785)

1. å°‘ç”¨è´ªå©ªæ¨¡å¼
1. å‡å°‘åˆ†æ”¯é€‰æ‹©å¸¦æ¥çš„ç»„åˆæƒ…å†µç¬›å¡å°”ç§¯
1. å‡å°‘æ•è·`()`åµŒå¥—
1. 
************************

# è¯­è¨€å®ç°
## Java

```java
    Pattern pt = Pattern.compile("\\d+");
    pt.matcher("12,3");
```

æ³¨æ„ï¼š
- å› ä¸ºcompileå¾ˆè€—CPUèµ„æºï¼Œæ‰€ä»¥Patternå¯¹è±¡éœ€è¦å°½å¯èƒ½å¤ç”¨ï¼Œæœ€å¥½æˆä¸ºé™æ€å±æ€§ï¼ˆå®ƒæ˜¯ä¸å¯å˜å®ä¾‹ï¼Œæ˜¯å¹¶å‘å®‰å…¨çš„ï¼‰

## Python
- ![re.jpg](https://raw.githubusercontent.com/Kuangcp/ImageRepos/master/Tech/python/re.jpg)

## Shell
- [Shellæ­£åˆ™è¡¨è¾¾å¼](http://man.linuxde.net/docs/shell_regex.html)

************************

# Tips
- è¿ç»­é‡å¤å­—ç¬¦çš„åŒ¹é… `(.)\1+` [æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…é‡å¤çš„å­—ç¬¦ä¸²](http://www.aijquery.cn/Html/jqueryjiqiao/181.html)
