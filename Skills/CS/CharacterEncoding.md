---
title: å­—ç¬¦ç¼–ç 
date: 2018-10-21 10:56:52
tags: 
categories: 
    - è®¡ç®—æœºåŸºç¡€
---

ğŸ’ 

- 1. [å­—ç¬¦ç¼–ç ](#å­—ç¬¦ç¼–ç )
    - 1.1. [ASCII](#ascii)
    - 1.2. [ANSI](#ansi)
    - 1.3. [Unicode](#unicode)
        - 1.3.1. [UTF](#utf)
            - 1.3.1.1. [å…³äº BOM](#å…³äº-bom)
            - 1.3.1.2. [UTF-8](#utf-8)
            - 1.3.1.3. [UTF-16](#utf-16)
            - 1.3.1.4. [UTF-32](#utf-32)
- 2. [æ±‰å­—ç¼–ç å‘å±•å²](#æ±‰å­—ç¼–ç å‘å±•å²)
- 3. [Javaä¸­çš„ç¼–ç ](#javaä¸­çš„ç¼–ç )
- 4. [ä¹±ç ](#ä¹±ç )

ğŸ’  2024-09-09 17:25:40
****************************************
# å­—ç¬¦ç¼–ç 
> [å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicode å’Œ UTF-8](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html) | [é˜®ä¸€å³°çš„æ–‡ç« æœ‰å“ªäº›å¸¸è§æ€§é”™è¯¯](https://www.v2ex.com/t/343634)

> [å‚è€ƒ: Ansi,UTF8,Unicode,ASCIIç¼–ç çš„åŒºåˆ«](https://blog.csdn.net/xiongxiao/article/details/3741731)
> [å‚è€ƒ: å­—ç¬¦ç¼–ç çš„å‰ä¸–ä»Šç”Ÿ](https://tgideas.qq.com/webplat/info/news_version3/804/808/811/m579/201307/218730.shtml)

- å­—ç¬¦å†…ç (charcter code)æŒ‡çš„æ˜¯ç”¨æ¥ä»£è¡¨å­—ç¬¦çš„å†…ç .è¯»è€…åœ¨è¾“å…¥å’Œå­˜å‚¨æ–‡æ¡£æ—¶éƒ½è¦ä½¿ç”¨å†…ç ,å†…ç åˆ†ä¸º
    - å•å­—èŠ‚å†…ç  -- Single-Byte character sets (SBCS), ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå­—èŠ‚ 0-127 
    - åŒå­—èŠ‚å†…ç  -- Double-Byte character sets (DBCS), ä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªå­—èŠ‚ 128-255

å­—ç¬¦é›†ç¼–ç å‘å±•å²ï¼šASCIIï¼ŒIOS-8859å®¶æ—ï¼Œ GB2312å’ŒGBKç­‰åŒå­—èŠ‚å®¶æ—ï¼Œ Unicodeå­—ç¬¦ï¼Œ UTF ç¼–ç å®¶æ—

************************

## ASCII
> ASCII (American Standard Code for Information Interchange)  ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç  å±äºå•å­—èŠ‚å†…ç  å¹¶ç­‰åŒäºå›½é™…æ ‡å‡†ISO/IEC 646

> [Wiki: ASCII](https://en.wikipedia.org/wiki/ASCII)  

1. 0-31 ä»¥åŠ 127 æ˜¯æ§åˆ¶å­—ç¬¦æˆ–é€šä¿¡ä¸“ç”¨å­—ç¬¦ ï¼ˆå…¶ä½™ä¸ºå¯æ˜¾ç¤ºå­—ç¬¦ï¼‰
1. 32ï½126(å…±95ä¸ª)æ˜¯å­—ç¬¦(32æ˜¯ç©ºæ ¼ï¼‰
    - å…¶ä¸­48ï½57ä¸º0åˆ°9åä¸ªé˜¿æ‹‰ä¼¯æ•°å­—
    - 65ï½90ä¸º26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯
    - 97ï½122å·ä¸º26ä¸ªå°å†™è‹±æ–‡å­—æ¯
    - å…¶ä½™ä¸ºä¸€äº›æ ‡ç‚¹ç¬¦å·ã€è¿ç®—ç¬¦å·ç­‰ã€‚

> æ³¨æ„
>- åœ¨æ ‡å‡†ASCIIä¸­ï¼Œå…¶æœ€é«˜ä½(b7)ç”¨ä½œå¥‡å¶æ ¡éªŒä½ã€‚ Linuxä¸Š `man ascii` å°±å¯ä»¥æŸ¥çœ‹å®Œæ•´è¡¨
>- ç»è¿‡æ‰©å……å ascii å¯å¤§äº127 `ASCIIæ‰©å±•å­—ç¬¦`

1. ascii 160 ä¸é—´æ–­ç©ºæ ¼ non-breaking space

************************

## ANSI
> ANSI/ISO8859-1-1987 æˆ–ç§° Latin 1  

è¿™ä¸ªç¼–ç å°±æ˜¯ ascii çš„æ‰©å±•, ä½†æ˜¯åªæ˜¯æ‰©å±•äº†ä¸€ä¸ªå­—èŠ‚, ç„¶åå„ä¸ªå›½å®¶çš„ç¼–ç åˆä¸ä¸€è‡´(ä¸åŒçš„ä»£ç é¡µ), å¯¼è‡´äº†ååˆ†æ··ä¹±
è‡³äºç®€ä½“ä¸­æ–‡ç¼–ç GB2312ï¼Œå®é™…ä¸Šå®ƒæ˜¯ ANSI çš„ä¸€ä¸ªä»£ç é¡µ 936


************************

## Unicode
> [wikipedia](https://en.wikipedia.org/wiki/Unicode) | [unicode.org](http://www.unicode.org/) | [unicode table](https://unicode-table.com/cn/)  

Unicode æ˜¯ä¸€ä¸ªå›Šæ‹¬äº†ä¸–ç•Œä¸Šæ‰€æœ‰å­—ç¬¦çš„å­—ç¬¦é›†ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå­—ç¬¦éƒ½å¯¹åº”æœ‰å”¯ä¸€çš„ç¼–ç å€¼, ä½†æ˜¯å¹¶ä¸æ˜¯ä¸€ä¸ªå·²å®ç°çš„ç¼–ç æ–¹æ¡ˆ, ä¸èƒ½ç›´æ¥ä½¿ç”¨  
åŸºäºæ­¤å¥—ç¼–ç å€¼çš„**ç¼–ç å®ç°æ–¹æ¡ˆ**æœ‰ UTF-8 UTF-16 UTF-32 ...  ç›®å‰æœ€æ–°ç‰ˆæœ¬ Unicode11 å·²ç»åŒ…æ‹¬ 137,439 ä¸ªå­—ç¬¦

> é—®é¢˜: ç›´æ¥çœ‹, çœ‹ä¸åˆ°çš„å­—ç¬¦, å¯èƒ½å¸¦æ¥ä¸€äº›å‘

|  |  |
|:----|:----|
| é›¶å®½é—´éš”  zero-width space          | `U+200B` |
| NO-BREAK SPACE                     | `U+C2A0` |
| é›¶å®½ä¸æŠ˜è¡Œç©ºæ ¼                       | `U+FEFF` html: `&#65279;` |
| é›¶å®½åº¦è¿å­—ç¬¦ (zero-width joiner)     |  \u200D|
| é›¶å®½åº¦æ–­å­—ç¬¦ (zero-width non-joiner) | \u200C |
| å·¦è‡³å³ç¬¦ (left-to-right mark)       | \u200E |
| å³è‡³å·¦ç¬¦ (right-to-left mark)       | \u200F |

************************

### UTF
> UTF: UCS Transformation Format, UCS: Unicode Character Set

å®ƒæ˜¯å°†Unicodeç¼–ç è§„åˆ™å’Œè®¡ç®—æœºçš„å®é™…ç¼–ç å¯¹åº”èµ·æ¥çš„ä¸€ä¸ªè§„åˆ™ã€‚ç°åœ¨æµè¡Œçš„UTFæœ‰2ç§ï¼šUTF-8å’ŒUTF-16.

#### å…³äº BOM 
- [wiki: bom](https://en.wikipedia.org/wiki/Byte_order_mark)
- [çŸ¥ä¹: ã€Œå¸¦ BOM çš„ UTF-8ã€å’Œã€Œæ—  BOM çš„ UTF-8ã€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ](https://www.zhihu.com/question/20167122)`å¾®è½¯çš„ä¹ æƒ¯`

1. æ‰¾å‡ºå«BOMçš„æ–‡ä»¶  `grep -r $'\xEF\xBB\xBF'`
1. é€šè¿‡ vim è¿›è¡Œè½¬æ¢, å»é™¤ `:set nobomb` åŠ ä¸Š BOM `:set bomb`

æ€è€ƒï¼š å¯¹äºæœ‰æ ¼å¼çš„æ–‡ä»¶æ¥è¯´ï¼Œæ— BOMä¼šæ›´çœäº‹ï¼Œä½†æ˜¯æ— æ ¼å¼çš„æ–‡æœ¬å¤„ç†ï¼Œæœ‰BOMä¼šæ›´çœäº‹ã€‚
- ä¾‹å¦‚Javaçš„classæ–‡ä»¶ï¼Œå·²ç»æœ‰é­”æ•° CAFEBABEï¼Œ ä¸éœ€è¦BOMæ¥æ ‡è®°å­—ç¬¦é›†ç¼–ç ï¼Œå› ä¸ºæ˜¯äºŒè¿›åˆ¶çš„ã€‚ ä»¥åŠLinuxä¸–ç•Œçš„ä»£ç å’Œè„šæœ¬é»˜è®¤æ˜¯UTF-8ï¼Œä¹Ÿä¸éœ€è¦BOM
- ä½†æ˜¯æ— æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶è¦åˆ¤æ–­æ–‡ä»¶çš„å­—ç¬¦ç¼–ç å°±ä¼šå¾ˆéº»çƒ¦äº†,æŸæ–‡æœ¬å¦‚æœæ˜¯æœ‰ä¸­æ–‡å’Œè‹±æ–‡ï¼Œç›´åˆ°è¯»å–åˆ°ä¸­æ–‡çš„å­—èŠ‚ä¸²æ‰èƒ½ç›´åˆ°æ•´ä½“ç¼–ç æ˜¯ä»€ä¹ˆï¼Œæ„å‘³ç€è¯»å®Œæ•´ä¸ªæ–‡ä»¶æ‰èƒ½åˆ¤æ–­å‡ºç¼–ç ï¼Œè¿™ä¸€ç‚¹æ˜¯æœ‰é£é™©çš„ã€‚
    - [CharsetDetector](https://tika.apache.org/0.8/api/org/apache/tika/parser/txt/CharsetDetector.html#detect())`å¦‚detectæ–¹æ³•çš„æ³¨é‡Šæ‰€è¿°`
    Return the charset that best matches the supplied input data. Note though, that because the detection only looks at the start of the input data, there is a possibility that the returned charset will fail to handle the full set of input data. 


#### UTF-8
> UTF-8 æ˜¯ä¸€ç§Unicodeçš„å®ç°æ–¹å¼, æ˜¯ä¸€ç§`å˜é•¿ç¼–ç æ–¹æ¡ˆ`(1-6 å­—èŠ‚), åœ¨è¡¨ç¤ºä¸­æ–‡æ—¶æ˜¯é‡‡ç”¨ `ä¸‰å­—èŠ‚ å››å­—èŠ‚` çš„æ–¹å¼, å·²æˆä¸ºWEBé¢†åŸŸäº‹å®æ ‡å‡†ç¼–ç   
>> å 3ä¸ªå­—èŠ‚çš„ï¼šåŸºæœ¬ç­‰åŒäºGBKï¼Œå«21000å¤šä¸ªæ±‰å­—
>> å 4ä¸ªå­—èŠ‚çš„ï¼šä¸­æ—¥éŸ©è¶…å¤§å­—ç¬¦é›†é‡Œé¢çš„æ±‰å­—ï¼Œæœ‰5ä¸‡å¤šä¸ª

æ³¨æ„ï¼š ä¾æ® 2003å¹´çš„æ ‡å‡† UTF8 ä»…ä½¿ç”¨ 1-4 å­—èŠ‚é•¿åº¦

**ä¾æ®é¦–å­—èŠ‚çš„æœ€é«˜ä½è¡¨ç¤º**
- 1 å­—èŠ‚ 0xxxxxxx 
- 2 å­—èŠ‚ 110xxxxx 10xxxxxx 
- 3 å­—èŠ‚ 1110xxxx 10xxxxxx 10xxxxxx 
- 4 å­—èŠ‚ 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 
- 5 å­—èŠ‚ 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 
- 6 å­—èŠ‚ 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 

> [å‚è€ƒ: UTF-8ç¼–ç è§„åˆ™ï¼ˆè½¬ï¼‰ ](http://www.cnblogs.com/chenwenbiao/archive/2011/08/11/2134503.html)

#### UTF-16
- [CESU-8](https://en.wikipedia.org/wiki/CESU-8)

#### UTF-32
> æ¯ä¸ªå­—ç¬¦4å­—èŠ‚

************************

# æ±‰å­—ç¼–ç å‘å±•å²
æœ€æ—©æ˜¯åˆ¶å®šçš„ `GB2312-80` å…¼å®¹ `ASCII` é‡‡ç”¨çš„æ˜¯åŒå­—èŠ‚ç¼–ç æ–¹å¼, å…¶ä¸­ä¸€å…±ç¼–ç äº†6763ä¸ªå¸¸ç”¨ç®€ä½“æ±‰å­—, Big5ï¼Œæ˜¯å°æ¹¾ä½¿ç”¨çš„ç¼–ç æ ‡å‡†ï¼Œç¼–ç äº†å°æ¹¾ä½¿ç”¨çš„ç¹ä½“æ±‰å­—ï¼Œå¤§æ¦‚æœ‰8åƒå¤šä¸ªã€‚
`HKSCS` æ˜¯ä¸­å›½é¦™æ¸¯ä½¿ç”¨çš„ç¼–ç æ ‡å‡†ï¼Œå­—ä½“ä¹Ÿæ˜¯ç¹ä½“ï¼Œä½†è·Ÿ `Big5` æœ‰æ‰€ä¸åŒã€‚  
åæ¥ï¼Œç”±äºå„æ–¹é¢çš„åŸå› ï¼Œå›½é™…ä¸Šåˆåˆ¶å®šäº†é’ˆå¯¹ä¸­æ–‡çš„ç»Ÿä¸€å­—ç¬¦é›† `GBK` å’Œ `GB18030` ï¼Œå…¶ä¸­GBKå·²ç»åœ¨Windowsã€Linuxç­‰å¤šç§æ“ä½œç³»ç»Ÿä¸­è¢«å®ç°ã€‚  
GBKå…¼å®¹GB2312ï¼Œå¹¶å¢åŠ äº†å¤§é‡ä¸å¸¸ç”¨æ±‰å­—ï¼Œè¿˜åŠ å…¥äº†å‡ ä¹æ‰€æœ‰çš„Big5ä¸­çš„ç¹ä½“æ±‰å­—ã€‚ä½†æ˜¯GBKä¸­çš„ç¹ä½“æ±‰å­—å’ŒBig5ä¸­çš„å‡ ä¹ä¸å…¼å®¹ã€‚  

**GB2312 GBK GB18030 éƒ½å±äº`åŒå­—èŠ‚`å­—ç¬¦é›† (DBCS)**

> [å­—ä½“ç¼–è¾‘ç”¨ä¸­æ—¥éŸ©æ±‰å­—Unicodeç¼–ç è¡¨](http://www.chi2ko.com/tool/CJK.htm)  
> [å‚è€ƒ: Unicodeä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦çš„ç¼–ç èŒƒå›´](http://www.cnblogs.com/sosoft/p/3456631.html)  
> [å‚è€ƒ: ä¸­æ–‡æ ‡ç‚¹ç¬¦å·å…·ä½“unicodeç ](https://blog.csdn.net/yuan892173701/article/details/8731490)
> [æ±‰å­— Unicode ç¼–ç èŒƒå›´](https://www.qqxiuzi.cn/zh/hanzi-unicode-bianma.php)


| ç±»åˆ« | å­—æ•° | Unicode èŒƒå›´ |
|:----|:----|:----|
| åŸºæœ¬æ±‰å­— 	     | 20902å­— | 4E00-9FA5
| åŸºæœ¬æ±‰å­—è¡¥å……    | 74å­—    | 9FA6-9FEF
| æ‰©å±•A 	    | 6582å­—  | 3400-4DB5
| æ‰©å±•B 	    | 42711å­— | 20000-2A6D6
| æ‰©å±•C 	    | 4149å­—  | 2A700-2B734
| æ‰©å±•D 	    | 222å­—   | 2B740-2B81D
| æ‰©å±•E 	    | 5762å­—  | 2B820-2CEA1
| æ‰©å±•F 	    | 7473å­—  | 2CEB0-2EBE0
| åº·ç†™éƒ¨é¦– 	     | 214å­—  | 2F00-2FD5
| éƒ¨é¦–æ‰©å±• 	     | 115å­—  | 2E80-2EF3
| å…¼å®¹æ±‰å­—       | 477å­—  | F900-FAD9
| å…¼å®¹æ‰©å±• 	     | 542å­—  | 2F800-2FA1D
| PUA(GBK)éƒ¨ä»¶  | 81å­—   | E815-E86F
| éƒ¨ä»¶æ‰©å±•       | 452å­—  |	E400-E5E8
| PUAå¢è¡¥ 	    | 207å­—  |	E600-E6CF
| æ±‰å­—ç¬”ç”» 	     | 36å­—   | 31C0-31E3
| æ±‰å­—ç»“æ„ 	     | 12å­—   | 2FF0-2FFB
| æ±‰è¯­æ³¨éŸ³ 	     | 43å­—   | 3105-312F
| æ³¨éŸ³æ‰©å±• 	     | 22å­—   | 31A0-31BA
| ã€‡ 	        | 1å­—    |  3007

************************

# Javaä¸­çš„ç¼–ç 
> [å­—ç¬¦ã€ç¼–ç å’ŒJavaä¸­çš„ç¼–ç ](https://www.jianshu.com/p/1b00ca07b003)  
> [Guide to Character Encoding](https://www.baeldung.com/java-char-encoding)  

> [Java : How to determine the correct charset encoding of a stream](https://stackoverflow.com/questions/499010/java-how-to-determine-the-correct-charset-encoding-of-a-stream)
- [juniversalchardet](https://github.com/albfernandez/juniversalchardet) é€šè¿‡å­—èŠ‚æµè¯†åˆ«æ–‡ä»¶çš„å­—ç¬¦é›†ç¼–ç 
    - UniversalDetector.detectCharset åŸç†æ˜¯è¯»å–4Kå­—èŠ‚é•¿åº¦çš„äºŒè¿›åˆ¶æµï¼Œè¯†åˆ«ç¼–ç æ–¹æ¡ˆï¼Œè¿˜ä¼šå°è¯•è§£æBOMå¤´ã€‚
- GuessEncoding
- ICU4j
- cn.hutool.core.io.CharsetDetector å­—èŠ‚æµè¯†åˆ«æ–‡ä»¶çš„å­—ç¬¦é›†ç¼–ç 
    - åŸç†ä¸ºè¯»å–512å­—èŠ‚é•¿åº¦åï¼Œç©·ä¸¾å­—ç¬¦é›†æ¥è§£ç 

************************

# ä¹±ç 
> é¡¾åæ€ä¹‰åˆ™æ˜¯ç”¨äº†é”™è¯¯çš„ç¼–ç æ–¹æ¡ˆå»å¯¹äºŒè¿›åˆ¶æµè§£ç 

![](./img/char-error-decode-situation.webp)
