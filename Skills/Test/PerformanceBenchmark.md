# 性能基准测试
## 目标
1 挖掘系统瓶颈点，优化系统性能

尤其对新系统上线，缺乏性能基线数据，此时压测一般没有明确的qps/rt等指标，而是通过不断施压，不断逼近系统的极限，从而暴露问题，修复问题。
2 建立性能基线

主要是为了收集系统当前的最大性能指标，一般会根据业务特点，先确定对rt和错误率的容忍度，然后通过压测推算出能够支持的最大qps, 并发量等。

同时可以结合性能指标和监控数据，来建立合理的预警机制，设立系统水位报警项，限流阈值，弹性策略等。

量化系统能力/SLA等 （比如在竞标中引用）。
3 性能回归

对于已上线系统，或者性能需求明确的系统，可以根据线上实际的运行情况，确定系统需要支撑的qps/rt, 然后在涉及性能影响前做回归校验，确保性能满足预期。
4 系统稳定性

更侧重在一定压力的情况下，系统是否能长时间稳定持续的提供SLA保障。

一般可以考虑将压力设定到业务峰值的80%，持续施压。
5 网络/线路延迟稳定性等

在一些特殊的业务场合，对延迟的容忍度极小，比如DNS解析，CDN服务，多人实时在线游戏，高频交易等等，需要网络质量，尤其是不同线路（电信/联通/教育网/...）间的差异。

## 测试对象
- 后端
    - 单api
    - 单业务逻辑场景
- 前端
    - 单request
    - 单操作
    - 单页
    - 整体页面平均情况

## 准备

## 过程

## 关注指标
### client

- QPS
- RT
- 成功率

页面平均响应时间 （重要）。
并发量（其实没那么重要，主要还是qps）。
最大用户同时在线数 （用户登录系统，一般不需要额外压测，除非业务场景特殊）。
网络质量（延迟，波动等，不展开）。

### server
- cpu usage
- load
- mem
- jvm/fullGC
- 连接数(netstat)
- disk io (iostat / iotop)


