---
title: è®¡ç®—æœºç½‘ç»œ
date: 2018-11-21 10:56:52
tags: 
    - åŸºç¡€
    - ç½‘ç»œ
categories: 
    - è®¡ç®—æœºåŸºç¡€
---

ğŸ’ 

- 1. [ç½‘ç»œ](#ç½‘ç»œ)
    - 1.1. [ç›¸å…³ä¹¦ç±å’Œèµ„æº](#ç›¸å…³ä¹¦ç±å’Œèµ„æº)
- 2. [ç½‘ç»œåˆ†å±‚æ¶æ„](#ç½‘ç»œåˆ†å±‚æ¶æ„)
    - 2.1. [ç‰©ç†å±‚](#ç‰©ç†å±‚)
    - 2.2. [æ•°æ®é“¾è·¯å±‚](#æ•°æ®é“¾è·¯å±‚)
    - 2.3. [ç½‘ç»œå±‚](#ç½‘ç»œå±‚)
        - 2.3.1. [IPåè®®](#ipåè®®)
            - 2.3.1.1. [IPåœ°å€åˆ†ç±»](#ipåœ°å€åˆ†ç±»)
            - 2.3.1.2. [æ— åˆ†ç±»ç¼–å€ CIDR](#æ— åˆ†ç±»ç¼–å€-cidr)
        - 2.3.2. [ARPåè®®](#arpåè®®)
        - 2.3.3. [ICMPåè®®](#icmpåè®®)
    - 2.4. [ä¼ è¾“å±‚](#ä¼ è¾“å±‚)
        - 2.4.1. [TCP](#tcp)
        - 2.4.2. [UDP](#udp)
        - 2.4.3. [TCP UDP å¯¹æ¯”](#tcp-udp-å¯¹æ¯”)
        - 2.4.4. [SCTP](#sctp)
    - 2.5. [åº”ç”¨å±‚](#åº”ç”¨å±‚)
        - 2.5.1. [HTTP & HTTPS](#http-&-https)
        - 2.5.2. [Websocket](#websocket)
        - 2.5.3. [WebDAV](#webdav)
        - 2.5.4. [ç½‘ç»œå»¶è¿Ÿ](#ç½‘ç»œå»¶è¿Ÿ)
        - 2.5.5. [TTFB](#ttfb)
        - 2.5.6. [URL](#url)
        - 2.5.7. [DNS](#dns)
        - 2.5.8. [MDNS](#mdns)
            - 2.5.8.1. [å®‰å…¨æ€§é—®é¢˜](#å®‰å…¨æ€§é—®é¢˜)
        - 2.5.9. [VPN](#vpn)
        - 2.5.10. [SSDP](#ssdp)
- 3. [Socket](#socket)
- 4. [å•æ’­ ç»„æ’­ å¹¿æ’­](#å•æ’­-ç»„æ’­-å¹¿æ’­)
    - 4.1. [å•æ’­](#å•æ’­)
    - 4.2. [ç»„æ’­](#ç»„æ’­)
    - 4.3. [å¹¿æ’­](#å¹¿æ’­)
- 5. [ä»£ç† Proxy](#ä»£ç†-proxy)
    - 5.1. [ä»£ç†åè®®](#ä»£ç†åè®®)
        - 5.1.1. [HTTPä»£ç†](#httpä»£ç†)
        - 5.1.2. [SOCKS](#socks)
    - 5.2. [PAC](#pac)
    - 5.3. [æ­£å‘ä»£ç†](#æ­£å‘ä»£ç†)
    - 5.4. [åå‘ä»£ç†](#åå‘ä»£ç†)
    - 5.5. [é€æ˜ä»£ç†](#é€æ˜ä»£ç†)
- 6. [ç½‘ç»œå·¥å…·](#ç½‘ç»œå·¥å…·)
    - 6.1. [ä»£ç†å·¥å…·](#ä»£ç†å·¥å…·)
        - 6.1.1. [Clash](#clash)
        - 6.1.2. [Fiddler](#fiddler)
        - 6.1.3. [Charles](#charles)
        - 6.1.4. [mitmproxy](#mitmproxy)
        - 6.1.5. [tinyproxy](#tinyproxy)
        - 6.1.6. [Mars](#mars)
        - 6.1.7. [camilla](#camilla)
        - 6.1.8. [dev-proxy](#dev-proxy)
    - 6.2. [Wireshark](#wireshark)
- 7. [Tips](#tips)
    - 7.1. [ç§»åŠ¨é€šä¿¡æŠ€æœ¯è§„æ ¼](#ç§»åŠ¨é€šä¿¡æŠ€æœ¯è§„æ ¼)

ğŸ’  2023-10-21 21:26
****************************************
# ç½‘ç»œ

## ç›¸å…³ä¹¦ç±å’Œèµ„æº
> [Real time Webservice](http://ceur-ws.org/Vol-601/EOMAS10_paper13.pdf)

> [Beej's Guide to Network Programming](http://beej.us/guide/bgnet/)

- webapiçš„è®¾è®¡ä¸å¼€å‘
- ç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„
- è®¡ç®—æœºç½‘ç»œ è°¢å¸Œä»

> [ç å†œç¿»èº«:å°ç™½ç§‘æ™®ï¼šä»è¾“å…¥ç½‘å€åˆ°æœ€åæµè§ˆå™¨å‘ˆç°é¡µé¢å†…å®¹ï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665514196&idx=1&sn=ca26d258fcc4a35fc6d9a539b7d71dd7&chksm=80d67c97b7a1f58198b2e6ae436f73c677c0df4c05c2a8a4aad2b9e2d523da57dd5cd3d0a8ee&mpshare=1&scene=1&srcid=0122nnRpNb6OvRJubkSfKfsZ&pass_ticket=%2B%2FAmfhAaNv2sKw6192eqEL9hoW%2F6BrLxlzHIsKC0k6lPQsM4%2FFo08R%2FZowzw3821#rd) | 
> [ç å†œç¿»èº«:æˆ‘æ˜¯ä¸€ä¸ªè·¯ç”±å™¨](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665513173&idx=1&sn=6ec5281b12ed5195070fa4df22383595&scene=21#wechat_redirect) | 
> [ç å†œç¿»èº«:æˆ‘æ˜¯ä¸€ä¸ªç½‘å¡](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665513160&idx=1&sn=d938db4f1a2d62514b57e92fd8d3d749&scene=21#wechat_redirect)

# ç½‘ç»œåˆ†å±‚æ¶æ„

å¼€æ”¾ç³»ç»Ÿäº’è¿åŸºæœ¬å‚è€ƒæ¨¡å‹ OSI/RM  Open Systems Interconnection Reference Model, ç®€ç§° OSI  

| OSI | TCP/IP |
|:----|:----:|
| åº”ç”¨å±‚ <br/> è¡¨ç¤ºå±‚ <br/> ä¼šè¯å±‚ | åº”ç”¨å±‚ |
| ä¼ è¾“å±‚                         | ä¼ è¾“å±‚ |
| ç½‘ç»œå±‚                         | ç½‘ç»œå±‚ |
| æ•°æ®é“¾è·¯å±‚ <br/> ç‰©ç†å±‚          | é“¾è·¯å±‚ |

OSIåˆ¶å®šçš„OSIä¸ƒå±‚å‚è€ƒæ¨¡å‹çš„è¿‡äºåºå¤§ã€å¤æ‚ã€‚ä¸æ­¤å¯¹ç…§ï¼Œç”±æŠ€æœ¯äººå‘˜è®¾è®¡çš„ TCP/IPåè®®æ ˆ(`å››å±‚`: ç½‘ç»œæ¥å£ ç½‘ç»œå±‚ ä¼ è¾“å±‚ åº”ç”¨å±‚) è·å¾—äº†æ›´ä¸ºå¹¿æ³›çš„åº”ç”¨ã€‚
è°¢å¸Œä»æ‰€è‘—çš„ è®¡ç®—æœºç½‘ç»œ ä¹¦ä¸­ ä¸ºäº†æ•™å­¦, èåˆæˆäº† `äº”å±‚æ¨¡å‹`

äº‹å®ä¸Š, ç°åœ¨çš„åº”ç”¨ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§OSIåˆ†å±‚çš„, åº”ç”¨å±‚å¯ä»¥ä½¿ç”¨ ä¼ è¾“å±‚(TCP UDP), ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç½‘ç»œå±‚(IP),ç”šè‡³ç›´æ¥ä½¿ç”¨ç½‘ç»œæ¥å£å±‚

> [å‚è€ƒ: ä»¥å¤ªç½‘å¸§ç»“æ„](https://blog.csdn.net/wdkirchhoff/article/details/43915825)

app layerå«messageï¼Œtrans layerå«segmentï¼Œnet layerå«datagramï¼Œlink layerå«frame

************************

## ç‰©ç†å±‚
> é›†çº¿å™¨ å·¥ä½œåœ¨è¿™ä¸€å±‚

## æ•°æ®é“¾è·¯å±‚
> å¸¸è§„äº¤æ¢æœº å·¥ä½œåœ¨è¿™ä¸€å±‚

> é€šå¸¸åœ¨å¸§çš„å‰é¢æ’å…¥ 8 å­—èŠ‚ï¼Œå…¶ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µå…± 7 ä¸ªå­—èŠ‚ï¼Œæ˜¯å‰åŒæ­¥ç ï¼Œç”¨æ¥è¿…é€Ÿå®ç° MACå¸§çš„æ¯”ç‰¹åŒæ­¥ã€‚ç¬¬äºŒä¸ªå­—æ®µæ˜¯å¸§å¼€å§‹å®šç•Œç¬¦ï¼Œè¡¨ç¤ºåé¢çš„ä¿¡æ¯å°±æ˜¯MACå¸§

- MACå¸§ ç»„æˆä¸º `é¦–éƒ¨(MACåœ°å€ç­‰ä¿¡æ¯) æ•°æ®(IPæ•°æ®æŠ¥) å°¾éƒ¨`
- é¦–éƒ¨æ„æˆä¸º
    1. ç›®çš„åœ°å€ **6å­—èŠ‚**
    1. æºåœ°å€ **6å­—èŠ‚**
    1. ç±»å‹ **2å­—èŠ‚** æ ‡å¿—ä¸Šä¸€å±‚ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆåè®®
- æ•°æ®éƒ¨åˆ† (46-1500å­—èŠ‚)
- å°¾éƒ¨ï¼š**4å­—èŠ‚**é•¿ï¼ŒåŒ…å«çš„ä¿¡æ¯æ˜¯å¸§æ ¡éªŒåºåˆ—FCSï¼ˆä½¿ç”¨CRCæ ¡éªŒï¼‰

- PPPå¸§

************************

## ç½‘ç»œå±‚
> å¸¸è§„è·¯ç”±å™¨ å·¥ä½œåœ¨è¿™ä¸€å±‚

### IPåè®®

> [IPæ•°æ®æŠ¥æ ¼å¼è¯¦è§£](https://blog.csdn.net/wangzhen209/article/details/74453548)

- IPæ•°æ®æŠ¥ ç»„æˆä¸º `é¦–éƒ¨(IPåœ°å€ç­‰ä¿¡æ¯) æ•°æ®(TCP/UDPæŠ¥æ–‡)` 
- é¦–éƒ¨å›ºå®šéƒ¨åˆ†æ„æˆä¸º:
    1.  `ç‰ˆæœ¬å·`ï¼šå ç”¨**4ä½**äºŒè¿›åˆ¶æ•°ï¼Œè¡¨ç¤ºè¯¥IPæ•°æ®æŠ¥ä½¿ç”¨çš„IPåè®®ç‰ˆæœ¬ã€‚ç›®å‰Internetä¸­ä½¿ç”¨çš„ä¸»è¦æ˜¯TCP/IPåè®®æ—ä¸­ç‰ˆæœ¬å·ä¸º4çš„IPåè®®ã€‚
    1.  `é¦–éƒ¨é•¿åº¦`ï¼šå ç”¨**4ä½**äºŒè¿›åˆ¶ä½ï¼Œæ­¤åŸŸæŒ‡å‡ºæ•´ä¸ªæŠ¥å¤´çš„é•¿åº¦ï¼ˆåŒ…æ‹¬é€‰é¡¹ï¼‰ï¼Œè¯¥é•¿åº¦æ˜¯ä»¥32ä½äºŒè¿›åˆ¶æ•°ä¸ºä¸€ä¸ªè®¡æ•°å•ä½çš„ï¼Œ
        - æ¥æ”¶ç«¯é€šè¿‡æ­¤åŸŸå¯ä»¥è®¡ç®—å‡ºæŠ¥å¤´åœ¨ä½•å¤„ç»“æŸåŠä»ä½•å¤„å¼€å§‹è¯»æ•°æ®ã€‚æ™®é€šIPæ•°æ®æŠ¥ï¼ˆæ²¡æœ‰ä»»ä½•é€‰é¡¹ï¼‰è¯¥å­—æ®µçš„å€¼æ˜¯5ï¼ˆå³20ä¸ªå­—èŠ‚çš„é•¿åº¦ï¼‰ã€‚
    1.  `æœåŠ¡ç±»å‹ï¼ˆTOSã€type of serviceï¼‰`ï¼šå ç”¨**8ä½**äºŒè¿›åˆ¶ä½ï¼Œç”¨äºè§„å®šæœ¬æ•°æ®æŠ¥çš„å¤„ç†æ–¹å¼ã€‚
    1.  `æ€»é•¿åº¦`ï¼šå ç”¨**16ä½**äºŒè¿›åˆ¶ä½ï¼Œæ€»é•¿åº¦å­—æ®µæ˜¯æŒ‡æ•´ä¸ªIPæ•°æ®æŠ¥çš„é•¿åº¦ï¼ˆæŠ¥å¤´åŒº+æ•°æ®åŒºï¼‰ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚
        - åˆ©ç”¨å¤´éƒ¨é•¿åº¦å­—æ®µå’Œæ€»é•¿åº¦å­—æ®µå°±å¯ä»¥è®¡ç®—å‡ºIPæ•°æ®æŠ¥ä¸­æ•°æ®å†…å®¹çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ã€‚ç”±äºè¯¥å­—æ®µé•¿åº¦ä¸º16ä½äºŒè¿›åˆ¶æ•°ï¼Œ
        - å› æ­¤ç†è®ºä¸ŠIPæ•°æ®æŠ¥æœ€é•¿å¯è¾¾65536ä¸ªå­—èŠ‚ï¼ˆäº‹å®ä¸Šå—ç‰©ç†ç½‘ç»œçš„é™åˆ¶ï¼Œè¦æ¯”è¿™ä¸ªæ•°å€¼å°å¾ˆå¤šï¼‰ã€‚
    1. `æ ‡è¯†` **16ä½** IPè½¯ä»¶åœ¨å­˜å‚¨å™¨ä¸­ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥ï¼Œè®¡æ•°å™¨å°±åŠ 1ï¼Œå¹¶å°†æ­¤å€¼èµ‹ç»™æ ‡è¯†å­—æ®µã€‚
        - ä½†è¿™ä¸ªâ€œæ ‡è¯†â€å¹¶ä¸æ˜¯åºå·ï¼Œå› ä¸ºIPæ˜¯æ— è¿æ¥æœåŠ¡ï¼Œæ•°æ®æŠ¥ä¸å­˜åœ¨æŒ‰åºæ¥æ”¶çš„é—®é¢˜ã€‚å½“æ•°æ®æŠ¥ç”±äºé•¿åº¦è¶…è¿‡ç½‘ç»œçš„MTUè€Œå¿…é¡»åˆ†ç‰‡æ—¶ï¼Œ
        - è¿™ä¸ªæ ‡è¯†å­—æ®µçš„å€¼å°±è¢«å¤åˆ¶åˆ°æ‰€æœ‰çš„æ•°æ®æŠ¥çš„æ ‡è¯†å­—æ®µä¸­ã€‚ç›¸åŒçš„æ ‡è¯†å­—æ®µçš„å€¼ä½¿åˆ†ç‰‡åçš„å„æ•°æ®æŠ¥ç‰‡æœ€åèƒ½æ­£ç¡®åœ°é‡è£…æˆä¸ºåŸæ¥çš„æ•°æ®æŠ¥ã€‚
    1. `æ ‡å¿—` **3ä½** ä½†åªæœ‰2ä½æœ‰æ„ä¹‰ã€‚
        - æ ‡å¿—å­—æ®µä¸­çš„æœ€ä½ä½è®°ä¸ºMF(More Fragment)ã€‚MF=1å³è¡¨ç¤ºåé¢â€œè¿˜æœ‰åˆ†ç‰‡â€çš„æ•°æ®æŠ¥ã€‚MF=0è¡¨ç¤ºè¿™å·²æ˜¯è‹¥å¹²æ•°æ®æŠ¥ç‰‡ä¸­çš„æœ€åä¸€ä¸ªã€‚
        - æ ‡å¿—å­—æ®µä¸­é—´çš„ä¸€ä½è®°ä¸ºDF(Donâ€™t Fragment)ï¼Œæ„æ€æ˜¯â€œä¸èƒ½åˆ†ç‰‡â€ã€‚åªæœ‰å½“DF=0æ—¶æ‰å…è®¸åˆ†ç‰‡ã€‚
    1. `ç‰‡åç§»` **13ä½** ç‰‡åç§»æŒ‡å‡ºï¼šè¾ƒé•¿çš„åˆ†ç»„åœ¨åˆ†ç‰‡åï¼ŒæŸç‰‡åœ¨åŸåˆ†ç»„ä¸­çš„ç›¸å¯¹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸å¯¹ç”¨æˆ·æ•°æ®å­—æ®µçš„èµ·ç‚¹ï¼Œè¯¥ç‰‡ä»ä½•å¤„å¼€å§‹ã€‚
        - ç‰‡åç§»ä»¥8ä¸ªå­—èŠ‚ä¸ºåç§»å•ä½ã€‚è¿™å°±æ˜¯è¯´ï¼Œé™¤äº†æœ€åä¸€ä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„é•¿åº¦ä¸€å®šæ˜¯8å­—èŠ‚ï¼ˆ64ä½ï¼‰çš„æ•´æ•°å€ã€‚
    1.  `ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼Œtime to liveï¼‰`ï¼šå ç”¨**8ä½**äºŒè¿›åˆ¶ä½ï¼Œå®ƒæŒ‡å®šäº†æ•°æ®æŠ¥å¯ä»¥åœ¨ç½‘ç»œä¸­ä¼ è¾“çš„æœ€é•¿æ—¶é—´ã€‚
        - å®é™…åº”ç”¨ä¸­æŠŠç”Ÿå­˜æ—¶é—´å­—æ®µè®¾ç½®æˆäº†æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±å™¨æ•°ã€‚TTLçš„åˆå§‹å€¼ç”±æºä¸»æœºè®¾ç½®ï¼ˆé€šå¸¸ä¸º32ã€64ã€128æˆ–256ï¼‰ï¼Œ
            - ä¸€æ—¦ç»è¿‡ä¸€ä¸ªå¤„ç†å®ƒçš„è·¯ç”±å™¨ï¼Œå®ƒçš„å€¼å°±å‡1ã€‚å½“è¯¥å­—æ®µä¸º0æ—¶ï¼Œæ•°æ®æŠ¥å°±ä¸¢å¼ƒï¼Œå¹¶å‘é€ICMPæŠ¥æ–‡é€šçŸ¥æºä¸»æœºï¼Œ
            - å› æ­¤å¯ä»¥é˜²æ­¢è¿›å…¥ä¸€ä¸ªå¾ªç¯å›è·¯æ—¶ï¼Œæ•°æ®æŠ¥æ— ä¼‘æ­¢åœ°ä¼ è¾“ä¸‹å»ã€‚
    1.  `ä¸Šå±‚åè®®æ ‡è¯†`ï¼šå ç”¨**8ä½**äºŒè¿›åˆ¶ä½ï¼ŒIPåè®®å¯ä»¥æ‰¿è½½å„ç§ä¸Šå±‚åè®®ï¼Œç›®æ ‡ç«¯æ ¹æ®åè®®æ ‡è¯†å°±å¯ä»¥æŠŠæ”¶åˆ°çš„IPæ•°æ®æŠ¥é€åˆ°TCPæˆ–UDPç­‰å¤„ç†æ­¤æŠ¥æ–‡çš„ä¸Šå±‚åè®®äº†ã€‚
    1.  `æ ¡éªŒå’Œ`ï¼šå ç”¨**16ä½**äºŒè¿›åˆ¶æ•°ï¼Œç”¨äºåè®®å¤´æ•°æ®æœ‰æ•ˆæ€§çš„æ ¡éªŒï¼Œå¯ä»¥ä¿è¯IPæŠ¥å¤´åŒºåœ¨ä¼ è¾“æ—¶çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚
        - å¤´éƒ¨æ£€éªŒå’Œå­—æ®µæ˜¯æ ¹æ®IPåè®®å¤´è®¡ç®—å‡ºçš„æ£€éªŒå’Œï¼Œå®ƒä¸å¯¹å¤´éƒ¨åé¢çš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚
        - åŸç†ï¼šå‘é€ç«¯é¦–å…ˆå°†æ£€éªŒå’Œå­—æ®µç½®0ï¼Œç„¶åå¯¹å¤´éƒ¨ä¸­æ¯16ä½äºŒè¿›åˆ¶æ•°è¿›è¡Œåç æ±‚å’Œçš„è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜åœ¨æ ¡éªŒå’Œå­—æ®µä¸­ã€‚ 
        - ç”±äºæ¥æ”¶æ–¹åœ¨è®¡ç®—è¿‡ç¨‹ä¸­åŒ…å«äº†å‘é€æ–¹æ”¾åœ¨å¤´éƒ¨çš„æ ¡éªŒå’Œï¼Œå› æ­¤ï¼Œå¦‚æœå¤´éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰å‘ç”Ÿä»»ä½•å·®é”™ï¼Œé‚£ä¹ˆæ¥æ”¶æ–¹è®¡ç®—çš„ç»“æœåº”è¯¥æ˜¯å…¨1ã€‚
    1.  `æºåœ°å€`ï¼šå ç”¨32ä½äºŒè¿›åˆ¶æ•°ï¼Œè¡¨ç¤ºå‘é€ç«¯IPåœ°å€ã€‚
    1.  `ç›®çš„åœ°å€`ï¼šå ç”¨32ä½äºŒè¿›åˆ¶æ•°ï¼Œè¡¨è¿°ç›®çš„ç«¯IPåœ°å€ã€‚

- IPv4 & IPv6

> [å‚è€ƒ: æµè§ˆå™¨è®¿é—®IPv6åœ°å€](http://www.cnblogs.com/cuihongyu3503319/p/7422877.html)

#### IPåœ°å€åˆ†ç±»
> IPåœ°å€çš„ç”± ç½‘ç»œå· ä¸»æœºå· ç»„æˆ
- IP ::= {<ç½‘ç»œå·>, <ä¸»æœºå·>}

IPv4 åœ°å€ç”± 32 ä½æ ‡è¯†ç¬¦ç»„æˆï¼Œç›®å‰ç”± ICANN è¿›è¡Œåˆ†é… ä¸”åœ¨ 2011 å¹´å·²ç»è€—å°½

| ç±»åˆ« | æ ‡è¯†ä½ | ç½‘ç»œå· | ä¸»æœºå· | æœ€å¤§å¯åˆ†é…ç½‘ç»œæ•° | æœ€å°å¯åˆ†é…ç½‘ç»œå· | æœ€å¤§å¯åˆ†é…ç½‘ç»œå· 
|:---|:---|:---|:---|:---|:---|:---|
| A | 0    | 8ä½  | 24ä½ | 126 2^7 - 2      | 1         | 126
| B | 10   | 16ä½ | 16ä½ | 16383 2^14 - 1   |  128.1    | 191.255
| C | 110  | 24ä½ | 8ä½  | 2097151 2^21 - 1 | 192.0.1   | 223.255.255
| D | 1110 |      |     |
| E | 1111 |      |     |

> ç‰¹æ®ŠIPåœ°å€

| ç½‘ç»œå·  |  ä¸»æœºå·   | æºåœ°å€ä½¿ç”¨ | ç›®çš„åœ°å€ä½¿ç”¨ | å«ä¹‰ |
|:---|:---|:---|:---|:---|
| 0      | 0          | å¯ä»¥   | ä¸å¯ä»¥ | åœ¨æœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœº |
| 0      | host-id    | å¯ä»¥   | ä¸å¯ä»¥ | åœ¨æœ¬ç½‘ç»œä¸Šçš„æŸä¸ªä¸»æœº host-id |
| å…¨1    | å…¨1         | ä¸å¯ä»¥ | å¯ä»¥   | åªåœ¨æœ¬ç½‘ç»œä¸Šè¿›è¡Œå¹¿æ’­ è·¯ç”±å™¨ä¸è½¬å‘ |
| net-id | å…¨1         | ä¸å¯ä»¥ | å¯ä»¥  | å¯¹ net-id çš„æ‰€æœ‰ä¸»æœºè¿›è¡Œå¹¿æ’­ |
| 127    | éå…¨0ä¸”éå…¨1 | å¯ä»¥   | å¯ä»¥  | ä½œæœ¬åœ°è½¯ä»¶å›ç¯æµ‹è¯•ç”¨ |

- Aç±»
- Bç±»
- Cç±»
- Dç±» ç”¨äºç»„æ’­(å¤šæ’­)
- Eç±» ä¿ç•™åœ°å€

#### æ— åˆ†ç±»ç¼–å€ CIDR
> è¶…ç½‘ï¼ˆsupernettingï¼‰ï¼Œä¹Ÿç§°æ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹©ï¼Œä¸ºäº†è§£å†³IPv4åœ°å€è€—å°½çš„é—®é¢˜

- IP ::= {<ç½‘ç»œå‰ç¼€>, <ä¸»æœºå·>}
- ä¾‹å¦‚ Docker ä½¿ç”¨çš„ç½‘æ®µ `172.17.0.1/16` 

### ARPåè®®
> åŒä¸€å±€åŸŸç½‘å†…ï¼Œé€šè¿‡å·²çŸ¥çš„IPåœ°å€å’Œæ‰¾åˆ°å¯¹åº”çš„ç¡¬ä»¶åœ°å€

1. æ¯ä¸ªä¸»æœºéƒ½ä¼šæœ‰ä¸€ä¸ª ARPé«˜é€Ÿç¼“å­˜ï¼Œå­˜å‚¨æœ¬å±€åŸŸç½‘å†…å„ä¸»æœºå’Œè·¯ç”±å™¨çš„IPåœ°å€å’Œç¡¬ä»¶åœ°å€çš„æ˜ å°„
1. å½“Aè¦å‘ä¸»æœºBå‘é€IPæ•°æ®æŠ¥å°±ä¼šæŸ¥æ‰¾è¯¥ç¼“å­˜ï¼Œå¦‚æœæ‰¾ä¸åˆ°
    1. ARP è¿›ç¨‹åœ¨ æœ¬å±€åŸŸç½‘å¹¿æ’­ å‘é€ARPè¯·æ±‚åˆ†ç»„ ä¿¡æ¯å¤§è‡´ä¸ºæˆ‘çš„IPåœ°å€A ç¡¬ä»¶åœ°å€Bï¼Œæƒ³çŸ¥é“IPåœ°å€Cçš„ç¡¬ä»¶åœ°å€
    1. æœ¬å±€åŸŸç½‘å†…æ‰€æœ‰ ARPè¿›ç¨‹éƒ½ä¼šæ”¶åˆ°è¯·æ±‚ï¼ŒIPåœ°å€ä¸è¯¢é—®ä¸­çš„IPåœ°å€ä¸€è‡´çš„æ‰ä¼šå“åº”è¯·æ±‚ï¼Œå…¶ä»–ä¸»æœºä¼šä¸¢å¼ƒ
    1. C å“åº”å†…å®¹å¤§è‡´ä¸º æˆ‘çš„IPåœ°å€ C ç¡¬ä»¶åœ°å€ Dï¼Œæ³¨æ„è¯¥å“åº”æ˜¯å•æ’­ï¼Œæ˜¾ç„¶æ­¤æ—¶åªéœ€è¦ç‚¹å¯¹ç‚¹é€šä¿¡å³å¯æ— éœ€å‘é€å¹¿æ’­è€Œäº§ç”Ÿå¤§é‡æ— ç”¨æ•°æ®æŠ¥å æ®ç½‘ç»œ
    1. A æ”¶åˆ°å“åº”å å°†æ˜ å°„å­˜å…¥ç¼“å­˜

### ICMPåè®®

************

## ä¼ è¾“å±‚
> TCP/IP è¿è¾“å±‚çš„ä¸¤ä¸ªä¸»è¦åè®®éƒ½æ˜¯å› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†

ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP `User Datagram Protocol`
æ§åˆ¶ä¼ è¾“åè®® TCP `Transmission Control Protocol`

æŒ‰ç…§ OSI çš„æœ¯è¯­, ä¸¤ä¸ªå¯¹ç­‰è¿è¾“å®ä½“åœ¨é€šä¿¡æ—¶ä¼ é€çš„æ•°æ®å•ä½å«åš è¿è¾“åè®®æ•°æ®å•å…ƒ TPDU Transport Protocol Data Unit.
ä½†åœ¨ TCP/IP ä½“ç³»ä¸­, åˆ™æ ¹æ®ä½¿ç”¨çš„æ‰€ä½¿ç”¨çš„åè®®æ˜¯ TCP æˆ– UDP, åˆ†åˆ«ç§°ä¹‹ä¸º TCPæŠ¥æ–‡æ®µ segment, UDPç”¨æˆ·æ•°æ®æŠ¥

- Socketæ¥å£ï¼š å¹¶ä¸æ˜¯ä¸€ä¸ªåè®®ï¼Œè€Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨TCPæˆ–UDPè€ŒæŠ½è±¡å‡ºæ¥çš„ä¸€å±‚ï¼Œæ˜¯ä½äºåº”ç”¨å±‚å’Œä¼ è¾“æ§åˆ¶å±‚ä¹‹é—´çš„ä¸€ç»„æ¥å£ã€‚
- Socketå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„TCP/IPåè®®æ—éšè—åœ¨Socketæ¥å£åé¢ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨

### TCP
> ä¼ è¾“æ§åˆ¶åè®®ï¼ˆè‹±è¯­ï¼šTransmission Control Protocolï¼Œç¼©å†™ä¸º TCP, æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäº**å­—èŠ‚æµ**çš„ä¼ è¾“å±‚é€šä¿¡åè®®ï¼Œç”±IETFçš„RFC 793å®šä¹‰ã€‚

- [wireshark tcp](https://www.wireshark.org/docs/wsug_html_chunked/ChAdvTCPAnalysis.html)

> TCP æ®µçš„å¤´éƒ¨ä¿¡æ¯ 20å­—èŠ‚ ä¹Ÿå°±æ˜¯160ä½
```
    16ä½æºç«¯å£å·,16ä½ç›®çš„ç«¯å£å·
    32ä½åºåˆ—å·
    32ä½ç¡®è®¤åºåˆ—å·
    4ä½é¦–éƒ¨é•¿åº¦, ä¿ç•™6ä½, URG, ACK, PSH, PST, SYN, FIN, 16ä½çª—å£å¤§å°
    16ä½æ ¡éªŒå’Œ, 16ä½ç´§æ€¥æŒ‡é’ˆ
    é€‰é¡¹
    æ•°æ®...
```

> [æ¼«ç”» | ä¸€å°LinuxæœåŠ¡å™¨æœ€å¤šèƒ½æ”¯æ’‘å¤šå°‘ä¸ªTCPè¿æ¥ï¼Ÿ ](https://mp.weixin.qq.com/s/RdsNsanjeyVIkY6UuaJS4w)
- TCPè¿æ¥å››å…ƒç»„æ˜¯æºIPåœ°å€ã€æºç«¯å£ã€ç›®çš„IPåœ°å€å’Œç›®çš„ç«¯å£ã€‚åªè¦ä»»ä¸€å…ƒç´ å‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå°±ä»£è¡¨çš„æ˜¯ä¸€æ¡å®Œå…¨ä¸åŒçš„è¿æ¥ã€‚
    - æ‹¿Nginxå¼€å¯çš„80ç«¯å£ä¸¾ä¾‹ï¼Œç›®çš„IPåœ°å€ã€ç›®çš„ç«¯å£éƒ½æ˜¯å›ºå®šçš„ã€‚å‰©ä¸‹æºIPåœ°å€ã€æºç«¯å£æ˜¯å¯å˜çš„ã€‚  
    - æ‰€ä»¥ç†è®ºä¸ŠNginxä¸Šæœ€å¤šå¯ä»¥å»ºç«‹ 2çš„32æ¬¡æ–¹ï¼ˆipæ•°ï¼‰ Ã— 2çš„16æ¬¡æ–¹ï¼ˆportæ•°ï¼‰ ä¸ªè¿æ¥ã€‚
- è¿™æ˜¯`ä¸¤ç™¾å¤šä¸‡äº¿`çš„ä¸€ä¸ªå¤§æ•°å­—ï¼Œå½“æ¥è¿‘è¿™ä¸ªè¿æ¥æ•°çš„é‡çº§ï¼Œé¦–å…ˆä¼šè¢« æ“ä½œç³»ç»Ÿå¯æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ï¼Œå¯ç”¨å†…å­˜ï¼ŒCPUç­‰èµ„æºåˆ¶çº¦ã€‚  

> KeepAlive
- [èŠèŠ TCP é•¿è¿æ¥å’Œå¿ƒè·³é‚£äº›äº‹ ](https://juejin.cn/post/6844903765674295309)
    - HTTP åè®®çš„ KeepAlive æ„å›¾åœ¨äºtcpçš„è¿æ¥å¤ç”¨ï¼ŒåŒä¸€ä¸ªè¿æ¥ä¸Šä¸²è¡Œæ–¹å¼ä¼ é€’è¯·æ±‚-å“åº”æ•°æ®ã€‚ 
    - TCP çš„ KeepAlive æœºåˆ¶æ„å›¾åœ¨äºä¿æ´»ã€å¿ƒè·³ï¼Œæ£€æµ‹è¿æ¥é”™è¯¯ã€‚

> ç›¸å…³å·¥å…·
- [Github: tcping](https://github.com/pouriyajamshidi/tcping) `æµ‹è¯•tcpè¿æ¥å»¶è¿Ÿ`

### UDP

> UDP æ®µçš„å¤´éƒ¨ä¿¡æ¯ 8 å­—èŠ‚
```
    16ä½æºç«¯å£å·,16ä½ç›®çš„ç«¯å£å·
    16ä½ç”¨æˆ·æ•°æ®åº“åŒ…é•¿åº¦, 16ä½æ£€æŸ¥å’Œ
    æ•°æ®...
```

### TCP UDP å¯¹æ¯”
> [å‚è€ƒ: TCPå’ŒUDPçš„æœ€å®Œæ•´çš„åŒºåˆ«](https://blog.csdn.net/li_ning_/article/details/52117463)  
> [å‚è€ƒ: TCPå’ŒUDPçš„åŒºåˆ«å’Œä¼˜ç¼ºç‚¹](https://blog.csdn.net/xiaobangkuaipao/article/details/76793702)  
> [å‚è€ƒ: TCPã€UDPæ•°æ®åŒ…å¤§å°çš„é™åˆ¶](https://blog.csdn.net/caoshangpa/article/details/51530685)  

- å¯ä½¿ç”¨ wireshark æŠ“åŒ…å¯¹æ¯”çš„æ–¹å¼è¿›è¡Œå­¦ä¹ : åŸºäºudp(é»˜è®¤)çš„dnsæ–¹å¼ï¼Œå¯¹æ¯” åŸºäºtcpçš„dnsæ–¹å¼ æ›´ç›´è§‚çœ‹å‡º tcp ä¸‰æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹ -- ã€ŠWireshark ç½‘ç»œåˆ†æå°±è¿™ä¹ˆç®€å•ã€‹

- TCPä¸UDPåŸºæœ¬åŒºåˆ«
  1. é¢å‘è¿æ¥ ä¸ æ— è¿æ¥
  1. TCPè¦æ±‚ç³»ç»Ÿèµ„æºè¾ƒå¤šï¼ŒUDPè¾ƒå°‘
  1. UDPç¨‹åºç»“æ„è¾ƒç®€å• 
  1. æµæ¨¡å¼ï¼ˆTCPï¼‰ä¸æ•°æ®æŠ¥æ¨¡å¼(UDP); 
    - å¼€å‘è€…åœ¨ä½¿ç”¨TCPæœåŠ¡çš„æ—¶å€™ï¼Œä¸å¿…å»å…³å¿ƒæ•°æ®åŒ…çš„å¤§å°ï¼Œåªéœ€å°†SOCKETçœ‹ä½œä¸€æ¡æ•°æ®æµçš„å…¥å£ï¼Œç›´æ¥ä¼ å…¥æ•°æ®ï¼ŒTCPåè®®æœ¬èº«ä¼šè¿›è¡Œæ‹¥å¡/æµé‡æ§åˆ¶
        - ä½†æ˜¯ä¹Ÿå› æ­¤è¦å¤„ç†ç²˜åŒ…æ‹†åŒ…çš„é—®é¢˜ï¼ˆæ­¤å¤„å±äºæ¦‚å¿µæ··æ·†ï¼Œæ­£ç¡®æè¿°åº”è¯¥æ˜¯**åº”ç”¨å±‚**ä¸Šæ•°æ®æ­£ç¡®çš„åºåˆ—åŒ–ååºåˆ—åŒ–ï¼ŒåŒ…çš„æ¦‚å¿µä»…å¤„äºç½‘ç»œå±‚ï¼‰
    - UDPçš„æœ€å¤§åŒ…é•¿åº¦æ˜¯2^16-1çš„ä¸ªå­—èŠ‚ã€‚ç”±äºudpåŒ…å¤´å 8ä¸ªå­—èŠ‚ï¼Œè€Œåœ¨ipå±‚è¿›è¡Œå°è£…åçš„ipåŒ…å¤´å å»20å­—èŠ‚ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯udpæ•°æ®åŒ…çš„æœ€å¤§ç†è®ºé•¿åº¦æ˜¯2^16-1-8-20=65507ã€‚ 
        - UDPåŒ…çš„å¤§å°å—é™äº æ“ä½œç³»ç»Ÿä¸­ MTU çš„å€¼ï¼ˆå•ä½å­—èŠ‚byteï¼‰ ã€‚
            - æŸ¥çœ‹loè®¾å¤‡ï¼š`cat /sys/class/net/lo/mtu`
            - è¯•æ¢å‡ºå£MTU `ping -s 1472 jd.com`
        - UDPæ•°æ®æŠ¥çš„æ•°æ®åŒºé€šå¸¸å°äºç­‰äº1472å­—èŠ‚ï¼ˆé€šå¸¸è®¾å¤‡MTUä¸º1500ï¼ŒåŒæ ·å‡å»28ï¼‰
        - å¦‚æœè¶…è¿‡1472å¾ˆå¯èƒ½è¢«åˆ†åŒ…ï¼Œè€Œå…¶ä¸­ä¸€éƒ¨åˆ†ä¸¢åŒ…ï¼Œä¼šå¯¼è‡´æ•´ä½“æ— æ³•è¢«æ¥å—æ–¹ç»„åˆæ•°æ®è¢«ä¸¢å¤±ï¼Œæ•´ä½“çœ‹æ¥ä¸¢åŒ…æ¦‚ç‡ä¼šå¤§å¤§å‡é«˜
  1. TCPä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼ŒUDP éœ€è¦è‡ªå·±å¤„ç†ä¸¢åŒ…å’Œæ•°æ®å€¼è¢«å¹²æ‰° 
  1. TCPä¿è¯æ•°æ®é¡ºåºï¼ŒUDPä¸ä¿è¯ 
ã€€ã€€
- UDPåº”ç”¨åœºæ™¯ï¼š
  1. é¢å‘æ•°æ®æŠ¥æ–¹å¼
  1. ç½‘ç»œæ•°æ®å¤§å¤šä¸ºçŸ­æ¶ˆæ¯ 
  1. æ‹¥æœ‰å¤§é‡Client
  1. å¯¹æ•°æ®å®‰å…¨æ€§æ— ç‰¹æ®Šè¦æ±‚
  1. ç½‘ç»œè´Ÿæ‹…éå¸¸é‡ï¼Œä½†å¯¹å“åº”é€Ÿåº¦è¦æ±‚é«˜

### SCTP
> [Stream Control Transmission Protocol](https://es.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)

************************

## åº”ç”¨å±‚

### HTTP & HTTPS
> [HTTP & HTTPS](/Skills/Network/HTTP.md)

************************

### Websocket
> Websocketåè®® æœ¬è´¨å°±æ˜¯TCPçš„ç®€å•å°è£…, ä¸åƒHTTPé‚£æ ·åº”ç­”æ¨¡å¼, è€Œæ˜¯ä¸€æ¬¡è¿æ¥åå°±ä¿æŒå…¨åŒå·¥æ¨¡å¼

> [å‚è€ƒ: Netty WebSocket æ‹†åŒ…æµ…æ](https://www.jianshu.com/p/30c26a755a87)  
- io.netty.handler.codec.http.websocketx.WebSocket08FrameDecoder#decode
- [ ] æ–‡æœ¬æ•°æ®è¾¾åˆ°å¤šå¤§ï¼Œä¼šé‡åˆ°æ‹†åŒ…é—®é¢˜

1. å•ä¸€çš„å°è£…TCPè¿æ¥, é‡‡ç”¨å…¨åŒå·¥æ¨¡å¼é€šä¿¡
2. å¯¹ä»£ç†, é˜²ç«å¢™å’Œè·¯ç”±å™¨é€æ˜
3. æ— å¤´éƒ¨ä¿¡æ¯, Cookie, èº«ä»½éªŒè¯
4. æ— å®‰å…¨å¼€é”€
5. é€šè¿‡ ping/pong äºŒè¿›åˆ¶å¸§ ä¿æŒé“¾è·¯æ¿€æ´»
6. æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨ä¼ é€’æ¶ˆæ¯ç»™å®¢æˆ·ç«¯, ä¸éœ€è¦å®¢æˆ·ç«¯è½®è¯¢

> 4ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶
1. æ‰“å¼€äº‹ä»¶ï¼šæ­¤äº‹ä»¶å‘ç”Ÿåœ¨ç«¯ç‚¹å»ºç«‹æ–°è¿æ¥æ—¶å¹¶ä¸”åœ¨ä»»æ„å…¶ä»–äº‹ä»¶å‘ç”Ÿä¹‹å‰
2. æ¶ˆæ¯äº‹ä»¶ï¼šæ­¤äº‹ä»¶æ¥æ”¶WebSocketå¯¹è¯ä¸­å¦ä¸€ç«¯å‘é€çš„æ¶ˆæ¯ã€‚ä»–å¯ä»¥å‘ç”Ÿåœ¨WebSocketç«¯ç‚¹æ¥æ”¶äº†æ‰“å¼€äº‹ä»¶ä¹‹åå¹¶ä¸”åœ¨æ¥æ”¶å…³é—­äº‹ä»¶å…³é—­è¿æ¥ä¹‹å‰çš„ä»»æ„æ—¶åˆ»
3. é”™è¯¯äº‹ä»¶ï¼šæ­¤äº‹ä»¶åœ¨WebSocketè¿æ¥æˆ–è€…ç«¯ç‚¹å‘ç”Ÿé”™è¯¯æ—¶äº§ç”Ÿ
4. å…³é—­äº‹ä»¶ï¼šæ­¤äº‹ä»¶è¡¨ç¤ºWebSocketç«¯ç‚¹çš„è¿æ¥ç›®å‰æ­£åœ¨éƒ¨åˆ†çš„å…³é—­ï¼Œä»–å¯ä»¥æœ‰å‚ä¸è¿æ¥çš„ä»»æ„ä¸€ä¸ªç«¯ç‚¹å‘å‡º

> å…³é—­çŠ¶æ€ç 
1. [WebSocket RFC](https://tools.ietf.org/html/rfc6455#section-7.4)
1. [WebSocketæ–­å¼€åŸå› åˆ†æ](https://wdd.js.org/websocket-close-reasons.html)

- [ç†è§£websocketçš„åŸç†](https://zhuanlan.zhihu.com/p/149680021)
    - ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ TCP è¿æ¥(å¦‚æœæ˜¯ wss è¿˜éœ€è¦å»ºç«‹ tls è¿æ¥), å¹¶ä»HTTPåè®®åå•†å‡çº§åˆ°WSåè®®
    - æ­£å¸¸å…³é—­æ—¶ TCP çš„å››æ¬¡æŒ¥æ‰‹ï¼Œå¼‚å¸¸å…³é—­åˆ™æ˜¯ TCP åè®® å‘é€ rst åŒ…

å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥å å®¢æˆ·ç«¯ç½‘ç»œå‘ç”Ÿå˜åŒ–(ä¾‹å¦‚VPNå…³é—­,æœåŠ¡ç«¯åœ¨VPNç½‘ç»œä¸‹æ‰å¯è®¿é—®)ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯çš„å®šæ—¶pingä¼šç´¯ç§¯èµ·æ¥ï¼Œç­‰æ¢å¤åï¼Œä¸€æ¬¡å‘é€å¤šæ¡æ•°æ®ï¼Œå¯ä»¥é€šè¿‡æŠ“åŒ…è§‚å¯Ÿåˆ°


************************

### WebDAV
> WebDAV ï¼ˆWeb-based Distributed Authoring and Versioningï¼‰ ä¸€ç§åŸºäº HTTP 1.1åè®®çš„é€šä¿¡åè®®. [Wikipedia: webdav](https://en.wikipedia.org/wiki/WebDAV)

å®ƒæ‰©å±•äº†HTTP 1.1ï¼Œåœ¨GETã€POSTã€HEADç­‰å‡ ä¸ªHTTPæ ‡å‡†æ–¹æ³•ä»¥å¤–æ·»åŠ äº†ä¸€äº›æ–°çš„æ–¹æ³•ï¼Œä½¿åº”ç”¨ç¨‹åºå¯ç›´æ¥å¯¹Web Serverç›´æ¥è¯»å†™ï¼Œå¹¶æ”¯æŒå†™æ–‡ä»¶é”å®š(Locking)åŠè§£é”(Unlock)ï¼Œè¿˜å¯ä»¥æ”¯æŒæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ã€‚

äº‘ç›˜ç±»å¹³å°ï¼ˆä¾‹å¦‚åšæœäº‘ï¼‰ä¼šæä¾› WebDAV åè®®æ¥å£ï¼Œä»è€Œè®©æ“ä½œäº‘ç›˜ä¸Šçš„æ–‡ä»¶è¾¾åˆ°ä¸æœ¬åœ°ç›®å½•å’Œæ–‡ä»¶çš„ä½¿ç”¨ä½“éªŒã€‚

> ç›¸å…³å·¥å…·

å®¢æˆ·ç«¯ï¼š
- Windowsï¼š RaiDrive
- Ios: ESæ–‡ä»¶æµè§ˆå™¨

æœåŠ¡ç«¯ï¼š
- [goå¼€å‘WebDAVæœåŠ¡ç«¯](https://pkg.go.dev/golang.org/x/net/webdav)
- [go: simple webdav server](https://github.com/Kuangcp/GoBase/tree/master/toolbox/kwebdav)

************************

### ç½‘ç»œå»¶è¿Ÿ
> [å¦‚ä½•å½»åº•è§£å†³ã€Œç½‘ç»œå»¶è¿Ÿã€è¿™ä¸ªé—®é¢˜ï¼Ÿ](https://www.zhihu.com/question/34689035)

- [MOBAç±»æ¸¸æˆæ˜¯å¦‚ä½•è§£å†³ç½‘ç»œå»¶è¿ŸåŒæ­¥çš„ï¼Ÿ](https://www.zhihu.com/question/36258781)
- [çŠ¶æ€åŒæ­¥ä¸å¸§åŒæ­¥](http://www.cnblogs.com/sevenyuan/p/5283265.html)

### TTFB
> `Time to first byte` ç½‘ç»œè¯·æ±‚è¢«å‘èµ·åˆ°ä»æœåŠ¡å™¨æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚è¿™æ®µæ—¶é—´ï¼Œå®ƒåŒ…å«äº† TCPè¿æ¥æ—¶é—´ï¼Œå‘é€HTTPè¯·æ±‚æ—¶é—´å’Œè·å¾—å“åº”æ¶ˆæ¯ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ã€‚

### URL
> [ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/URL) | [ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/URL)

- ç»Ÿä¸€èµ„æºå®šä½ç¬¦ ç‰¹åˆ«æ³¨æ„URLçš„ç»„æˆå’Œç¼–è§£ç   [urlä¸­çš„ç‰¹æ®Šå­—ç¬¦é—®é¢˜](http://www.cnblogs.com/xmphoenix/archive/2011/04/20/2022945.html)
    - ä¸èƒ½åœ¨URLçš„å…³é”®ä½ç½®å‡ºç°%å·ï¼Œä½œä¸ºå‚æ•°çš„å€¼æ˜¯å…è®¸çš„ã€‚

### DNS
> åŸŸåå’Œèµ„æºè½¬æ¢çš„æœåŠ¡ï¼›å®ŒæˆåŸŸåè§£æéœ€è¦ä¾èµ– åŸºäºUDPå®ç°çš„ DNS åè®®

> [www.ipaddress.com](https://www.ipaddress.com/)`æŸ¥è¯¢åŸŸåçš„çœŸå®IP` å¯ååŠ©è§£å†³DNSæ±¡æŸ“æ”»å‡»

> [Wikipedia: DNS](https://en.wikipedia.org/wiki/Domain_Name_System)
> [é¢è¯•å®˜:è®²è®²DNSçš„åŸç†ï¼Ÿ](https://zhuanlan.zhihu.com/p/79350395)

- è§£æåŸŸåçš„é¡ºåºä¸€èˆ¬æ˜¯ï¼Œå…ˆåœ¨æœ¬æœºæ‰¾ï¼Œæ‰¾ä¸åˆ°å»æ‰¾ä¸Šè¿DNSæœåŠ¡å™¨ï¼Œç„¶åæ ¹åŸŸDNSæœåŠ¡å™¨
    - å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼šé€’å½’ã€è¿­ä»£ã€é€’å½’åŠ è¿­ä»£ï¼ˆä¸ºäº†å‡è½»å…¨çƒ13å°æ ¹çš„å‹åŠ›ï¼‰
    - å‡è®¾æ˜¯è®¿é—®è¿™ä¸ªåŸŸå scs.bupt.edu.cn ï¼ˆbupt.ä¸‰çº§ æœºæ„åŸŸåï¼Œ edu äºŒçº§è¡Œä¸šåŸŸåï¼Œ cn ä¸€çº§å›½å®¶åŸŸåï¼‰
    - é€’å½’ï¼š æœ¬æœº->ä¸Šè¿->æ ¹->cn->edu.cn->bupt.deu.cn ç„¶åå¾—åˆ°è§£æç»“æœåï¼Œé€’å½’è¿”å›åˆ°ä¸Šè¿ï¼Œä¸Šè¿DNSæœåŠ¡å™¨ä¼šè¿›è¡Œç¼“å­˜è¯¥ç»“æœï¼Œå†è¿”å›æœ¬æœº
    - è¿­ä»£ï¼šæœ¬æœº->ä¸Šè¿ï¼Œä¸Šè¿->æ ¹ï¼Œæ ¹->cn cn->edu.cn, edu.cn->bupt.deu.cn æœ€ç»ˆè¿”å›äº†ç»“æœ åˆ°ä¸Šè¿
    - é€’å½’åŠ è¿­ä»£ï¼Œ åŒºåˆ«åœ¨äºï¼Œå…ˆè¿­ä»£æ ¹ï¼Œ å¾—åˆ°ä¸‹çº§ä¸€çº§æœåŠ¡å™¨èŠ‚ç‚¹åï¼Œä¸‹çº§å°±æ˜¯é€’å½’çš„å…¥å£å’Œå‡ºå£
- æˆæƒå’Œéæˆæƒï¼Œ è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªURLï¼Œ å…¶ä»–çš„éƒ½ä¸æ˜¯æˆæƒçš„ï¼Œ åªæœ‰ç¦»URLæœ€è¿‘çš„DNSæ‰æ˜¯æˆæƒçš„ å³ `bupt.edu.cn` 

> è‡ªå»ºDNSæœåŠ¡å™¨
- smartDNS
- dnsmasq

### MDNS
mDNS multicast DNS , ä½¿ç”¨5353ç«¯å£ï¼Œç»„æ’­åœ°å€ 224.0.0.251   
æ¯ä¸ªè¿›å…¥å±€åŸŸç½‘çš„ä¸»æœºï¼Œå¦‚æœå¼€å¯äº†mDNSæœåŠ¡çš„è¯ï¼Œéƒ½ä¼šå‘å±€åŸŸç½‘å†…çš„æ‰€æœ‰ä¸»æœºç»„æ’­ä¸€ä¸ªæ¶ˆæ¯ï¼Œæˆ‘æ˜¯è°ï¼Œå’Œæˆ‘çš„IPåœ°å€æ˜¯å¤šå°‘ã€‚  
ç„¶åå…¶ä»–ä¹Ÿæœ‰è¯¥æœåŠ¡çš„ä¸»æœºå°±ä¼šå“åº”ï¼Œä¹Ÿä¼šå‘Šè¯‰ä½ ï¼Œå®ƒæ˜¯è°ï¼Œå®ƒçš„IPåœ°å€æ˜¯å¤šå°‘ã€‚mDNSçš„åŸŸåä¸æ™®é€šDNSçš„åŸŸåæ˜¯é€šè¿‡åç¼€.localåŒºåˆ†å¼€æ¥çš„ã€‚  
å¦‚æœä¸€å°ç»ˆç«¯éœ€è¦è®¿é—®ä¸€ä¸ªmDNSåŸŸåï¼Œä»–å°±ä¼šå‘å±€åŸŸç½‘å†…å‘é€ç»„æ’­ï¼Œè¯¢é—®è¯¥åŸŸåçš„IPæ˜¯å¤šå°‘ã€‚  

#### å®‰å…¨æ€§é—®é¢˜
DOH `DNS over HTTPS` 443ç«¯å£
DOT `DNS over TLS` 853ç«¯å£

************************

### VPN
>  Virtual Private Network (VPN) 

************************
### SSDP
> Simple Service Discovery Protocol

************************

# Socket
> [å‚è€ƒ: TCP/IPã€Httpã€Socketçš„åŒºåˆ«](https://blog.csdn.net/Pk_zsq/article/details/6087367)  
> [what is socket](https://unix.stackexchange.com/questions/16311/what-is-a-socket)

Socketæ˜¯åº”ç”¨å±‚ä¸TCP/IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚ï¼Œæ˜¯å¯¹TCP/IPåè®®çš„å°è£…ï¼ŒSocketæœ¬èº«å¹¶ä¸æ˜¯åè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªè°ƒç”¨æ¥å£ï¼ˆAPIï¼‰ï¼Œé€šè¿‡Socketï¼Œæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨TCP/IPåè®®

åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼ŒSocketå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„TCP/IPåè®®æ—éšè—åœ¨Socketæ¥å£åé¢ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®©Socketå»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚è€Œæˆ‘ä»¬æ‰€è¯´çš„socketç¼–ç¨‹æŒ‡çš„æ˜¯åˆ©ç”¨soketæ¥å£æ¥å®ç°è‡ªå·±çš„ä¸šåŠ¡å’Œåè®®ã€‚

Sockeæ¥å£å±äºè½¯ä»¶æŠ½è±¡å±‚ï¼Œè€Œsokcketç¼–ç¨‹å´æ˜¯æ ‡å‡†çš„åº”ç”¨å±‚å¼€å‘

> [å‚è€ƒ: Socketç¼–ç¨‹](http://www.cnblogs.com/skynet/archive/2010/12/12/1903949.html)  
> [å‚è€ƒ: Linux socket ç¼–ç¨‹](https://www.ibm.com/developerworks/cn/education/linux/l-sock/l-sock.html)


************************

# å•æ’­ ç»„æ’­ å¹¿æ’­
å¹¿æ’­é€šä¿¡åªèƒ½åœ¨å±€åŸŸç½‘å†…ä¼ æ’­ï¼Œç»„æ’­é€šä¿¡èƒ½åœ¨å…¬ç½‘å†…ä¼ æ’­

ç»„æ’­é€šä¿¡ç›¸å½“äºæŠŠä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€šä¿¡å‹åŠ›è½¬å«åˆ°äº†è·¯ç”±å™¨ä¸Šé¢ï¼Œæ‰€ä»¥è¦å¾—åˆ°è·¯ç”±åŠç½‘ç»œçš„æ”¯æŒæ‰èƒ½è¿›è¡Œç»„æ’­é€šä¿¡ï¼Œæ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­æ¶‰åŠçš„è·¯ç”±å™¨æˆ–äº¤æ¢æœºéƒ½è¦æ”¯æŒç»„æ’­é€šä¿¡ï¼Œå¦åˆ™å°†æ— æ³•ä½¿ç”¨ç»„æ’­é€šä¿¡

## å•æ’­

## ç»„æ’­

> [å‚è€ƒ: ç»„æ’­ï¼ˆMulticastï¼‰ä¼ è¾“](http://www.cnblogs.com/ghj1976/p/5276452.html)  

## å¹¿æ’­

************************

# ä»£ç† Proxy
> [wikipedia](https://en.wikipedia.org/wiki/Proxy) 

## ä»£ç†åè®®
### HTTPä»£ç†

ä¾‹å¦‚ mitmproxy 

### SOCKS
ç”±äºSOCKSä½œç”¨åœ¨ä¼šè¯å±‚ä¸Šï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªæä¾›ä¼šè¯å±‚åˆ°ä¼šè¯å±‚é—´å®‰å…¨æœåŠ¡çš„æ–¹æ¡ˆï¼Œä¸å—é«˜å±‚åº”ç”¨ç¨‹åºå˜æ›´çš„å½±å“ã€‚  
Socksä»£ç†åªæ˜¯ç®€å•åœ°ä¼ é€’æ•°æ®åŒ…ï¼Œè€Œä¸å¿…å…³å¿ƒæ˜¯ä½•ç§åº”ç”¨åè®®(æ¯”å¦‚FTPã€HTTPå’ŒNNTPè¯·æ±‚)ï¼Œæ‰€ä»¥Socksä»£ç†æœåŠ¡å™¨æ¯”åº”ç”¨å±‚ä»£ç†æœåŠ¡å™¨è¦å¿«ã€‚

## PAC
> proxy auto config 

> [MDN: PAC File](https://developer.mozilla.org/en-US/docs/Web/HTTP/Proxy_servers_and_tunneling/Proxy_Auto-Configuration_(PAC)_file)

æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæä¾›äº†FindProxyForURLå‡½æ•°çš„è‡ªå®šä¹‰å®ç°ï¼ˆä¾æ®ä¸åŒçš„URLé€‰æ‹©ä¸åŒçš„Proxyæˆ–è€…ä¸ä½¿ç”¨Proxyï¼‰

> ç¤ºä¾‹1ï¼šå…¨éƒ¨èµ°ä»£ç†
```js
function FindProxyForURL(url, host) {
    return "PROXY 127.0.0.1:8080"; 
}
```

> ç¤ºä¾‹2ï¼š å±€åŸŸç½‘ä½¿ç”¨Aä»£ç†ï¼ŒåŸŸåé€šé…ä½¿ç”¨Bä»£ç†ï¼Œç›´è¿ä¸èµ°ä»£ç†
```js
function FindProxyForURL(url, host) {
  url = url.toLowerCase();
  host = host.toLowerCase();

  if (url.startsWith("http:")) {
    return "PROXY localhost:1234";
  }

  if (shExpMatch(url, "*github.com*")) {
    return "PROXY 127.0.0.1:7890";
  }

  return "DIRECT";
}
```

## æ­£å‘ä»£ç†
> éšè— å®¢æˆ·ç«¯ åœ°å€, å»è®¿é—®åœ°å€æ˜ç¡®çš„æœåŠ¡ç«¯

- åº”ç”¨: ç§‘å­¦ä¸Šç½‘, VPN 
- å®‰å…¨: æ­£å‘ä»£ç†å…è®¸å®¢æˆ·ç«¯é€šè¿‡å®ƒè®¿é—®ä»»æ„ç½‘ç«™å¹¶ä¸”éšè”½å®¢æˆ·ç«¯è‡ªèº«ï¼Œå› æ­¤ä½ å¿…é¡»é‡‡å–å®‰å…¨æªæ–½æ¥ç¡®ä¿ä»…ä¸ºç»è¿‡æˆæƒçš„å®¢æˆ·ç«¯æä¾›æœåŠ¡

## åå‘ä»£ç†
> éšè— æœåŠ¡ç«¯ åœ°å€, å®¢æˆ·ç«¯é€šè¿‡æ˜ç¡®åœ°å€è®¿é—®çš„å®é™…ä¸Šæ˜¯ä»£ç†

- åº”ç”¨: ä¿æŠ¤å’Œéšè—åŸå§‹èµ„æºæœåŠ¡å™¨, è´Ÿè½½å‡è¡¡, åŠ å¯†å’ŒSSLåŠ é€Ÿ, ç¼“å­˜é™æ€å†…å®¹, å®‰å…¨(DDosçš„é˜²æŠ¤)
- å®‰å…¨: å¯¹å¤–æ˜¯é€æ˜çš„ï¼Œè®¿é—®è€…å¹¶ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯ä»£ç†ã€‚å¯¹è®¿é—®è€…è€Œè¨€ï¼Œä»–ä»¥ä¸ºè®¿é—®çš„å°±æ˜¯åŸå§‹æœåŠ¡å™¨

## é€æ˜ä»£ç†
> å®¢æˆ·ç«¯æ ¹æœ¬ä¸éœ€è¦çŸ¥é“æœ‰ä»£ç†æœåŠ¡å™¨çš„å­˜åœ¨ï¼Œå®ƒæ”¹å˜ä½ çš„ request fieldsï¼ˆæŠ¥æ–‡ï¼‰ï¼Œå¹¶ä¼šä¼ é€å®¢æˆ·ç«¯çœŸå®IPç»™æœåŠ¡ç«¯ï¼Œå¤šç”¨äºè·¯ç”±å™¨çš„NATè½¬å‘ä¸­

é€æ˜ä»£ç†çš„è¿™å±‚å¯ä»¥åŒæ—¶éƒ¨ç½²æ­£å‘ä»£ç†å’Œåå‘ä»£ç†

åº”ç”¨æ–¹æ— æ„Ÿä½¿ç”¨ç¼“å­˜æŠ€æœ¯æé«˜è®¿é—®é€Ÿåº¦ï¼Œèƒ½æé«˜ç½‘ç»œå®‰å…¨æ€§(å†…ç½‘ä¸­çš„ç¡¬ä»¶é˜²ç«å¢™ã€‚ä¼ä¸šä¸­çš„è¡Œä¸ºç®¡ç†è½¯ä»¶)

************************
# ç½‘ç»œå·¥å…·
## ä»£ç†å·¥å…·
> [Alternatives to Charles for Linux](https://alternativeto.net/software/charles/?platform=linux)
- [whistle](https://github.com/avwo/whistle) `nodejs å¹³å°çš„æŠ“åŒ…å·¥å…·`

### Clash
[Github](https://github.com/Dreamacro/clash)

### Fiddler 
> [fiddler](https://www.telerik.com/fiddler)`ç”±C#å¼€å‘, è‡ªå®šä¹‰è„šæœ¬ä¸ºC#`  

> [fiddler-everywhere](https://www.telerik.com/fiddler-everywhere) `Linux å…è´¹`

### Charles
> [Offcial Site](https://www.charlesproxy.com/) | [_](http://charles.iiilab.com/)

### mitmproxy
> [Official Site](https://mitmproxy.org/) | [Docker Hub](https://hub.docker.com/r/mitmproxy/mitmproxy/) | [Github](https://github.com/mitmproxy/mitmproxy)

è‡ªå®šä¹‰è„šæœ¬ä¸ºPython

> ç®€è¯„ï¼šè¿‡æ»¤å’Œæœç´¢åŠŸèƒ½å¼ºå¤§ä¸”æ”¯æŒé‡æ”¾ä½†æ˜¯ç”¨ä¹…äº†å ç”¨å†…å­˜å¤§ï¼Œå› ä¸ºæŠ“åŒ…çš„æ•°æ®éƒ½åœ¨å†…å­˜é‡Œ

- docker å¯åŠ¨ `docker run --name mitmproxy -d -p 8888:8080 -p 8081:8081 mitmproxy/mitmproxy mitmweb --web-host 0.0.0.0`
    - 5.0 ç‰ˆæœ¬ä¹‹å‰ ä½¿ç”¨ `--web-iface 0.0.0.0`

- **é…ç½®è¯ä¹¦** è®¿é—® [mitm.it](http://mitm.it) é€‰æ‹©å¯¹åº”çš„å¹³å°å³å¯
    - å®é™…ä¸Šæ˜¯å®‰è£…äº† mitmproxy-ca-cert.pem æ–‡ä»¶ è¿›è€Œä¿¡ä»»äº† mitmproxy è¿™ä¸ªCA

> [gomitproxy](https://github.com/zboya/gomitmproxy) `Go å®ç°`  

### tinyproxy
[Github](https://github.com/tinyproxy)

### Mars
> [Github](https://github.com/ouqiang/mars)

`è™½ç„¶æœ‰ä½¿ç”¨LevelDBåšå­˜å‚¨ï¼Œä½†æ˜¯å‰ç«¯ç›®å‰æœ‰BUGä¸èƒ½æŒä¹…è®°å½•`  

### camilla
> [Offcial Site](https://www.camillaproxy.com/docs/)

> [docker-compose](https://gitee.com/gin9/DockerfileList/tree/master/docker-compose/camilla)

åŠŸèƒ½ç®€å•åªèƒ½æŸ¥çœ‹æŠ“åŒ…çš„æ•°æ®ï¼Œæ•°æ®åªç¼“å­˜æµè§ˆå™¨ï¼Œåˆ·æ–°å°±ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯å ç”¨å†…å­˜å°

### dev-proxy
> [Github: dev-proxy](https://github.com/Kuangcp/GoBase/tree/master/toolbox/dev-proxy)`ä¸ªäººå¼€å‘, åŠŸèƒ½æœ‰: ä»£ç†è½¬å‘, æŠ“åŒ…, é‡æ”¾, ç»Ÿè®¡QPS`

å…¶å® xswitch ä¼šæ›´ç®€å•æ˜“ç”¨ï¼Œä½†æ˜¯ä¸å…¼å®¹firefoxï¼Œå³ä¾¿ä½¿ç”¨debugæ–¹å¼å®‰è£…ä¸Šæ’ä»¶ä¹Ÿä¼šæœ‰æŠ¥é”™å’ŒAPIä¸å…¼å®¹. è€Œä¸”åªæ˜¯æµè§ˆå™¨çº§åˆ«çš„ä»£ç†è½¬å‘,ä¸æ”¯æŒç³»ç»Ÿçº§

************************

## Wireshark
> [Official Site](https://www.wireshark.org/)  

> é—®é¢˜  `Error during loading:[string "/usr/wireshark/init.lua"]:44:`  
- è¿™æ˜¯ç”±äºWiresharkä¸ºäº†é˜²æ­¢ä»¥rootç”¨æˆ·èº«ä»½æ‰§è¡ŒLuaè„šæœ¬ï¼Œé¿å…å¯¹ç³»ç»Ÿé€ æˆæŸåï¼Œè€Œæ˜¾ç¤ºè­¦å‘Šå¼¹çª—ã€‚é€šå¸¸ï¼Œç”¨æˆ·åªéœ€è¦ç¡®è®¤ 
- å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½çœ‹åˆ° ä¿®æ”¹ `/usr/wireshark/init.lua` ç¬¬ä¸€è¡Œï¼ˆéæ³¨é‡Šï¼Œæœ‰æ•ˆä»£ç ï¼‰ æ”¹æˆ `disable_lua = true`

> TCP HTTP æŠ“åŒ…å¯é€‰ä¸­å³å‡» Follow æŸ¥çœ‹ TCPå’ŒHTTPæµå®Œæ•´å­—ç¬¦

************************

# Tips
## ç§»åŠ¨é€šä¿¡æŠ€æœ¯è§„æ ¼
> 1g 2g 2.5g 2.75g 3g 4g 5g

> [å‚è€ƒ: 1G, 2G, 3G, 4G, & 5G Explained ](https://www.lifewire.com/1g-vs-2g-vs-2-5g-vs-3g-vs-4g-578681)
> [å‚è€ƒ: Difference Between 1G, 2G, 3G vs. 4G and 5G](Difference Between 1G, 2G, 3G vs. 4G and 5G)
