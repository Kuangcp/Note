---
title: Linuxå¸¸ç”¨å‘½ä»¤
date: 2018-12-15 11:11:55
tags: 
    - å·¥å…·
categories: 
    - Linux
---

ğŸ’ 

- 1. [ç³»ç»Ÿå¸¸ç”¨åŸºç¡€å‘½ä»¤](#ç³»ç»Ÿå¸¸ç”¨åŸºç¡€å‘½ä»¤)
    - 1.1. [ç³»ç»Ÿå†…ç½®å‘½ä»¤](#ç³»ç»Ÿå†…ç½®å‘½ä»¤)
        - 1.1.1. [Shellå†…å»ºå‘½ä»¤](#shellå†…å»ºå‘½ä»¤)
    - 1.2. [è¾“å…¥è¾“å‡º](#è¾“å…¥è¾“å‡º)
        - 1.2.1. [é‡å®šå‘](#é‡å®šå‘)
    - 1.3. [ç®¡é“](#ç®¡é“)
        - 1.3.1. [xargs](#xargs)
    - 1.4. [time](#time)
    - 1.5. [date](#date)
    - 1.6. [grep](#grep)
    - 1.7. [script](#script)
    - 1.8. [å®šæ—¶ä»»åŠ¡](#å®šæ—¶ä»»åŠ¡)
        - 1.8.1. [crontab](#crontab)
        - 1.8.2. [Systemd](#systemd)

ğŸ’  2024-07-26 19:05:14
****************************************
# ç³»ç»Ÿå¸¸ç”¨åŸºç¡€å‘½ä»¤
> [Linux å‘½ä»¤å¤§å…¨](http://man.linuxde.net/)

> [The Art of Command Line](https://github.com/jlevy/the-art-of-command-line) `é«˜æ•ˆä¼˜ç¾çš„å·¥å…·`

## ç³»ç»Ÿå†…ç½®å‘½ä»¤
> /bin/* ç³»ç»Ÿè‡ªå¸¦å‘½ä»¤

- false ä»¥å¤±è´¥ç é€€å‡ºç¨‹åº
- `stty -a` æŸ¥çœ‹å¿«æ·é”®æ˜ å°„

- ç»ˆç«¯å†…æ‰§è¡Œå¾ªç¯
    - `for i in $(seq 1 10); do echo $i; done` è¯­æ³•å’ŒShellå·®ä¸å¤š, ä½†æ˜¯éœ€è¦åœ¨å¾ªç¯ä½“çš„æ¯ä¸€å¥åŠ ä¸Š`;`

### Shellå†…å»ºå‘½ä»¤
- whence æŸ¥çœ‹å‘½ä»¤çš„çœŸå®é¢è²Œ (zshä¸­çš„å†…å»ºå‘½ä»¤)
- where æŸ¥æ‰¾å‘½ä»¤çš„ä½ç½® (Zshä¸­å†…å»ºå‘½ä»¤)
- which å¯»æ‰¾å‘½ä»¤çš„ä½ç½®
- type å±•ç¤ºå‘½ä»¤çš„æè¿°

************************

## è¾“å…¥è¾“å‡º

### é‡å®šå‘
- è¾“å‡ºé‡å®šå‘  `> a.log 2>&1` è¡¨ç¤ºä¸ºå°†2ä¹Ÿè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º **ä¸ºäº†æ–¹ä¾¿è®°å¿†ä¹Ÿå¯ä»¥å°† &1 ç†è§£ä¸ºCè¯­è¨€ä¸­çš„å–åœ°å€ç¬¦:2é‡å®šå‘åˆ°1çš„åœ°å€**
    - 2 æ˜¯é”™è¯¯è¾“å‡º 1 æ˜¯æ ‡å‡†è¾“å‡º

******************

## ç®¡é“
> [å‚è€ƒ: linux ç®¡é“ ](http://www.cnblogs.com/davidwang456/p/3839874.html)
> [å‚è€ƒ: linux shell ç®¡é“å‘½ä»¤(pipe)ä½¿ç”¨åŠä¸shellé‡å®šå‘åŒºåˆ«](http://www.cnblogs.com/chengmo/archive/2010/10/21/1856577.html)

- æ¥æ”¶è¾“å…¥æµä¸”è¾“å‡ºæµ ç±»ä¼¼äº Java8 ä¸­çš„ peek() å‡½æ•°
    - `cat README.md | grep Java | tee > java.log | grep -v Maven`

### xargs
> å¸¸åœ¨ç®¡é“ä¸­ä½¿ç”¨ èƒ½å°†è¾“å…¥æµè½¬ä¸º å‘½ä»¤ çš„å‚æ•°

- è¾“å‡ºæ‰€æœ‰çš„mdæ–‡ä»¶çš„å†…å®¹ `find . -name "*.md" | xargs cat | less`
- å®šä¹‰æ›¿æ¢ç¬¦ `xargs -I {} echo {}`

***************************

## time
> å¯ä»¥ç”¨äºç»Ÿè®¡å‘½ä»¤è¿è¡Œæ¶ˆè€—çš„æ—¶é—´

- bashå†…ç½®ç®€æ˜“time `time` å’Œ /usr/bin/time `\time`
    - `\time -v ls -al`

## date
> è·å–æ—¥æœŸå’Œæ—¶é—´ `date +%Y_%m_%d_%H:%M:%S` æˆ–è€… `date +%F %T`

- è·å–å‰ä¸€å¤©æ—¥æœŸ `date --date='1 day ago' -R`
- å°†ç§’æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸ `date --date='@1524738626'`
- è®¾ç½®æ—¥æœŸæˆ–æ—¶é—´ `date -s '2020-12-01'` æˆ– `date -s '23:00:20'`
- æ—¥æœŸè®¡ç®— `date -d "+10 days"`

## grep
> `g` (globally) search for a `re` (regular expression ) and `p` (print ) the results.

> egrep [ç›¸å…³ç½‘é¡µ](http://man.linuxde.net/grep) ä¸ grep -E ç­‰ä»·

- [æ­£åˆ™è¡¨è¾¾å¼](/Skills/RegularExpression.md)
    - æ ‡å‡†æ­£åˆ™  `grep -E "[1-9]+"` æ³¨æ„ `[]` æ˜¯é‡Œé¢å•ä¸ªå­—ç¬¦ `()`æ˜¯é‡Œé¢æ‰€æœ‰å­—ç¬¦ä¸€èµ· ç”¨äºåŒ¹é…
    - Perlæ­£åˆ™ `grep -P ''`

- -o åªè¾“å‡ºåŒ¹é…å€¼ `ä¸€è¡Œå†…å¤šä¸ªåŒ¹é…æ—¶å¤šè¡Œè¾“å‡º`  
    - ç»Ÿè®¡æ‰€æœ‰mainå­—ç¬¦æ•°é‡ `grep -o main test.log | wc -l` 
- -i å¿½ç•¥å¤§å°å†™

> egï¼š
- åŒ¹é…ä¸­æ–‡ `-P '[\p{Han}]'`
- æˆªå–å­—ç¬¦ `ping jd.com | grep -oP '(?<=time=).*(?=ms)'` æå–å‡ºmså€¼ã€‚
- ä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚è¡Œ `grep -vwf æ–‡ä»¶1 æ–‡ä»¶2`

************************

## script
>  make typescript of terminal session

å½•åˆ¶ç»ˆç«¯

************************

## å®šæ—¶ä»»åŠ¡
### crontab
`minute hour day-of-month month-of-year day-of-week commands  `

> [ä¸ºä»€ä¹ˆcrontabä¸æ‰§è¡Œ](https://segmentfault.com/a/1190000020850932)  
- cron è„šæœ¬ä¸­çš„æ“ä½œå‘½ä»¤ éƒ½ä½¿ç”¨ç»å¯¹è·¯å¾„, å¿…é¡»æ³¨æ„ç¯å¢ƒå˜é‡é—®é¢˜
- ä»¥åŠæ¯è¡Œé…ç½®éƒ½éœ€è¦ä»¥æ¢è¡Œç¬¦ç»“å°¾

```sh
    SHELL=/bin/sh
    PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

    # Example of job definition:
    # .---------------- minute (0 - 59)
    # |  .------------- hour (0 - 23)
    # |  |  .---------- day of month (1 - 31)
    # |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...
    # |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat
    # |  |  |  |  |
    # *  *  *  *  * user-name command to be executed
```

- ç¼–è¾‘é…ç½®æ–‡ä»¶ `crontab -e`
- æ—¶é—´é…ç½®æ ¼å¼
    - * è¡¨ç¤ºæ‰€æœ‰å€¼ï¼› 
    - ? è¡¨ç¤ºæœªè¯´æ˜çš„å€¼ï¼Œå³ä¸å…³å¿ƒå®ƒä¸ºä½•å€¼ï¼› 
    - - è¡¨ç¤ºä¸€ä¸ªæŒ‡å®šçš„èŒƒå›´ï¼› 
    - , è¡¨ç¤ºé™„åŠ ä¸€ä¸ªå¯èƒ½å€¼ï¼› 
    - / ç¬¦å·å‰è¡¨ç¤ºå¼€å§‹æ—¶é—´ï¼Œç¬¦å·åè¡¨ç¤ºæ¯æ¬¡é€’å¢çš„å€¼ï¼› 
- ä¾‹å¦‚ï¼š
    - æ¯åˆ†é’Ÿæ‰§è¡ŒäºŒè¿›åˆ¶å‘½ä»¤
    - æ¯åˆ†é’Ÿæ‰§è¡Œè„šæœ¬ 

> æ³¨æ„  
>> å¦‚æœcommandæ˜¯shellè„šæœ¬ï¼Œæ³¨æ„æ‰§è¡Œç¯å¢ƒå’Œæƒé™é—®é¢˜

### Systemd
> [å‚è€ƒ: Systemd å®šæ—¶å™¨æ•™ç¨‹](http://www.ruanyifeng.com/blog/2018/03/systemd-timer.html) `é…ç½®å’Œä½¿ç”¨ä¸Šæ¯”Crontabæ›´ç¹æ‚, ä½†æ˜¯æœ‰æ›´å¤šçš„å¯æ§åˆ¶é¡¹`
