---
title: LinuxåŸºç¡€
date: 2018-12-15 11:11:23
tags: 
    - åŸºç¡€
categories: 
    - Linux
---

ğŸ’ 

- 1. [Linuxç³»ç»Ÿ](#linuxç³»ç»Ÿ)
    - 1.1. [Boot](#boot)
        - 1.1.1. [grub](#grub)
    - 1.2. [ç”¨æˆ·ç®¡ç†](#ç”¨æˆ·ç®¡ç†)
        - 1.2.1. [ç”¨æˆ·](#ç”¨æˆ·)
        - 1.2.2. [ç”¨æˆ·ç»„](#ç”¨æˆ·ç»„)
        - 1.2.3. [sudo](#sudo)
        - 1.2.4. [ç»ˆç«¯å’Œç™»å½•](#ç»ˆç«¯å’Œç™»å½•)
    - 1.3. [ç¯å¢ƒå˜é‡](#ç¯å¢ƒå˜é‡)
    - 1.4. [è¿›ç¨‹](#è¿›ç¨‹)
        - 1.4.1. [ä¿¡å· Signal](#ä¿¡å·-signal)
        - 1.4.2. [ä¿¡å·é‡ Semaphore](#ä¿¡å·é‡-semaphore)
        - 1.4.3. [å­¤å„¿è¿›ç¨‹å’Œåƒµæ­»è¿›ç¨‹](#å­¤å„¿è¿›ç¨‹å’Œåƒµæ­»è¿›ç¨‹)
            - 1.4.3.1. [å­¤å„¿è¿›ç¨‹](#å­¤å„¿è¿›ç¨‹)
            - 1.4.3.2. [åƒµæ­»è¿›ç¨‹ defunct](#åƒµæ­»è¿›ç¨‹-defunct)
        - 1.4.4. [å®ˆæŠ¤è¿›ç¨‹](#å®ˆæŠ¤è¿›ç¨‹)
        - 1.4.5. [æ–‡ä»¶æè¿°ç¬¦ FD](#æ–‡ä»¶æè¿°ç¬¦-fd)
        - 1.4.6. [çº¿ç¨‹](#çº¿ç¨‹)
    - 1.5. [æ—¶é—´](#æ—¶é—´)
    - 1.6. [æœåŠ¡ç®¡ç†](#æœåŠ¡ç®¡ç†)
        - 1.6.1. [initè¿›ç¨‹](#initè¿›ç¨‹)
        - 1.6.2. [systemd æ–¹å¼æœåŠ¡ç®¡ç†](#systemd-æ–¹å¼æœåŠ¡ç®¡ç†)
        - 1.6.3. [service æ–¹å¼ç®¡ç†](#service-æ–¹å¼ç®¡ç†)
            - 1.6.3.1. [è‡ªå®šä¹‰ service](#è‡ªå®šä¹‰-service)
        - 1.6.4. [update-rc.d æ–¹å¼ç®¡ç†](#update-rcd-æ–¹å¼ç®¡ç†)
- 2. [ç³»ç»Ÿèµ„æºç®¡ç†](#ç³»ç»Ÿèµ„æºç®¡ç†)
    - 2.1. [ulimit](#ulimit)
    - 2.2. [CPU](#cpu)
    - 2.3. [å†…å­˜](#å†…å­˜)
        - 2.3.1. [overcommit](#overcommit)
        - 2.3.2. [oom](#oom)
        - 2.3.3. [è™šæ‹Ÿå†…å­˜](#è™šæ‹Ÿå†…å­˜)
        - 2.3.4. [äº¤æ¢å†…å­˜](#äº¤æ¢å†…å­˜)
            - 2.3.4.1. [æ¸…ç©ºäº¤æ¢å†…å­˜](#æ¸…ç©ºäº¤æ¢å†…å­˜)
        - 2.3.5. [æ¸…ç©ºè¯»å†™ç¼“å­˜](#æ¸…ç©ºè¯»å†™ç¼“å­˜)
- 3. [ç»ˆç«¯å¿«æ·é”®](#ç»ˆç«¯å¿«æ·é”®)
    - 3.1. [Delete](#delete)
    - 3.2. [Convert](#convert)
    - 3.3. [Jump](#jump)
    - 3.4. [Search](#search)
    - 3.5. [Control](#control)
- 4. [å¸¸è§å¯¹æ¯”](#å¸¸è§å¯¹æ¯”)
    - 4.1. [æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”](#æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”)
    - 4.2. [æ¡Œé¢ç¯å¢ƒå¯¹æ¯”](#æ¡Œé¢ç¯å¢ƒå¯¹æ¯”)
    - 4.3. [çª—å£ç®¡ç†å™¨å¯¹æ¯”](#çª—å£ç®¡ç†å™¨å¯¹æ¯”)
    - 4.4. [æ–‡ä»¶ç®¡ç†å™¨å¯¹æ¯”](#æ–‡ä»¶ç®¡ç†å™¨å¯¹æ¯”)
    - 4.5. [åŒ…ç®¡ç†](#åŒ…ç®¡ç†)
        - 4.5.1. [AppImage](#appimage)
        - 4.5.2. [snap](#snap)
        - 4.5.3. [flatpak](#flatpak)
- 5. [Tips](#tips)
    - 5.1. [ä¸€è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤](#ä¸€è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤)
    - 5.2. [è®©å‘½ä»¤åœ¨åå°è¿è¡Œ](#è®©å‘½ä»¤åœ¨åå°è¿è¡Œ)
    - 5.3. [ä¿®æ”¹ä¸»æœºå](#ä¿®æ”¹ä¸»æœºå)
    - 5.4. [æ–‡ä»¶ç±»å‹é»˜è®¤æ‰“å¼€æ–¹å¼ MIME](#æ–‡ä»¶ç±»å‹é»˜è®¤æ‰“å¼€æ–¹å¼-mime)
    - 5.5. [ç†µæ± ](#ç†µæ± )

ğŸ’  2024-10-07 23:15:25
****************************************

# Linuxç³»ç»Ÿ

- [Arch wiki](https://wiki.archlinux.org/)
- [Deepin wiki](https://wiki.deepin.org/)
- [RUNOOB.COM](http://www.runoob.com) `å„ç§æŠ€æœ¯å­¦ä¹  æ–‡æ¡£èµ„æº`
- [linux-tutorial](https://github.com/dunwu/linux-tutorial)
- [How-To-Secure-A-Linux-Server](https://github.com/imthenachoman/How-To-Secure-A-Linux-Server)

- [Linuxä¸­å›½å¼€æºç¤¾åŒº](https://linux.cn/)
- [LinuxTOY æ˜¯ä¸€ä¸ªè‡´åŠ›äºæä¾› Linux ç›¸å…³èµ„è®¯çš„ä¸“é¢˜ç«™ç‚¹ã€‚](https://linuxtoy.org/)
  - [å†…å®¹Githubæº](https://github.com/LinuxTOY/linuxtoy.org)
- [é³¥å“¥çš„ Linux ç§æˆ¿èœ](http://linux.vbird.org/linux_basic/)
- [é˜¿é‡Œäº‘ç³»ç»Ÿç»„æŠ€æœ¯åšå®¢](https://kernel.taobao.org/)
- [Awesome Linux Software](https://github.com/luong-komorebi/Awesome-Linux-Software)

> æ–°æ‰‹çš„è¯ ç‰¹åˆ«æ³¨æ„ä¸è¦éšæ„ rootæƒé™ ç›´æ¥æ›´æ”¹é…ç½®æ–‡ä»¶ï¼Œå®¹æ˜“å¯¼è‡´ç³»ç»Ÿcrashï¼ˆé™¤éä½ æ˜ç¡®çš„çŸ¥é“è¿™ä¸ªæ›´æ”¹æ“ä½œçš„ä½œç”¨ï¼Œ å³ä½¿å¦‚æ­¤ä¹Ÿéœ€è¦å…ˆå¤‡ä»½åŸæ–‡ä»¶ï¼‰

> [åœ¨çº¿Linuxç»ˆç«¯](https://itsfoss.com/online-linux-terminals/) `æœ‰æµè§ˆå™¨è™šæ‹ŸåŒ–ï¼Œä»¥åŠè¿œç¨‹ä¸»æœºå¤šç§ç±»å‹çš„å®ç°`

> [é—ªå®¢ï¼šå“è¯» Linux 0.11 æ ¸å¿ƒä»£ç ](https://github.com/dibingfa/flash-linux0.11-talk)

![](/Linux/Base/img/001-linux-base-cmd.km.svg)

## Boot
å®‰è£…å’Œå¯åŠ¨Linux

> [Ventoy](https://github.com/ventoy/Ventoy)`æ— éœ€çƒ§å½•ï¼Œå¤åˆ¶ISOè¿›Uç›˜å³å¯ä½¿ç”¨`

### grub 
> [GNU GRUB](https://www.gnu.org/software/grub/) *GRand Unified Bootloader*


- [ ] Windows è‡ªåŠ¨æ›´æ–°åçš„æ•…éšœï¼Œå¼€æœºéœ€è¦æ‰‹åŠ¨æŒ‡å®šbootåˆ†åŒºåå¯åŠ¨
```sh 
  set prefix=(hd0,msdos7)/grub
  insmod normal 
  normal 
```

************************

## ç”¨æˆ·ç®¡ç†

### ç”¨æˆ·

- æ·»åŠ ç”¨æˆ· test1 `sudo adduser test1`
    - æ³¨æ„ `useradd` åªæ–°å»ºç”¨æˆ·ä¸ä¼šåˆ›å»ºå¯¹åº”çš„ä¸»ç›®å½•
- åˆ é™¤ç”¨æˆ·ä»¥åŠå¯¹åº”çš„homeç›®å½•ï¼š`sudo deluser username --remove-home`
- _åˆ‡æ¢ç”¨æˆ·_ `su`
- `su -l username` å½“å‰ç”¨æˆ·çš„ç¯å¢ƒä¸‹ç™»å½•ç”¨æˆ·ï¼ˆå½“æˆä¸€ä¸ªç¨‹åºä¸€æ ·å¯ä»¥é€€å‡ºç™»å½•ï¼‰
- `sudo su -` ç›¸æ¯”äº sudo su ä¼šåŠ è½½rootç”¨æˆ·ç¯å¢ƒå˜é‡ï¼Œåˆ‡æ¢åˆ°HOMEå·¥ä½œç›®å½•[su &amp; su -](https://www.geeksforgeeks.org/difference-between-su-and-su-command-in-linux/)
- _ä¿®æ”¹å¯†ç _ `passwd`
  - `passwd user`
  - `echo "root:caishi" | chpasswd` å¦‚æœæ˜¯æ™®é€šç”¨æˆ·å°±æ˜¯ sudo chpasswd
- _ä¿®æ”¹ç›¸å…³ä¿¡æ¯_ `usermod`

| verb | long verb                | comment                                                      |
| :--: | :----------------------- | :----------------------------------------------------------- |
|  -d  | --home HOME_DIR          | ç”¨æˆ·çš„æ–°ä¸»ç›®å½•                                               |
|  -e  | --expiredate EXPIRE_DATE | è®¾å®šå¸æˆ·è¿‡æœŸçš„æ—¥æœŸä¸º EXPIRE_DATE                             |
|  -f  | --inactive INACTIVE      | è¿‡æœŸ INACTIVE å¤©æ•°åï¼Œè®¾å®šå¯†ç ä¸ºå¤±æ•ˆçŠ¶æ€                     |
|  -g  | --gid GROUP              | å¼ºåˆ¶ä½¿ç”¨ GROUP ä¸ºæ–°ä¸»ç»„                                      |
|  -G  | --groups GROUPS          | æ–°çš„é™„åŠ ç»„åˆ—è¡¨ GROUPS                                        |
|  -a  | --append GROUP           | å°†ç”¨æˆ·è¿½åŠ è‡³ä¸Šè¾¹ -G ä¸­æåˆ°çš„é™„åŠ ç»„ä¸­ï¼Œå¹¶ä¸ä»å…¶å®ƒç»„ä¸­åˆ é™¤æ­¤ç”¨ |
|  -l  | --login LOGIN            | æ–°çš„ç™»å½•åç§°                                                 |
|  -L  | --lock                   | é”å®šç”¨æˆ·è´¦å·                                                 |
|  -m  | --move-home              | å°†å®¶ç›®å½•å†…å®¹ç§»è‡³æ–°ä½ç½® (ä»…äº -d ä¸€èµ·ä½¿ç”¨)                    |
|  -p  | --password PASSWORD      | å°†åŠ å¯†è¿‡çš„å¯†ç  (PASSWORD) è®¾ä¸ºæ–°å¯†ç                          |
|  -R  | --root CHROOT_DIR        | chroot åˆ°çš„ç›®å½•                                              |
|  -s  | --shell SHELL            | è¯¥ç”¨æˆ·è´¦å·çš„æ–°ç™»å½• shell                                     |
|  -U  | --unlock                 | è§£é”ç”¨æˆ·è´¦å·                                                 |

> [æ‰€æœ‰å‚æ•°è¯´æ˜](https://gitee.com/kcp1104/codes/gca14wtqvm67l9j5r0deb56#usermod.md)

************************

- `less /etc/passwd` æŸ¥çœ‹å…¨éƒ¨ç”¨æˆ·åŠå…¶ç”¨æˆ·ç»„
- `passwd é€‰é¡¹ ç”¨æˆ·å` æ›´æ”¹å£ä»¤(å¯†ç )
  - `-l é”å®šå£ä»¤ï¼Œç¦ç”¨è´¦å·`  `-u å£ä»¤è§£é”` `-d è´¦å·æ— å£ä»¤` `-f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤`
  - å½“å‰ç”¨æˆ· `passwd` å°±æ˜¯ä¿®æ”¹å½“å‰ç”¨æˆ·å£ä»¤ è¶…çº§ç”¨æˆ·å°±å¯ä»¥å‘½ä»¤åæ¥ç”¨æˆ·åï¼Œä¿®æ”¹ä»»æ„ç”¨æˆ·

************************

- pwcov æ³¨ï¼šåŒæ­¥ç”¨æˆ·ä»/etc/passwd åˆ°/etc/shadow
- pwck æ³¨ï¼špwckæ˜¯æ ¡éªŒç”¨æˆ·é…ç½®æ–‡ä»¶/etc/passwd å’Œ/etc/shadow æ–‡ä»¶å†…å®¹æ˜¯å¦åˆæ³•æˆ–å®Œæ•´;
- pwunconv æ³¨ï¼šæ˜¯pwcov çš„ç«‹é€†å‘æ“ä½œï¼Œæ˜¯ä»/etc/shadowå’Œ /etc/passwd åˆ›å»º/etc/passwd ï¼Œç„¶åä¼šåˆ é™¤ /etc/shadow æ–‡ä»¶;
- finger æ³¨ï¼šæŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯å·¥å…·
- id æ³¨ï¼šæŸ¥çœ‹ç”¨æˆ·çš„UIDã€GIDåŠæ‰€å½’å±çš„ç”¨æˆ·ç»„
- chfn æ³¨ï¼šæ›´æ”¹ç”¨æˆ·ä¿¡æ¯å·¥å…·
- `visudo` æ³¨ï¼švisodo æ˜¯ç¼–è¾‘ /etc/sudoers çš„å‘½ä»¤;ä¹Ÿå¯ä»¥ä¸ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œç›´æ¥ç”¨vi æ¥ç¼–è¾‘ /etc/sudoers çš„æ•ˆæœæ˜¯ä¸€æ ·çš„;
- `who /var/log/wtmp` æŸ¥çœ‹ç™»å½•è®°å½•

### ç”¨æˆ·ç»„

> [ç›¸å…³ åšå®¢](http://www.runoob.com/linux/linux-user-manage.html)

- _æ·»åŠ ç”¨æˆ·ç»„_ `groupadd`
  - ç¼ºçœå‚æ•° å°±æ˜¯æ–°å»ºç”¨æˆ·ç»„
  - `-g GID` æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„ç»„æ ‡è¯†å·GID
  - `-o` ä¸€èˆ¬å’Œgå…±ç”¨ è¡¨ç¤ºæ–°ç”¨æˆ·ç»„çš„GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚
- _æ˜¾ç¤ºç”¨æˆ·æ‰€åœ¨ç»„_ `groups [user]` ç¼ºçœæ˜¯å½“å‰ç”¨æˆ·, æˆ–è¾“å‡ºæŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·ç»„
- _ä¿®æ”¹ç”¨æˆ·ç»„_ `sudo usermod -G ç”¨æˆ·ç»„ ç”¨æˆ·`
- _åˆ é™¤ç”¨æˆ·ç»„_ `groupdel`

- `groupmod é€‰é¡¹ ç”¨æˆ·ç»„`
  - -g GID ä¸ºç”¨æˆ·ç»„æŒ‡å®šæ–°çš„ç»„æ ‡è¯†å·ã€‚
  - -o ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œç”¨æˆ·ç»„çš„æ–°GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚
  - -n æ–°ç”¨æˆ·ç»„ å°†ç”¨æˆ·ç»„çš„åå­—æ”¹ä¸ºæ–°åå­—
  - -a `gpasswd -a user group`
- grpck æ£€æŸ¥ `/etc/group`æ–‡ä»¶æ˜¯å¦æ­£ç¡®
- grpconv æ³¨ï¼šé€šè¿‡/etc/groupå’Œ/etc/gshadow çš„æ–‡ä»¶å†…å®¹æ¥åŒæ­¥æˆ–åˆ›å»º/etc/gshadow ï¼Œå¦‚æœ/etc/gshadow ä¸å­˜åœ¨åˆ™åˆ›å»º;
- æ³¨ï¼šé€šè¿‡/etc/group å’Œ/etc/gshadow æ–‡ä»¶å†…å®¹æ¥åŒæ­¥æˆ–åˆ›å»º/etc/group ï¼Œç„¶ååˆ é™¤gshadowæ–‡ä»¶

### sudo

- æ·»åŠ ç”¨æˆ· test1 åˆ°sudoç»„  æ³¨æ„ï¼š *å°†ç”¨æˆ·åŠ å…¥sudoç»„ï¼Œdebianç³»æœ‰æ•ˆ alpineå’Œarchæ— æ•ˆ åªèƒ½æ”¹æ–‡ä»¶*
  1. å°†ç”¨æˆ· testUser åŠ å…¥ sudo ç»„ `sudo gpasswd -a test1 sudo`  *æˆ–è€…* `usermod -G sudo test1`
  2. *æˆ–è€…*ï¼šä½¿ç”¨ä¿®æ”¹æ–‡ä»¶çš„æ–¹å¼ï¼šï¼ˆä¸æ¨èï¼‰
     - `chmod 777 /etc/sudoers`  ç„¶åç›´æ¥ `sudo visudo`å°±æ˜¯è°ƒç”¨viæ¥æ‰“å¼€æ–‡ä»¶çš„ç®€å†™
     - æ·»åŠ ä¸€è¡Œ Debian: `test1  ALL=(ALL:ALL)ALL` æ³¨æ„ Centos:`test1   ALL=(ALL)       ALL`
       - è®¾ç½®sudoæ— éœ€å¯†ç  `test1 ALL=(ALL) NOPASSWD: ALL`
     - `chmod 440 /etc/sudoers`

> ç»å¯¹è·¯å¾„æ‰§è¡ŒshellæŠ¥é”™æ— æƒé™
> ç¯å¢ƒï¼š

- a å’Œ b ç”¨æˆ·éƒ½å±äºç”¨æˆ·ç»„ b
- å½“å‰å·¥ä½œç›®å½•æ˜¯ /home/b/app/
  ç°è±¡ï¼š

1. sudo -u a sh run.sh æ­£å¸¸æ‰§è¡Œ
2. sudo -u a sh /home/b/app/run.sh æŠ¥é”™æ— æƒé™

åŸå› ï¼š

1. /home/b/ ç›®å½•å¯¹äºç”¨æˆ·ç»„bæ²¡æœ‰ä»»ä½•æƒé™ï¼Œchmod 740 b åŠ ä¸Šç»„çš„è¯»æƒé™åä»æŠ¥é”™ï¼Œæ”¹æˆ750åæ­£å¸¸äº†
2. [Commands don&#39;t have permission when using absolute path](https://askubuntu.com/questions/367176/commands-dont-have-permission-when-using-absolute-path)

æ–¹æ¡ˆï¼šé€çº§æ’æŸ¥shellæ‰€æœ‰çˆ¶ç›®å½•å¯¹äº `sudoæŒ‡å®šç”¨æˆ·`æ˜¯å¦æœ‰æ‰§è¡Œæƒé™

> sudo: æ²¡æœ‰ç»ˆç«¯å­˜åœ¨,ä¸”æœªæŒ‡å®š askpass ç¨‹åº

- è®¾ç½®ç”¨æˆ·ä¸ºNOPASSWD

### ç»ˆç«¯å’Œç™»å½•

> [å‚è€ƒ: linuxç»ˆç«¯ç›¸å…³æ¦‚å¿µè§£é‡ŠåŠæè¿°](https://www.cnblogs.com/xiangtingshen/p/10889195.html)
> [å‚è€ƒ: ç»ˆç«¯åŸºæœ¬æ¦‚å¿µ&amp;ç»ˆç«¯ç™»å½•è¿‡ç¨‹è¯¦è§£](https://blog.csdn.net/summy_j/article/details/73870353)

1. tty ç»ˆç«¯è®¾å¤‡çš„ç»Ÿç§°
   - é€šå¸¸ä½¿ç”¨ttyæ¥ç®€ç§°å„ç§ç±»å‹çš„ç»ˆç«¯è®¾å¤‡
2. pty è™šæ‹Ÿç»ˆç«¯
   - è¿œç¨‹ç™»å½•ï¼Œå›¾å½¢åŒ–ç»ˆç«¯æ¨¡æ‹Ÿå™¨ç­‰æ“ä½œä½¿ç”¨
   - pts(pseudo-terminal slave)æ˜¯ptyçš„å®ç°æ–¹æ³•ï¼Œä¸ptmx(pseudo-terminal master)é…åˆä½¿ç”¨å®ç°ptyã€‚

> é€šå¸¸Linuxå¹³å°çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨æ–°å»ºtabæ—¶éƒ½æ˜¯æ–°å»º ptyï¼Œ ä½†æ˜¯Macå¹³å°ä¸Šåˆ™æ˜¯æ–°å»ºtty

************************

## ç¯å¢ƒå˜é‡

> [zsh ç¯å¢ƒå˜é‡](http://zsh.sourceforge.net/Doc/Release/Files.html#Startup_002fShutdown-Files)
>
>> `.zshenv â†’ [.zprofile if login] â†’ [.zshrc if interactive] â†’ [.zlogin if login] â†’ [.zlogout sometimes].`
>>

> Bash ç¯å¢ƒå˜é‡åŠ è½½é¡ºåº

1. /etc/profile
2. $HOME/.bash_profile
3. $HOME/.bashrc
4. $HOME/.bash_login
5. $HOME/.profile

> [åƒä¸‡åˆ«æ··æ·† Bash/Zsh çš„å››ç§è¿è¡Œæ¨¡å¼](https://zhuanlan.zhihu.com/p/47819029)
> [
>     sshè¿æ¥è¿œç¨‹ä¸»æœºæ‰§è¡Œè„šæœ¬çš„ç¯å¢ƒå˜é‡é—®é¢˜](https://blog.csdn.net/whitehack/article/details/51705889)

alpine é‡Œçš„shå’Œash é»˜è®¤æ˜¯ä¸ç™»å½•shell éœ€è¦ä½¿ç”¨ sh -l æˆ–è€… ash -l æ‰ä¼šåŠ è½½å¯¹åº”çš„æ–‡ä»¶

************************

## è¿›ç¨‹

> è¿›ç¨‹æ˜¯ç”±å¤šä¸ªçº¿ç¨‹(è‡³å°‘æœ‰ä¸€ä¸ª)ä»¥åŠæŒæœ‰èµ„æºçš„ç»„åˆä½“ï¼Œ çº¿ç¨‹å¯ä»¥ç†è§£ä¸ºè¿›ç¨‹çš„æ‰§è¡Œå•å…ƒ

> å‚è€ƒ æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ ä¹¦ç±

1. pid_t æ¥è¡¨ç¤ºä¸€ä¸ªè¿›ç¨‹çš„ pidï¼Œå› æ­¤èƒ½è¡¨ç¤ºçš„è¿›ç¨‹çš„èŒƒå›´ä¸€å®šä¸ä¼šè¶…è¿‡ pid_t æ•°æ®ç±»å‹çš„èŒƒå›´
   - æŸ¥çœ‹ pid æœ€å¤§æ•°é‡ `cat /proc/sys/kernel/pid_max`

> [doc: fork](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fork.html)
> [wiki: fork bomb](https://en.wikipedia.org/wiki/Fork_bomb)

> [å‚è€ƒ: linuxå¸¸è§è¿›ç¨‹ä¸å†…æ ¸çº¿ç¨‹](https://www.cnblogs.com/createyuan/p/3979142.html) `0 1 2 ç­‰å†…æ ¸è¿›ç¨‹`

### ä¿¡å· Signal

`è¿›ç¨‹é€šä¿¡çš„ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼`

> /bin/kill -L å¯æŸ¥çœ‹æ‰€æœ‰ä¿¡å·é‡

```
 1 HUP      2 INT      3 QUIT     4 ILL      5 TRAP     6 ABRT     7 BUS
 8 FPE      9 KILL    10 USR1    11 SEGV    12 USR2    13 PIPE    14 ALRM
15 TERM    16 STKFLT  17 CHLD    18 CONT    19 STOP    20 TSTP    21 TTIN
22 TTOU    23 URG     24 XCPU    25 XFSZ    26 VTALRM  27 PROF    28 WINCH
29 POLL    30 PWR     31 SYS
```

ç¼–å·ä¸º `1 ~ 31`çš„ä¿¡å·ä¸ºä¼ ç»ŸUNIXæ”¯æŒçš„ä¿¡å·ï¼Œæ˜¯ä¸å¯é ä¿¡å·(éå®æ—¶çš„)ï¼Œç¼–å·ä¸º `32 ~ 63`çš„ä¿¡å·æ˜¯åæ¥æ‰©å……çš„ï¼Œç§°åšå¯é ä¿¡å·(å®æ—¶ä¿¡å·)ã€‚ä¸å¯é ä¿¡å·å’Œå¯é ä¿¡å·çš„åŒºåˆ«åœ¨äºå‰è€…ä¸æ”¯æŒæ’é˜Ÿï¼Œåªæ˜¯è´Ÿè´£å‘é€, ä¸è´Ÿè´£å­˜å‚¨å’Œæ¥æ”¶, å¯èƒ½ä¼šé€ æˆä¿¡å·ä¸¢å¤±ï¼Œè€Œåè€…ä¸ä¼šã€‚

> [å‚è€ƒ Linuxä¿¡å·åˆ—è¡¨](https://blog.csdn.net/baobao8505/article/details/1115820)

> å¸¸ç”¨ä¿¡å·

- 1 HUP
  - ç»ˆç«¯å…³é—­,Session é€€å‡ºæ—¶ä¼šå‘å‡ºçš„ä¿¡å·
- 2 INT
  - interrupt ä¸­æ–­ä¿¡å·
- 9 KILL
  - kill è¿›ç¨‹ä¸å¯å¿½ç•¥è¯¥ä¿¡å·
- 15 TERM
  - terminate ç»ˆæ­¢ä¿¡å·

### ä¿¡å·é‡ Semaphore

Linuxå†…æ ¸çš„ä¿¡å·é‡ç”¨æ¥æ“ä½œç³»ç»Ÿè¿›ç¨‹é—´åŒæ­¥è®¿é—®å…±äº«èµ„æº

ä¿¡å·é‡åœ¨åˆ›å»ºæ—¶éœ€è¦è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œè¡¨ç¤ºåŒæ—¶å¯ä»¥æœ‰å‡ ä¸ªä»»åŠ¡å¯ä»¥è®¿é—®è¯¥ä¿¡å·é‡ä¿æŠ¤çš„å…±äº«èµ„æºï¼Œå½“åˆå§‹å€¼ä¸º1æ—¶å°±å˜ä½œäº’æ–¥é”ï¼ˆMutexï¼‰ï¼Œå³åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡å¯ä»¥è®¿é—®ä¿¡å·é‡ä¿æŠ¤çš„å…±äº«èµ„æºã€‚

PVæ“ä½œç”±Pæ“ä½œåŸè¯­å’ŒVæ“ä½œåŸè¯­ç»„æˆï¼ˆåŸè¯­æ˜¯æŒ‡ä¸å¯ä¸­æ–­çš„è¿‡ç¨‹ï¼‰
- Pï¼ˆSï¼‰ï¼š
    1. å°†ä¿¡å·é‡Sçš„å€¼å‡1ï¼Œå³S=S-1ï¼›
    1. å¦‚æœS>=0ï¼Œåˆ™è¯¥è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›å¦åˆ™è¯¥è¿›ç¨‹ç½®ä¸ºç­‰å¾…çŠ¶æ€ï¼Œæ’å…¥ç­‰å¾…é˜Ÿåˆ—
- Vï¼ˆSï¼‰ï¼š
    1. å°†ä¿¡å·é‡Sçš„å€¼åŠ 1ï¼Œå³S=S+1ï¼›
    1. å¦‚æœS>0ï¼Œåˆ™è¯¥è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼›å¦åˆ™é‡Šæ”¾é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªç­‰å¾…ä¿¡å·é‡çš„è¿›ç¨‹

PVæ“ä½œçš„æ„ä¹‰ï¼šæˆ‘ä»¬ç”¨ä¿¡å·é‡åŠPVæ“ä½œæ¥å®ç°è¿›ç¨‹çš„åŒæ­¥å’Œäº’æ–¥ã€‚PVæ“ä½œå±äºè¿›ç¨‹çš„ä½çº§é€šä¿¡

ä½¿ç”¨PVæ“ä½œå®ç°è¿›ç¨‹äº’æ–¥æ—¶åº”è¯¥æ³¨æ„çš„æ˜¯ï¼š

    æ¯ä¸ªç¨‹åºä¸­ç”¨æˆ·å®ç°äº’æ–¥çš„Pã€Væ“ä½œå¿…é¡»æˆå¯¹å‡ºç°ï¼Œå…ˆåšPæ“ä½œï¼Œè¿›ä¸´ç•ŒåŒºï¼ŒååšVæ“ä½œï¼Œå‡ºä¸´ç•ŒåŒºã€‚è‹¥æœ‰å¤šä¸ªåˆ†æ”¯ï¼Œè¦è®¤çœŸæ£€æŸ¥å…¶æˆå¯¹æ€§
    Pã€Væ“ä½œåº”åˆ†åˆ«ç´§é ä¸´ç•ŒåŒºçš„å¤´å°¾éƒ¨ï¼Œä¸´ç•ŒåŒºçš„ä»£ç åº”å°½å¯èƒ½çŸ­ï¼Œä¸èƒ½æœ‰æ­»å¾ªç¯
    äº’æ–¥ä¿¡å·é‡çš„åˆå€¼ä¸€èˆ¬ä¸º1

### å­¤å„¿è¿›ç¨‹å’Œåƒµæ­»è¿›ç¨‹

> [å‚è€ƒ: å­¤å„¿è¿›ç¨‹ä¸åƒµæ­»è¿›ç¨‹[æ€»ç»“]](http://www.cnblogs.com/Anker/p/3271773.html)

#### å­¤å„¿è¿›ç¨‹

> ä¸€ä¸ªçˆ¶è¿›ç¨‹é€€å‡ºï¼Œè€Œå®ƒçš„å­è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆé‚£äº›å­è¿›ç¨‹å°†æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹å°†è¢«initè¿›ç¨‹(è¿›ç¨‹å·ä¸º1)æ‰€æ”¶å…»ï¼Œå¹¶ç”±initè¿›ç¨‹å¯¹å®ƒä»¬å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚

> æ³¨æ„, ä¹Ÿæœ‰æ„å¤–, å¹¶ä¸æ€»æ˜¯è¢« init è¿›ç¨‹æ”¶å…» [Ubuntu15.04 åˆ é™¤/sbin/upstartä¸å­¤å„¿è¿›ç¨‹æ”¶å…»çš„é—®é¢˜](https://blog.csdn.net/chilumanxi/article/details/47066331)

#### åƒµæ­»è¿›ç¨‹ defunct 

> ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨waitæˆ–waitpidè·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­, è¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµæ­»è¿›ç¨‹ã€‚
> å› ä¸ºç›´åˆ°çˆ¶è¿›ç¨‹ç»“æŸå, è¯¥åƒµæ­»å­è¿›ç¨‹ä¼šæˆä¸ºå­¤å„¿è¿›ç¨‹ä¸”æ˜¯åƒµæ­»è¿›ç¨‹, ä¼šè¢« init æ”¶å…», ä»è€Œè¢«å›æ”¶, ä½†æ˜¯å¦‚æœçˆ¶è¿›ç¨‹ä¸€ç›´æ²¡æœ‰ç»“æŸ, åƒµæ­»å­è¿›ç¨‹ä¼šä¸€ç›´å­˜åœ¨

- å±å®³:
  - å ç”¨ç³»ç»Ÿå†…å­˜ pidç­‰èµ„æº, æ— æ³•è¢«å›æ”¶

> å¸¸è§„è§£å†³æ–¹æ¡ˆ [Github: ä»£ç ç¤ºä¾‹](https://github.com/Kuangcp/LearnC/tree/master/exception/process)

1. `å¤„ç†ä¿¡å·`: å­è¿›ç¨‹é€€å‡ºæ—¶å‘çˆ¶è¿›ç¨‹å‘é€SIGCHILDä¿¡å·ï¼Œçˆ¶è¿›ç¨‹å¤„ç†SIGCHILDä¿¡å·ã€‚åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è°ƒç”¨waitè¿›è¡Œå¤„ç†åƒµæ­»è¿›ç¨‹ã€‚
2. `forkä¸¤æ¬¡`: åŸç†æ˜¯å°†å­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹ï¼Œä»è€Œå…¶çš„çˆ¶è¿›ç¨‹å˜ä¸ºinitè¿›ç¨‹ï¼Œé€šè¿‡initè¿›ç¨‹å¯ä»¥å¤„ç†åƒµæ­»è¿›ç¨‹ã€‚

> æš´åŠ›æ–¹æ¡ˆ: ç›´æ¥ kill æ‰çˆ¶è¿›ç¨‹, çˆ¶è¿›ç¨‹å’Œåƒµæ­»çŠ¶æ€çš„å­è¿›ç¨‹å°±ä¸€èµ·è¢«å›æ”¶äº†

### å®ˆæŠ¤è¿›ç¨‹

> [å‚è€ƒ: å®ˆæŠ¤è¿›ç¨‹](https://blog.csdn.net/lianghe_work/article/details/47659889)

### æ–‡ä»¶æè¿°ç¬¦ FD
> [wikipedia: File descriptor](https://en.wikipedia.org/wiki/File_descriptor)  
> [å‚è€ƒ: Linuxä¸‹ æ–‡ä»¶æè¿°ç¬¦ï¼ˆfdï¼‰ä¸ æ–‡ä»¶æŒ‡é’ˆï¼ˆFILE*ï¼‰](https://blog.csdn.net/mm_hh/article/details/71374474)  

æ¯ä¸€ä¸ªè¿›ç¨‹åœ¨PCBï¼ˆProcess Control Blockï¼‰å³è¿›ç¨‹æ§åˆ¶å—ä¸­éƒ½ä¿å­˜ç€ä¸€åˆ†æ–‡ä»¶æè¿°ç¬¦è¡¨.  
æ–‡ä»¶æè¿°ç¬¦å°±æ˜¯è¿™ä¸ªè¡¨çš„ç´¢å¼•æ–‡ä»¶ï¼Œæè¿°ç¬¦è¡¨ä¸­æ¯ä¸ªè¡¨é¡¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å·²æ‰“å¼€æ–‡ä»¶çš„æŒ‡é’ˆã€‚ç°åœ¨æˆ‘ä»¬æ˜ç¡®ä¸€ä¸‹ï¼šå·²æ‰“å¼€çš„æ–‡ä»¶åœ¨å†…æ ¸ä¸­ç”¨fileç»“æ„ä½“è¡¨ç¤ºï¼Œæ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­çš„æŒ‡é’ˆæŒ‡å‘fileç»“æ„ä½“ã€‚

> FDæ–¹å¼ç®¡ç†çš„èŒƒç•´
- æ¯ä¸ªè¿›ç¨‹é»˜è®¤æœ‰çš„æ ‡å‡†è¾“å…¥è¾“å‡º: 0æ ‡å‡†è¾“å…¥ 1æ ‡å‡†è¾“å‡º 2é”™è¯¯è¾“å‡º
- æŒæœ‰çš„æ–‡ä»¶(è¯»/å†™)
- ç½‘ç»œè¿æ¥ socket
- ç®¡é“ pipe

> é—®é¢˜
- çº¿ä¸Šçš„Centos7.9ä¸Šè¿è¡Œçš„Java8è¿›ç¨‹ï¼Œ12æœˆ11æ—¥å¯åŠ¨çš„è¿›ç¨‹ï¼Œä½†æ˜¯1æœˆ3æ—¥çªç„¶ /proc/pid/fd/ä¸‹çš„fdéƒ½å‘ç”Ÿäº†æ›´æ–°`æ— æ³•æŸ¥çœ‹åˆ›å»ºæ—¶é—´`ï¼Œä½†æ˜¯/proc/pidçš„ç›®å½•æ—¶é—´æ˜¯å¯¹çš„
   - é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿä¿®æ”¹ï¼Œæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œä»¥åŠä¾èµ–çš„jarçš„fdéƒ½å‘ç”Ÿäº†æ–°åˆ›å»ºå’Œä¿®æ”¹
   - åŸå› ï¼šprocæ˜¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå±æ€§å€¼å–å†³äº†æŸ¥è¯¢æˆ–æ“ä½œç³»ç»Ÿç®¡ç†éœ€è¦æ—¶æ„å»ºå‡ºæ¥

### çº¿ç¨‹

1. æŸ¥çœ‹åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å ç”¨å†…å­˜å¤§å° `ulimit -s`
2. æŸ¥çœ‹è¿›ç¨‹ä¸‹çš„çº¿ç¨‹ `ps -T pid`
3. æŸ¥çœ‹æœ€å¤§çº¿ç¨‹æ•° `cat /proc/sys/kernel/threads-max` é»˜è®¤å€¼ 256287

************************

## æ—¶é—´
> [ntpdate manual](https://linux.die.net/man/8/ntpdate)

- /etc/timezone æ—¶åŒº, /etc/localtime æ—¶åŒºåŠæ—¶é—´
- `/usr/sbin/ntpdate -q cn.pool.ntp.org` æŸ¥çœ‹å·®å¼‚

> **æ—¶é—´åŒæ­¥**

1. ä¿®æ”¹æ—¶åŒº `cp -y /usr/share/zoneinfo/Asia/Shanghai /etc/localtime`
2. åŒæ­¥æ—¶é—´ `/usr/sbin/ntpdate -u cn.pool.ntp.org` | æ²¡æœ‰å°±å…ˆå®‰è£… ntpdate
    - æ³¨æ„è¿”å›å€¼ offset ä¸ºæ­£è¯´æ˜æœ¬åœ°æ¯”è¿œç¨‹æ…¢ï¼Œè´Ÿæ•°åˆ™ç›¸åï¼Œæœ¬åœ°æ¯”è¿œç¨‹å¿«
3. æŸ¥çœ‹BIOSç¡¬ä»¶æ—¶é—´ `hwclock -r`
    - å¦‚æœä¸åŒæ­¥å°±éœ€è¦å†™å…¥æ—¶é—´ `hwclock -w` _å› ä¸ºç³»ç»Ÿé‡å¯åç”¨ç¡¬ä»¶æ—¶é—´åˆå§‹åŒ–çš„_

> åŒæ­¥æ—¶é—´ æ‰©å±•

- chrony æ¯” ntpupdate åŠŸèƒ½æ›´å¤šï¼Œå¯å®šæ—¶åŒæ­¥æ—¶é—´
- æœåŠ¡å™¨é¢†åŸŸ ntpd ä¼šæ›´åˆé€‚ï¼Œå› ä¸º ntpupdateæ˜¯ç«‹åˆ»ä¿®æ”¹æ—¶é’Ÿ ä¼šå¸¦æ¥æ—¶é’Ÿè·ƒå˜çš„é—®é¢˜ï¼Œä½†æ˜¯ntpdæ˜¯å°†è¯¯å·®çš„æ—¶é—´åœ¨ä¸€æ®µæ—¶é—´å†…å¹³ç¼“çš„è°ƒæ•´ã€‚[Linux æ—¶é—´åŒæ­¥æœåŠ¡ -- ntp å’Œ chrony](https://blog.epurs.com/post/ntp-and-chrony/)

- **è‡ªåŠ¨åŒæ­¥æ—¶é—´**
    1. é…ç½®å¼€æœºè‡ªåŠ¨æ ¡éªŒ `vim /etc/rc.d/rc.local`
    - `/usr/sbin/ntpdate -u cn.pool.ntp.org> /dev/null 2>&1; /sbin/hwclock -w`
    2. é…ç½®å®šæ—¶ä»»åŠ¡ `crontab -e`
    - `00 10 * * * root /usr/sbin/ntpdate -u cn.pool.ntp.org > /dev/null 2>&1; /sbin/hwclock -w `

************************

## æœåŠ¡ç®¡ç†

### initè¿›ç¨‹

> [å‚è€ƒ: æœåŠ¡ç›¸å…³å‘½ä»¤](https://blog.csdn.net/qq_37993487/article/details/79868857)

### systemd æ–¹å¼æœåŠ¡ç®¡ç†

> [Arch Doc: systemd](https://wiki.archlinux.org/index.php/Systemd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))

- systemctl start/stop/restart/reload/edit serviceName **ä¾‹å¦‚ sshd docker ç­‰æœåŠ¡**

| command        | ä½œç”¨                                                   |
| :------------- | :----------------------------------------------------- |
| start/stop     | å¯åŠ¨/åœæ­¢æœåŠ¡                                          |
| enable/disable | å¼€æœºå¯ç”¨/ç¦ç”¨                                          |
| restart        | å¦‚æœæœåŠ¡åœ¨è¿è¡Œä¸­ï¼Œåˆ™é‡å¯æœåŠ¡ï¼Œè‹¥ä¸åœ¨è¿è¡Œä¸­ï¼Œåˆ™å°†ä¼šå¯åŠ¨ |
| try-restart    | åªåœ¨æœåŠ¡å·²å­˜åœ¨è¿è¡Œçš„çŠ¶æ€ä¸‹å¯åŠ¨æœåŠ¡                     |
| reload         | é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶                                       |
| edit           | ä¿®æ”¹æœåŠ¡é…ç½®                                           |
| status         | æŸ¥çœ‹è¿è¡ŒçŠ¶æ€                                           |

> ç³»ç»Ÿç”µæºç®¡ç†

| systemctl å‘½ä»¤         | ä½œç”¨             |
| ---------------------- | ---------------- |
| systemctl poweroff     | å…³é—­ç³»ç»Ÿ         |
| systemctl reboot       | é‡å¯ç³»ç»Ÿ         |
| systemctl suspend      | è¿›å…¥å¾…æœºæ¨¡å¼     |
| systemctl hibernate    | è¿›å…¥ä¼‘çœ æ¨¡å¼     |
| systemctl hybrid-sleep | è¿›å…¥æ··åˆä¼‘çœ æ¨¡å¼ |

************************

### service æ–¹å¼ç®¡ç†

> /etc/init.d/ æ˜¯æœåŠ¡çš„å­˜æ”¾ç›®å½•

1. åˆ—å‡ºæ‰€æœ‰æœåŠ¡çš„çŠ¶æ€ `service --status-all`
2. å¯åŠ¨/å…³é—­æœåŠ¡ `service ssh start/stop`

#### è‡ªå®šä¹‰ service

> [å‚è€ƒ: Run a Java Application as a Service on Linux](https://www.baeldung.com/linux/run-java-application-as-service)

### update-rc.d æ–¹å¼ç®¡ç†

1. ç§»é™¤MySQLçš„è‡ªå¯   `sudo update-rc.d -f mysql remove`
2. è®¾ç½®MySQLéšæœºå¯åŠ¨ `sudo update-rc.d mysql defaults`
3. è®¾å®šMySQLå¯åŠ¨é¡ºåº `update-rc.d mysql defaults 90` æ•°å­—è¶Šå°, å¯åŠ¨é¡ºåºè¶Šå‰

- sysv-rc-conf  ç•¥å¾®å›¾å½¢åŒ–çš„ç®¡ç†æœåŠ¡çš„å¼€æœºè‡ªå¯
- chkconfig ç®€å•çš„è¾“å‡ºæœåŠ¡è‡ªå¯çŠ¶æ€

_ç³»ç»Ÿè¿è¡Œçº§åˆ«_

```
    0        ç³»ç»ŸåœæœºçŠ¶æ€
    1        å•ç”¨æˆ·æˆ–ç³»ç»Ÿç»´æŠ¤çŠ¶æ€
    2~5      å¤šç”¨æˆ·çŠ¶æ€
    6        é‡æ–°å¯åŠ¨ 
```

************************

# ç³»ç»Ÿèµ„æºç®¡ç†

- æŸ¥çœ‹ç³»ç»ŸPCIè®¾å¤‡ï¼š`lspci`
- æŸ¥çœ‹CPUä¿¡æ¯ï¼š`more /proc/cpuinfo`
  - æŸ¥çœ‹ç‰©ç†CPUæ•°ï¼š`cat /proc/cpuinfo | grep "physical id" | sort | uniq | wc -l`
  - æŸ¥çœ‹æ¯ä¸ªç‰©ç†CPUä¸­çš„å†…æ ¸çš„ä¸ªæ•°ï¼š`cat /proc/cpuinfo | grep "cpu cores"`
  - æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰é€»è¾‘CPUä¸ªæ•°ï¼š`cat /proc/cpuinfo | grep "processor" | wc -l`
- æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯ï¼š`more /proc/meminfo`
- æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ï¼š`df -l`

## ulimit

> [å‚è€ƒ:  Linuxä¸‹è®¾ç½®æœ€å¤§æ–‡ä»¶æ‰“å¼€æ•°nofileåŠnr_openã€file-max](https://www.cnblogs.com/zengkefu/p/5635153.html)

1. æŸ¥çœ‹æŸè¿›ç¨‹limitçŠ¶æ€ `cat /proc/xxxpid/limits`
2. æ‰§è¡Œulimitä¿®æ”¹å‘½ä»¤åªå¯¹å½“å‰ç»ˆç«¯(tty)ç”Ÿæ•ˆ
3. æŒä¹…åŒ–ä¿®æ”¹è®¾ç½®ï¼š **/etc/security/limits.conf** æ–‡ä»¶ä¸­æ·»åŠ ï¼Œæ³¨é”€æˆ–é‡å¯åç”Ÿæ•ˆ

   ```sh
   * soft nofile 4096
   * hard nofile 4096
   ```

## CPU

> [linux cpu load](https://www.scalyr.com/blog/linux-cpu-load/)

- Usage å’Œ Load çš„åŒºåˆ«ï¼Œ ä½¿ç”¨ç‡é’ˆå¯¹äºCpu æ—¶é—´ï¼Œè´Ÿè½½é’ˆå¯¹äºç­‰å¾…å’Œè¿›è¡Œä¸­çš„çº¿ç¨‹
- ä½¿ç”¨uptimeã€topæˆ–è€… `cat /proc/loadavg`éƒ½å¯ä»¥çœ‹åˆ°CPUçš„load 1 5 15 åˆ†é’Ÿçš„è´Ÿè½½ã€‚
    - LOAD AVERAGEï¼šä¸€æ®µæ—¶é—´å†…å¤„äºå¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„è¿›ç¨‹å¹³å‡æ•°é‡,å®ƒæ˜¯ä»å¦å¤–ä¸€ä¸ªè§’åº¦ä½“ç°CPUçš„ä½¿ç”¨çŠ¶æ€ã€‚
        - å¯è¿è¡Œåˆ†ä¸ºæ­£åœ¨`è¿è¡Œè¿›ç¨‹`å’Œ`æ­£åœ¨ç­‰å¾…CPU`çš„è¿›ç¨‹ï¼Œ**çŠ¶æ€ä¸ºR**
        - ä¸å¯ä¸­æ–­åˆ™æ˜¯å®ƒæ­£åœ¨åšæŸäº›å·¥ä½œä¸èƒ½è¢«ä¸­æ–­æ¯”å¦‚ç­‰å¾…ç£ç›˜IOç­‰ï¼Œ**å…¶çŠ¶æ€ä¸ºD**
    > æ³¨æ„: ä¸€ä¸ªé€»è¾‘æ ¸ä¸”è´Ÿè½½ä¸º1æ—¶è¡¨ç¤ºæœ‰çº¿ç¨‹ä¸€ç›´åœ¨ç­‰å¾…æˆ–è¿è¡Œï¼ˆæ»¡è½½ï¼‰ï¼Œå››ä¸ªé€»è¾‘æ ¸ä¸”è´Ÿè½½ä¸º4æ—¶è¡¨ç¤ºå››ä¸ªæ ¸å¿ƒéƒ½ä¸€ç›´æœ‰çº¿ç¨‹åœ¨ç­‰å¾…æˆ–è¿è¡Œï¼ˆæ»¡è½½ï¼‰
- lscpu å±•ç¤ºCPUä¿¡æ¯

- taskset å°†ä»»åŠ¡ç»‘å®šåœ¨æŒ‡å®šcpuæ ¸å¿ƒä¸Š

************************

## å†…å­˜
å¯¹äºLinuxæ¥è¯´, æœ‰å†…å­˜å°±å»åˆ†é…ä½¿ç”¨, åªæœ‰å†…å­˜ä¸å¤Ÿç”³è¯·çš„å¤§å°ï¼Œæ‰ä¼šå»é‡Šæ”¾ bufferæˆ–cache, å¯¹äºæœåŠ¡å™¨æ¥è¯´, äº¤æ¢å†…å­˜ä¼šå¸¦æ¥æ€§èƒ½çš„æ˜æ˜¾ä¸‹é™ ä¸€èˆ¬æ˜¯ä¸ä¼šé…ç½®çš„  

å†…å­˜ç»„æˆ
- ç©ºé—²å†…å­˜, å·²ä½¿ç”¨, buffers, cached
  - è¯» cache å†™ buffer

- Virtual Memory   è™šæ‹Ÿå†…å­˜
- Resident Memory  æŒä¹…å†…å­˜
- Shared Memory    å…±äº«å†…å­˜(å¤šè¿›ç¨‹é—´å…±äº«)

> [linux ate my ram](https://www.linuxatemyram.com/)  
> [Empty the Buffer and Cache in Linux](https://www.baeldung.com/linux/empty-buffer-cache)

æŸ¥çœ‹å†…å­˜å¤§é¡µè®¾ç½® `cat /sys/kernel/mm/transparent_hugepage/enabled`  
å…³é—­å†…å­˜å¤§é¡µ `echo never > /sys/kernel/mm/transparent_hugepage/enabled`  

### overcommit 
> [å‚è€ƒ: Linux Overcommit Modes](https://www.baeldung.com/linux/overcommit-modes)  

- å†…æ ¸å‚æ•°ï¼š vm.overcommit_memory 
    - 0 å…è®¸overcommitä½†æ˜¯ç®—æ³•åˆ¤æ–­æ˜¯å¦åˆç†ï¼Œä¸åˆç†ä¼šæ‹’ç»å¯¹åº”è¿›ç¨‹çš„å†…å­˜ç”³è¯·
    - 1 å…è®¸overcommit
    - 2 ç¦æ­¢overcommit

- `cat /proc/meminfo | grep commit`
    - CommitLimit å°±æ˜¯overcommitçš„é˜ˆå€¼ï¼Œç”³è¯·çš„å†…å­˜æ€»æ•°è¶…è¿‡CommitLimitçš„è¯å°±ç®—æ˜¯overcommitã€‚
        - CommitLimit = (Physical RAM * vm.overcommit_ratio / 100) + Swap
    - Committed_AS è¡¨ç¤ºæ‰€æœ‰è¿›ç¨‹å·²ç»ç”³è¯·çš„å†…å­˜æ€»å¤§å°ï¼Œï¼ˆæ³¨æ„æ˜¯å·²ç»ç”³è¯·çš„ï¼Œä¸æ˜¯å·²ç»åˆ†é…çš„ï¼‰ï¼Œå¦‚æœ Committed_AS è¶…è¿‡ CommitLimit å°±è¡¨ç¤ºå‘ç”Ÿäº† overcommit
        - è¶…å‡ºè¶Šå¤šè¡¨ç¤º overcommit è¶Šä¸¥é‡ã€‚Committed_AS çš„å«ä¹‰æ¢ä¸€ç§è¯´æ³•å°±æ˜¯ï¼Œå¦‚æœè¦ç»å¯¹ä¿è¯ä¸å‘ç”ŸOOM (out of memory) éœ€è¦å¤šå°‘ç‰©ç†å†…å­˜ã€‚

### oom
å½“æ“ä½œç³»ç»Ÿè®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šé€‰æ‹©åˆ†æ•°å€¼è¾ƒé«˜çš„è¿›ç¨‹killæ‰ï¼ˆç”¨æˆ·è¿›ç¨‹ï¼Œéå†…æ ¸è¿›ç¨‹ï¼‰
- /proc/pid/oom_score æ“ä½œç³»ç»Ÿæ‰€è®¡ç®—å€¼
- /proc/pid/oom_score_adj å¯ä»¥ä¿®æ”¹çš„å€¼ï¼Œå½“å‰å€¼åŠ ä¸Šoom_scoreåæ‰æ˜¯æœ€ç»ˆå€¼
    - é™ä½åˆ†å€¼ echo -50 > /proc/pid/oom_score_adj
- /proc/pid/oom_adj å¯¹åº”è¿›ç¨‹çš„ä¼˜å…ˆçº§ 

### è™šæ‹Ÿå†…å­˜

> [å‚è€ƒ: What does Virtual memory size in top mean?](https://serverfault.com/questions/138427/what-does-virtual-memory-size-in-top-mean)  
> [å‚è€ƒ: The Right Way to Monitor Virtual Memory on Linux](https://www.logicmonitor.com/blog/the-right-way-to-monitor-virtual-memory-on-linux/)  

### äº¤æ¢å†…å­˜
> swapon, swapoff - enable/disable devices and files for paging and swapping

> [äº¤æ¢å†…å­˜æ–‡ä»¶](/Linux/Base/LinuxDirectoryStructure.md#è®¾ç½®äº¤æ¢å†…å­˜æ–‡ä»¶)

> äº¤æ¢å†…å­˜åˆ†æ
VIRT = SWAP + RES or equal
SWAP = VIRT - RES

- æŸ¥çœ‹è¿›ç¨‹ä½¿ç”¨äº¤æ¢å†…å­˜ `grep -i VmSwap /proc/*/status` 
- è¿›ç¨‹æŒ‰äº¤æ¢å†…å­˜ä½¿ç”¨å¤§å°æ’åº`for file in /proc/*/status ; do awk '/VmSwap|Name/{printf $2 " " $3}END{ print ""}' $file; done | sort -k 2 -n -r | less`
- `smem`  Report memory usage with shared memory divided proportionally

#### æ¸…ç©ºäº¤æ¢å†…å­˜
- 1.å…³é—­äº¤æ¢åˆ†åŒº `sudo swapoff äº¤æ¢åˆ†åŒºæ–‡ä»¶`
    - 2.å¼€å¯äº¤æ¢åˆ†åŒº `sudo swapon äº¤æ¢åˆ†åŒºæ–‡ä»¶`
- `swapoff -a && swapon -a`
    - å‰ææ˜¯äº¤æ¢åˆ†åŒºå·²åœ¨ `/etc/fstab` ä¸­é…ç½®

### æ¸…ç©ºè¯»å†™ç¼“å­˜
æ³¨æ„ï¼š è¯» cache å†™ bufferï¼Œ è®¾è®¡æ˜¯ä¸ºäº†æé«˜è¯»å†™æ•ˆç‡ï¼Œå¦‚æœå†…å­˜ä¸è¶³æ—¶å¯ä»¥è€ƒè™‘é‡Šæ”¾è¿™éƒ¨åˆ†å†…å­˜ï¼Œä½†æ˜¯ä¹Ÿä¼šå¸¦æ¥è¯»å†™ç¼“å­˜å¤±æ•ˆé‡æ–°è¯»ç£ç›˜çš„æ€§èƒ½é—®é¢˜ï¼Œéœ€æ…é‡è€ƒè™‘ã€‚

> [å‚è€ƒ: å¦‚ä½•åœ¨ Linux ä¸­æ¸…é™¤ç¼“å­˜ï¼ˆCacheï¼‰ï¼Ÿ](https://linux.cn/article-5627-1.html) `æ³¨æ„è¦åˆ‡æ¢åˆ°rootå†è¿è¡Œå‘½ä»¤`  
> [å‚è€ƒ: Linux å†…å­˜ä¸­çš„Cacheï¼ŒçœŸçš„èƒ½è¢«å›æ”¶ä¹ˆï¼Ÿ](https://www.cnblogs.com/276815076/p/5478966.html)  

************************

è®¾ç½®å€¼ `sync; echo 1 > /proc/sys/vm/drop_caches`

| è®¾ç½®å€¼ | ä½œç”¨ |
|:----|:----|
| 1 | ä»…æ¸…é™¤ page cache |
| 2 | è¡¨ç¤ºæ¸…é™¤å›æ”¶ slab åˆ†é…å™¨ä¸­çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ç›®å½•é¡¹ç¼“å­˜å’Œ inode ç¼“å­˜ï¼‰ |
| 3 | è¡¨ç¤ºæ¸…é™¤ page cache å’Œ slab åˆ†é…å™¨ä¸­çš„ç¼“å­˜å¯¹è±¡ |

> æ³¨æ„syncå‘½ä»¤æ˜¯ä¸ºäº†å°†å†…å­˜ä¸­bufferå†™å…¥ç£ç›˜ï¼Œé¿å…è¿™éƒ¨åˆ†å†…å­˜è¢«ç›´æ¥é‡Šæ”¾å¯¼è‡´æ•°æ®ä¸ä¸€è‡´

************************

# ç»ˆç«¯å¿«æ·é”®

- `é¼ æ ‡ä¸­é”®` ç²˜è´´é¼ æ ‡å·¦é”®å·²é€‰æ‹©çš„æ–‡æœ¬ **VSCodeä¸­ä¹Ÿé€‚ç”¨**
- `!num` history ä¸­ç¬¬ num æ¡å‘½ä»¤
- `!!` ä¸Šä¸€æ¡å‘½ä»¤
- `ls !$` æ‰§è¡Œå‘½ä»¤lsï¼Œå¹¶ä»¥ä¸Šä¸€æ¡å‘½ä»¤çš„å‚æ•°ä¸ºå…¶å‚æ•°
- `!?string?` æ‰§è¡Œå«æœ‰stringå­—ç¬¦ä¸²çš„æœ€æ–°å‘½ä»¤
- `Ctrl L` æ¸…å±ç­‰ä»·äºclearï¼Œæ¸…é™¤æ‰€æœ‰è¿™ä¸ª shell æç¤ºå±å¹•ä¸­æ˜¾ç¤ºçš„æ•°æ®ã€‚ `Mysqlä¹Ÿé€‚ç”¨`
- `reset` åˆ·æ–° shell æç¤ºå±å¹•ã€‚å¦‚æœå­—ç¬¦ä¸æ¸…æ™°æˆ–ä¹±ç çš„è¯ï¼Œåœ¨ shell æç¤ºä¸‹é”®å…¥è¿™ä¸ªå‘½ä»¤ä¼šåˆ·æ–°å±å¹•ã€‚
- `Ctrl ï¼›` æ˜¾ç¤ºæœ€è¿‘äº”æ¡å‰ªè´´æ¿å†…å®¹
- Ctrl Alt Backspace : æ€æ­»ä½ å½“å‰çš„ X ä¼šè¯ã€‚æ€æ­»å›¾å½¢åŒ–æ¡Œé¢ä¼šè¯ï¼ŒæŠŠä½ è¿”å›åˆ°ç™»å½•å±å¹•ã€‚å¦‚æœæ­£å¸¸é€€å‡ºæ­¥éª¤ä¸èµ·ä½œç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚
- Ctrl Alt Delete : å…³æœºå’Œé‡æ–°å¼•å¯¼ Red Hat Linuxã€‚å…³é—­ä½ å½“å‰çš„ä¼šè¯ç„¶åé‡æ–°å¼•å¯¼ OSã€‚åªæœ‰åœ¨æ­£å¸¸å…³æœºæ­¥éª¤ä¸èµ·ä½œç”¨æ—¶æ‰ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚
- Ctrl Alt Fn: åˆ‡æ¢å±å¹•ã€‚ æ ¹æ®é»˜è®¤è®¾ç½®ï¼Œä» [F1] åˆ° [F6] æ˜¯ shell æç¤ºå±å¹•ï¼Œ [F7] æ˜¯å›¾å½¢åŒ–å±å¹•ã€‚`ä½†æ˜¯deepinæ˜¯F1ä¸ºå›¾å½¢åŒ–`

## Delete

| Controller | Key | comment                                                                                         |
| :--------- | :-- | :---------------------------------------------------------------------------------------------- |
| Ctrl       | D   | åˆ é™¤å…‰æ ‡åå­—ç¬¦,ç­‰ä»·äºDeleteé”®ï¼ˆå‘½ä»¤è¡Œè‹¥æ— ä»»ä½•å­—ç¬¦ï¼Œåˆ™ç›¸å½“äºexitï¼›å¤„ç† å¤šè¡Œæ ‡å‡†è¾“å…¥æ—¶ä¹Ÿè¡¨ç¤ºEOFï¼‰ |
| Ctrl       | H   | é€€æ ¼åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºé€šå¸¸çš„Backspaceé”®                                                       |
| Ctrl       | U   | åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ° è¡Œé¦– çš„å­—ç¬¦ (Zshä¸­æ˜¯åˆ é™¤æ•´è¡Œ)                                                    |
| Esc        | W   | åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ° è¡Œé¦– çš„å­—ç¬¦                                                                      |
| Ctrl       | K   | åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ° è¡Œå°¾ çš„å­—ç¬¦                                                                      |
| Ctrl       | W   | åˆ é™¤å…‰æ ‡ä¹‹å‰çš„ä¸€ä¸ªå•è¯                                                                          |
| Alt        | D   | åˆ é™¤å…‰æ ‡ä¹‹åçš„ä¸€ä¸ªå•è¯                                                                          |
| Ctrl       | Y   | ç²˜è´´ä¸Šæ¬¡åˆ é™¤çš„æ‰€æœ‰å­—ç¬¦                                                                          |
| Ctrl       | _   | æ’¤é”€ä¿®æ”¹ ç­‰ä»·äº `Ctrl x u`                                                                    |

************************

## Convert

| Controller | Key | comment                                            |
| :--------- | :-- | :------------------------------------------------- |
| Ctrl       | T   | äº’æ¢å½“å‰å­—ç¬¦,å…‰æ ‡åç§»                              |
| Alt        | T   | äº’æ¢å½“å‰å•è¯ä¸å‰ä¸€ä¸ªå•è¯,å…‰æ ‡åç§» ç­‰ä»·äº `Esc T` |
| Alt        | D   | å°†å½“å‰å•è¯å…¨éƒ¨è½¬ä¸ºå¤§å†™,å…‰æ ‡åç§»                    |
| Alt        | C   | å°†å½“å‰å•è¯é¦–å­—æ¯è½¬ä¸ºå¤§å†™,å…‰æ ‡åç§»                  |
| Alt        | L   | å°†å½“å‰å•è¯å…¨éƒ¨è½¬ä¸ºå°å†™,å…‰æ ‡åç§»(zshæ— æ•ˆ)           |

************************

## Jump

| Controller | Key | comment                                             |
| :--------- | :-- | :-------------------------------------------------- |
| Ctrl       | C   | å–æ¶ˆè¿è¡Œå½“å‰è¡Œè¾“å…¥çš„å‘½ä»¤ï¼Œç›¸å½“äºCtrl + Break        |
| Ctrl       | A   | å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–ï¼ˆAhead of lineï¼‰ï¼Œç›¸å½“äºé€šå¸¸çš„Homeé”® |
| Ctrl       | E   | å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼ˆEnd of lineï¼‰                       |
| Ctrl       | F   | å…‰æ ‡å‘å‰(Forward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½®                   |
| Ctrl       | B   | å…‰æ ‡å¾€å›(Backward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½®                  |
| Alt        | F   | å…‰æ ‡å‘å‰(Forward)ç§»åŠ¨ä¸€ä¸ªå•è¯ä½ç½®                   |
| Alt        | B   | å…‰æ ‡å¾€å›(Backward)ç§»åŠ¨ä¸€ä¸ªå•è¯ä½ç½®                  |
| Esc        | F   | å…‰æ ‡å‘å‰(Forward)ç§»åŠ¨åˆ°å½“å‰å•è¯çš„å¤´éƒ¨               |
| Esc        | B   | å…‰æ ‡å¾€å›(Backward)ç§»åŠ¨åˆ°å½“å‰å•è¯çš„å°¾éƒ¨              |

************************

## Search

| Controller | Key | comment                                                            |
| :--------- | :-- | :----------------------------------------------------------------- |
| Ctrl       | P   | è°ƒå‡ºå‘½ä»¤å†å²ä¸­çš„å‰ä¸€æ¡ï¼ˆPreviousï¼‰å‘½ä»¤ï¼Œç›¸å½“äºé€šå¸¸çš„ä¸Šç®­å¤´         |
| Ctrl       | N   | è°ƒå‡ºå‘½ä»¤å†å²ä¸­çš„ä¸‹ä¸€æ¡ï¼ˆNextï¼‰å‘½ä»¤ï¼Œç›¸å½“äºé€šå¸¸çš„ä¸‹ç®­å¤´             |
| Ctrl       | O   | è¿è¡Œä¸Šç¿»ä¸‹ç¿»å‡ºæ¥çš„å‘½ä»¤, å¹¶ä¸”è‡ªåŠ¨å°†ä¸‹ä¸€æ¡å‘½ä»¤å¡«å…¥                   |
| Ctrl       | R   | å‘ä¸Šæœç´¢ç›¸å…³å‘½ä»¤ï¼ˆreverse-i-searchï¼‰ç»§ç»­æŒ‰ Ctrl R åˆ™ç»§ç»­æœç´¢ä¸Šä¸€æ¡ |
| Ctrl       | S   | ä¸ Ctrl R ç±»ä¼¼, ä½†æ˜¯æ˜¯å‘ä¸‹æœç´¢                                     |

************************

## Control

| Controller | Key | comment           |
| :--------- | :-- | :---------------- |
| Ctrl       | Z   | æš‚åœç¨‹åº          |
| Ctrl       | S   | åœæ­¢å›æ˜¾å½“å‰Shell |
| Ctrl       | Q   | æ¢å¤å›æ˜¾å½“å‰Shell |

************************

# å¸¸è§å¯¹æ¯”

## æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯”

> [å‚è€ƒ: å¦‚ä½•é€‰æ‹©æ–‡ä»¶ç³»ç»Ÿï¼šEXT4ã€Btrfs å’Œ XFS ](https://linux.cn/article-7083-1.html)

ç›®å‰ Linux å¤§å¤šé‡‡ç”¨ ext4, Btrfs

Btrfs çš„å¿«ç…§åŠŸèƒ½å¾ˆé€‚åˆ Arch ç³»ç»Ÿï¼Œæ»šåŠ¨æ›´æ–°æŒ‚æ‰çš„è¯å¯ä»¥é€šè¿‡å†å²å¿«ç…§æ¢å¤å›æ¥

## æ¡Œé¢ç¯å¢ƒå¯¹æ¯”

> [Arch Doc: desktop environment](https://wiki.archlinux.org/index.php/Desktop_environment_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))
> [å‚è€ƒ: Linuxä¸‹15æ¬¾æ¡Œé¢ç¯å¢ƒ](https://www.lulinux.com/archives/444)

1. **gnome** å ç”¨èµ„æºä¸­ç­‰ï¼Œä¸ªäººå¯¹è¯¥æ¡Œé¢ä¸æ„Ÿå†’
2. **xfce** å ç”¨èµ„æºå°‘ä¸”ç¨³å®šï¼Œä½†æ˜¯UIæ–¹é¢å¯å®šåˆ¶çš„ç‚¹è¾ƒå°‘ï¼Œç›®å‰ä¹Ÿæ˜¯ä¸ªäººä½¿ç”¨äº†5å¹´+çš„æ¡Œé¢ç®¡ç†å™¨
3. **kde** åŠŸèƒ½å¼ºå¤§ï¼Œå ç”¨èµ„æºä¸­ç­‰
   - [Arch Doc: KDE](https://wiki.archlinux.org/index.php/KDE)
   - [çŸ¥ä¹ KDEå¦‚ä½•é…ç½®å¾—æ¼‚äº®å¤§æ°”ï¼Ÿ](https://www.zhihu.com/question/54147372)
4. **dde-wm** Deepin åŸºäº `gnome mutter`è®¾è®¡çš„æ¡Œé¢ç¯å¢ƒï¼Œå°bugç•¥å¤šï¼Œè€Œä¸”æ¸²æŸ“ä¼šå ç”¨è¾ƒå¤šèµ„æºï¼Œå®¹æ˜“å¡é¡¿ï¼Œä½†æ˜¯ç¾è§‚æ“ä½œæ–¹ä¾¿
   1. åç»­DeepinåŸºäºkwinæ›´æ¢äº†çª—å£ç®¡ç†å™¨ `dde-kwin`ï¼Œæµç•…äº†ä¸€äº›ï¼Œä½†æ˜¯çª—å£é¡¶éƒ¨æœ‰ä¸ªå¤§çš„Title [éšè—Deppinå¤§æ ‡é¢˜æ ](https://www.jianshu.com/p/f90526bbe0c9)

- [dde kde gnome](https://bbs.deepin.org/forum.php?mod=viewthread&tid=38498)

> [Xçª—å£ç³»ç»Ÿçš„åè®®å’Œæ¶æ„](http://www.cnblogs.com/noble/p/4144098.html)
> [Arch Doc: Xorg](https://wiki.archlinux.org/index.php/Xorg_(ç®€ä½“ä¸­æ–‡))

## çª—å£ç®¡ç†å™¨å¯¹æ¯”

> [Arch Doc: window manager](https://wiki.archlinux.org/index.php/Window_manager_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87))

- [awesome window manager](https://awesomewm.org/) `å¹³é“ºå¼çš„`

************************

## æ–‡ä»¶ç®¡ç†å™¨å¯¹æ¯”

> æœ‰å•çª—å£ï¼ŒåŒåˆ—ï¼Œå‘½ä»¤ï¼Œç®€æ´è½»é‡ï¼Œç¬¨é‡å®Œæ•´ å„ç§å„æ ·çš„é€‰æ‹©

- `nautilus` Gnomeé»˜è®¤ æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¸èƒ½è‡ªåŠ¨æŒ‚è½½åˆ†åŒº
- `deepin-filemanager` deepiné»˜è®¤ï¼Œè¾ƒä¸ºæ–¹ä¾¿ï¼Œä½†æ˜¯æ‰“å¼€æ‰‹æœºä¼šå¡æ ¹æœ¬æ‰“ä¸å¼€
- `pcmanfm` å·¦è¾¹ä¾§æ ç›®å½•æ ‘ ä¼šåŒæ­¥nautilusçš„é…ç½®
- `rox-filer` ç‰¹åˆ«å°ï¼Œå•å‡»æ‰“å¼€ï¼Œè¿…é€Ÿå®šä½æ–‡ä»¶ï¼Œé€‚åˆæ‰¾ä¸œè¥¿ç”¨
- `thunar` è§£å†³äº†nautilusçš„ç¼ºç‚¹ï¼Œå†…å­˜ä¹Ÿå¾ˆçœ
- `dolphin` å¤šæ ‡ç­¾é¡µï¼Œç›®å½•æ ‘æ–¹å¼æŸ¥çœ‹
- `nemo` minté»˜è®¤çš„ï¼ŒåŠŸèƒ½é½å…¨ï¼Œä¼šåŒæ­¥nautilusçš„é…ç½®ï¼ŒåŒæ ·æœ‰ç›®å½•æ ‘è€Œä¸”æ˜¯ä¸¤è¾¹éƒ½æœ‰
- `tuxcmd` Tux Commander åŒåˆ—ï¼Œå°ï¼Œç›´æ¥çš„ç›®å½•æ ‘ï¼Œå­¦ä¹ æˆæœ¬é«˜ç‚¹
- `ranger` å‘½ä»¤è¡Œå†…æ–‡ä»¶æµè§ˆå’Œæ“ä½œ
- [Sigma File Manager](https://github.com/aleksey-hoffman/sigma-file-manager)

## åŒ…ç®¡ç†
- æœ€é€šç”¨çš„æ–¹å¼æ˜¯ç¼–è¯‘å®‰è£…ï¼Œä½†æ˜¯æœ‰é—¨æ§›å’Œç¼–è¯‘ç¯å¢ƒå…¼å®¹æ€§é—®é¢˜
- å…¶æ¬¡æ˜¯ç»‘å®šå‘è¡Œç‰ˆçš„åŒ…ï¼Œå¸¸åˆ†ä¸ºä¸¤ç±» Debianç³»çš„debåŒ…å¯¹åº”aptç®¡ç†ï¼ŒREHLç³»çš„rpmåŒ…å¯¹åº”yum dnfç®¡ç†
- ç„¶åå°±æ˜¯æœ€è¿‘æ¨è¡Œçš„ snap flatpak AppImage ç­‰é€šç”¨åŒ…ï¼Œå¤§è‡´é€»è¾‘éƒ½æ˜¯å°†è½¯ä»¶åŒ…æ‰€æœ‰åŠ¨æ€ä¾èµ–é¡¹æ‰“åŒ…è¿›å»éš”ç¦»ï¼Œç±»ä¼¼é™æ€ç¼–è¯‘ä»¥æ”¯æŒè·¨å‘è¡Œç‰ˆï¼Œå½“ç„¶ç¼ºç‚¹å°±æ˜¯åŒ…çš„å¤§å°ï¼Œä½†æ˜¯ç›¸æ¯”äºè½¯ä»¶å¯ç”¨ï¼Œå­˜å‚¨ä¹Ÿæ˜¯å°é—®é¢˜äº†ã€‚

### AppImage 

### snap 
åªèƒ½ä»Ubuntuå…¬å¸ç§æœ‰è¿è¥çš„å•†åº—ä¸‹è½½è½¯ä»¶,ä¸”aptå®‰è£…éƒ¨åˆ†è½¯ä»¶æ—¶ä¼šæ›¿æ¢ä¸ºsnapå®‰è£…ï¼Œå› æ­¤è¢«æŠ¨å‡»èƒŒç¦»Linuxæ–‡åŒ–ã€‚
snapåº”ç”¨éƒ½æ˜¯æ•´ä¸ªæ‰“æˆå‹ç¼©åŒ…å¹¶ä¸”å°†æ¯ä¸ªè½¯ä»¶å•ç‹¬æŒ‚è½½åœ¨åªè¯»çš„squashfsæ ¼å¼çš„åˆ†åŒºä¸‹ï¼Œåº”ç”¨å¯åŠ¨æ—¶è§£å‹å†æ‰§è¡Œ

- [A universal app store for Linux](https://snapcraft.io/)
- [å¦‚ä½•åœ¨Ubuntuä¸­å®Œå…¨ç§»é™¤Snap](https://cloud.tencent.com/developer/article/2168090)
- [snap å·²ç»åœ¨æ±¡æŸ“ apt](https://v2ex.com/t/1037576)

### flatpak 
- [Bubble wrap](https://wiki.archlinux.org/title/Bubblewrap)  

************************

# Tips

> man help åæ¥ä½¿ç”¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å¾—åˆ°ç”¨æˆ·æ‰‹å†Œå’Œå¸®åŠ©æ–‡æ¡£

## ä¸€è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤

- `&&` ç¬¬2æ¡å‘½ä»¤åªæœ‰åœ¨ç¬¬1æ¡å‘½ä»¤æˆåŠŸæ‰§è¡Œä¹‹åæ‰æ‰§è¡Œ æ ¹æ®å‘½ä»¤äº§ç”Ÿçš„é€€å‡ºç åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼ˆ0æˆåŠŸï¼Œé0å¤±è´¥ï¼‰
- `||` æ‰§è¡Œä¸æˆåŠŸï¼ˆäº§ç”Ÿäº†ä¸€ä¸ªé0çš„é€€å‡ºç ï¼‰æ—¶ï¼Œæ‰æ‰§è¡Œåé¢çš„å‘½ä»¤
- `;`  é¡ºåºæ‰§è¡Œå¤šæ¡å‘½ä»¤ï¼Œå½“;å·å‰çš„å‘½ä»¤æ‰§è¡Œå®Œï¼ˆä¸ç®¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼‰ï¼Œæ‰æ‰§è¡Œ;åçš„å‘½ä»¤ã€‚
- `&`  å¹¶è¡Œæ‰§è¡Œå‘½ä»¤ï¼Œæ²¡æœ‰é¡ºåº
- [tty è™šæ‹Ÿç»ˆç«¯ç­‰æ¦‚å¿µ](https://www.ibm.com/developerworks/cn/linux/l-cn-termi-hanzi/)
- Centosä¸Šwhichå¹¶ä¸æ˜¯å‘½ä»¤, è€Œæ˜¯åˆ«å!

  - `which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'`

************************

## è®©å‘½ä»¤åœ¨åå°è¿è¡Œ

> [å‚è€ƒ Linux æŠ€å·§ï¼šè®©è¿›ç¨‹åœ¨åå°å¯é è¿è¡Œçš„å‡ ç§æ–¹æ³• ](https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/)

- å‘½ä»¤åæ¥ & ï¼ˆåªæ˜¯è®©è¿›ç¨‹æˆä¸ºjobå¹¶åœ¨å½“å‰ç»ˆç«¯çš„åå°æ‰§è¡Œ hupä¿¡å·ä»ç„¶èƒ½å½±å“åˆ°ï¼‰

è¿è¡Œçš„å‘½ä»¤ä¸å›  ç”¨æˆ·æ³¨é”€ï¼Œç½‘ç»œä¸­æ–­ç­‰å› ç´ è€Œä¸­æ–­ `nohupï¼Œ disown, screen, setid`

- å°†è¿›ç¨‹å¯¹ hang up ä¿¡å·å…ç–«:
  - nohup, disown
- å°†è¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ”¹ä¸º1å·è¿›ç¨‹:
  - setid æˆ–è€… `(command &)`
- screen
  - å°†è¿›ç¨‹æ‰˜ç®¡ç»™screen ç±»ä¼¼tmux

> ç¤ºä¾‹
1. ä½¿ç”¨ `nohup`å°±èƒ½å±è”½hupä¿¡å·ï¼Œæ ‡å‡†è¾“å‡ºä¼šè¾“å‡ºåˆ°å½“å‰ç›®å½•ä¸‹çš„nohup.outæ–‡ä»¶. `nohup å‘½ä»¤ &`
   1. å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°ç©ºè®¾å¤‡ å¹¶å°†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º  `nohup å‘½ä»¤>/dev/null 2>&1`
2. ä¾‹å¦‚ åœ¨å½“å‰ç›®å½•åå°æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ `(dde-file-manager . &) >/dev/null 2>&1`

- sshç™»å½•å æ‰§è¡Œå‘½ä»¤ (./xxx.sh &) ç„¶åæ–­å¼€sshè¿æ¥ï¼Œæ­¤æ—¶è¯¥è„šæœ¬è¿›ç¨‹çš„ 1 æ ‡å‡†è¾“å‡ºä¼šæ˜¾ç¤º pst è¢«åˆ é™¤ ä¾‹å¦‚ `1 -> /dev/pts/10 (deleted)`
  - æ­¤æ—¶å¯ä½¿ç”¨ strace å‘½ä»¤å¾—åˆ°æ ‡å‡†è¾“å‡º `strace -e write -p pid` (ä½†å±€é™äºecho printf pwdç­‰å‘½ä»¤çš„è¾“å‡ºï¼Œå…¶ä»–å‘½ä»¤çš„è¾“å‡ºä¸ä¼šè¢«trace)

************************

## ä¿®æ”¹ä¸»æœºå

- `sudo hostname linux` é‡å¯ç»ˆç«¯å³å¯çœ‹åˆ°ä¿®æ”¹
- ä½†æ˜¯é‡å¯ç”µè„‘ä¼šæ¢å¤åŸæœ‰åå­—ä¿®æ”¹å¦‚ä¸‹æ–‡ä»¶æ°¸ä¹…ï¼š `sudo gedit /etc/hostname` ä¹Ÿè®¸éœ€è¦æ›´æ”¹ `/etc/hosts`
- ç«‹å³ç”Ÿæ•ˆ,ä¹Ÿè¦é‡æ–°ç™»å½• `hostname -F /etc/hostname `

************************

## æ–‡ä»¶ç±»å‹é»˜è®¤æ‰“å¼€æ–¹å¼ MIME

> xdg-open å‘½ä»¤

************************

## ç†µæ± 

> [å‚è€ƒ: Linuxä¸‹ç†µæ± å¤§å°å¯¼è‡´çš„ä¸€äº›é—®é¢˜](https://blog.csdn.net/chinoukin/article/details/102566755)

æœºå™¨çš„ç¯å¢ƒä¸­å……æ»¡äº†å„ç§å„æ ·çš„å™ªå£°ï¼Œå¦‚ç¡¬ä»¶è®¾å¤‡å‘ç”Ÿä¸­æ–­çš„æ—¶é—´ï¼Œç”¨æˆ·ç‚¹å‡»é¼ æ ‡çš„æ—¶é—´é—´éš”ç­‰æ˜¯å®Œå…¨éšæœºçš„ï¼Œäº‹å…ˆæ— æ³•é¢„æµ‹ï¼Œä»¥æ­¤ä½œä¸ºç†µæ± æ¥æºã€‚

æŸ¥çœ‹å½“å‰ç†µæ± å¤§å°  cat /proc/sys/kernel/random/entropy_avail
ç†µæ± æœ€å¤§å€¼ cat /proc/sys/kernel/random/poolsize

å½“ç†µæ± ä¸å¤Ÿæ—¶ï¼Œä¼šå¯¼è‡´ gpg tomcat ç­‰åº”ç”¨å‡ºç°é˜»å¡

å¯ä½¿ç”¨ [rng-tools](https://wiki.archlinux.org/index.php/Rng-tools) [Github](https://github.com/nhorman/rng-tools)è¿›è¡Œè¡¥å……ç†µæ± 

- [ ] ä½†æ˜¯ rng é¡¹ç›®çš„å®ç°åŸç†å‘¢
