---
title: Neo4j
date: 2024-10-13 17:59:27
tags: 
categories: 
---

ğŸ’ 

- 1. [Neo4j](#neo4j)
    - 1.1. [å®‰è£…](#å®‰è£…)
    - 1.2. [é©±åŠ¨](#é©±åŠ¨)
- 2. [ä½¿ç”¨](#ä½¿ç”¨)
    - 2.1. [æ•°æ®å¯¼å…¥](#æ•°æ®å¯¼å…¥)
        - 2.1.1. [Load CSV](#load-csv)
    - 2.2. [ç»“æ„](#ç»“æ„)
    - 2.3. [Schema](#schema)
        - 2.3.1. [ç´¢å¼•](#ç´¢å¼•)
        - 2.3.2. [çº¦æŸ](#çº¦æŸ)
        - 2.3.3. [ç»Ÿè®¡ä¿¡æ¯](#ç»Ÿè®¡ä¿¡æ¯)
    - 2.4. [Pattern](#pattern)
- 3. [åº”ç”¨](#åº”ç”¨)

ğŸ’  2024-11-07 10:24:40
****************************************
# Neo4j
> [Neo4j Graph Database & Analytics | Graph Database Management System](https://neo4j.com/)  

> [Neo4j å›¾æ•°æ®åº“ä¸­æ–‡ç¤¾åŒºï¼Œè‡´åŠ›äº Neo4j çš„æŠ€æœ¯ç ”ç©¶ã€‚](http://neo4j.com.cn/)  

> [DozerDB](https://github.com/dozerdb)`è¡ç”Ÿ æ”¯æŒå¤šåº“`  

## å®‰è£…

- `docker run  -p 7474:7474 -p 7687:7687 neo4j:5.24`
    - docker run --name neo4 -d -p 7474:7474 -p 7687:7687 --env NEO4J_AUTH=neo4j/jiushineo neo4j:5.24
- æˆ–è€… è¿›å…¥å®¹å™¨ä¿®æ”¹å¯†ç  `neo4j-admin dbms set-initial-password pwdtest123` ç„¶åé‡å¯ æ³¨æ„åªåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶æœ‰æ•ˆï¼Œåç»­ä¿®æ”¹å¯†ç æ˜¯ ALTER USER neo4j SET PASSWORD ;

> [Neo4j Deployment Center - Graph Database & Analytics](https://neo4j.com/deployment-center/)  

- http://localhost:7474/browser/  boltåè®®ï¼Œç”¨æˆ·å neo4j 
- ç™»å½•å Favorites èœå•ä¸‹çš„ Sample Scripts å¯ä»¥å¿«é€Ÿäº†è§£å¸¸ç”¨æŸ¥è¯¢è¯­å¥

> æ³¨æ„
- ç¤¾åŒºç‰ˆæœ¬ä¸æ”¯æŒå‘½ä»¤ create database xxx åªèƒ½ä½¿ç”¨é»˜è®¤çš„ neo4j [Multiple database in community edition Â· Issue #12920 Â· neo4j/neo4j](https://github.com/neo4j/neo4j/issues/12920)  
- Dockeræ–¹å¼å¯åŠ¨é€‚åˆè°ƒè¯•ï¼Œæ­£å¼ä½¿ç”¨ä¸æ¨èï¼Œæ•°æ®å¤‡ä»½è¿ç§»ä¸æ–¹ä¾¿(ä¹Ÿå¯ä»¥åœæ­¢å®¹å™¨ådocker cpå¤åˆ¶å‡º data ç›®å½•ï¼Œæ›¿æ¢åˆ°æ–°çš„ç©ºå®ä¾‹å†å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨)

## é©±åŠ¨

æ³¨æ„åè®®åŒºåˆ†ä¸º bolt(6787) neo4j(6787) http(7474) ç­‰, ä½¿ç”¨çš„ç«¯å£ä¸ä¸€æ ·

************************

Python

> [Neo4j Python Driver 5.25 â€” Neo4j Python Driver 5.25](https://neo4j.com/docs/api/python-driver/current/)  

Java 

> [Using Neo4j from Java - Getting Started](https://neo4j.com/docs/getting-started/languages-guides/java/java-intro/)  
> [Neo4j Java Drive Compatibility : r/Neo4j](https://www.reddit.com/r/Neo4j/comments/15ggn1l/neo4j_java_drive_compatibility/)  

Java8ä½¿ç”¨å‘æ¯”è¾ƒå¤šï¼Œæ³¨æ„5.Xéœ€è¦Java17 4.xä»¥åŠ3.xæ‰å¯ä»¥å…¼å®¹Java8ï¼Œä½†æ˜¯å®˜ç½‘åŸºæœ¬æ˜¯æŒ‰5.xæ¥æ¨èå’Œå†™æ ·ä¾‹ä»£ç  [neo4j-examples/movies-java-bolt ](https://github.com/neo4j-examples/movies-java-bolt)  
åŒ…æ‹¬SpringData Neo4j ä¹Ÿæ˜¯é…ç½®å’Œä½¿ç”¨æ–¹å¼æ”¹åŠ¨è¾ƒå¤§ï¼Œéœ€è¦ä»”ç»†ç¿»é˜…æ—§æ–‡æ¡£ã€‚

************************

# ä½¿ç”¨
> [å¿«é€Ÿå…¥é—¨ Neo4Jæ•™ç¨‹](https://juejin.cn/post/7146016720388358181)  
> [Neo4jå›¾æ•°æ®åº“åŠCypherè¯­æ³•åŸºç¡€ | Quantum Bit](https://www.eula.club/blogs/Neo4j%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8ACypher%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80.html)  


> [Neo4j - æ‚¦å…‰é˜´ - åšå®¢å›­](https://www.cnblogs.com/ljhdo/tag/Neo4j/)  
> [Neo4j ç¬¬äºŒç¯‡ï¼šå›¾å½¢æ•°æ®åº“ - æ‚¦å…‰é˜´ - åšå®¢å›­](https://www.cnblogs.com/ljhdo/p/5178225.html)  

è®¿é—®7474ç«¯å£æ‰“å¼€ç½‘é¡µå®¢æˆ·ç«¯
- èŠ‚ç‚¹ç±»å‹å’Œè¾¹å¯ä»¥ä¿®æ”¹é»˜è®¤å±•ç¤ºçš„å­—æ®µå’Œé¢œè‰²ï¼Œé€šè¿‡ç‚¹å‡»è¯¦æƒ…ä¸­çš„è‰²å—å¼¹å‡ºè®¾ç½®é¡µ
- æ‰§è¡Œçª—å£å¯é€šè¿‡ Ctrl + ä¸Šä¸‹æ–¹å‘é”® åˆ‡æ¢å†å²æ‰§è¡Œçš„è¯­å¥

## æ•°æ®å¯¼å…¥

### Load CSV
å¯ä»¥æ³¨æ„åˆ°æ–‡ä»¶çš„å†™æ³•æ˜¯åè®®ï¼Œæ‰€ä»¥æ”¯æŒHTTPåè®®çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶åˆ™æ˜¯file://ã€‚ é»˜è®¤å¯¼å…¥è·¯å¾„åœ¨ neo4j.conf ä¸­é…ç½®,é»˜è®¤ä¸º æ ¹è·¯å¾„ä¸‹ import ç›®å½•, æ–‡ä»¶åæœ€å¥½ä¸ºè‹±æ–‡
```c
    // å¯¼å…¥èŠ‚ç‚¹ csvå†…ä¸ºä¸¤åˆ— id å’Œ name
    LOAD CSV WITH HEADERS FROM 'file:///event.csv' AS row
    CREATE (:`äº‹ä»¶` {id: row.id, name: row.name})

    // å¯¼å…¥å…³ç³» csvå†…ä¸ºä¸¤åˆ— id_from id_to
    LOAD CSV WITH HEADERS FROM "file:///Relationships.csv" AS row
    //look up the two nodes we want to connect up
    MATCH (p1:Person {id:row.id_from}), (p2:Person {id:row.id_to})
    //now create a relationship between them
    CREATE (p1)-[:KNOWS]->(p2);
    // TODO è€ƒè™‘ èŠ‚ç‚¹ç±»å‹å’Œidä»¥åŠå…³ç³»ç±»å‹éƒ½æ˜¯å¯å˜çš„æƒ…å†µ æ˜¯å¦å¼•ç”¨csvçš„åˆ—æ¥åŠ¨æ€åŒ–ï¼Œå¦åˆ™éœ€è¦åˆ‡åˆ†csv

```


## ç»“æ„
ä½¿ç”¨Neo4jåˆ›å»ºçš„å›¾ï¼ˆGraphï¼‰åŸºäºå±æ€§å›¾æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå®ä½“éƒ½æœ‰IDï¼ˆIdentityï¼‰å”¯ä¸€æ ‡è¯†ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æ ‡ç­¾ï¼ˆLableï¼‰åˆ†ç»„ï¼Œæ¯ä¸ªå…³ç³»éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å…³ç³»ç±»å‹ã€‚

æ ‡ç­¾ç”¨äºå¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†ç»„ï¼Œç›¸å½“äºèŠ‚ç‚¹çš„ç±»å‹ï¼Œæ‹¥æœ‰ç›¸åŒæ ‡ç­¾çš„èŠ‚ç‚¹å±äºåŒä¸€ä¸ªåˆ†ç»„ã€‚ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰é›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾ï¼Œå› æ­¤ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å±äºå¤šä¸ªåˆ†ç»„ã€‚å¯¹åˆ†ç»„è¿›è¡ŒæŸ¥è¯¢ï¼Œèƒ½å¤Ÿç¼©å°æŸ¥è¯¢çš„èŠ‚ç‚¹èŒƒå›´ï¼Œæé«˜æŸ¥è¯¢çš„æ€§èƒ½ã€‚
å±æ€§æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼ˆKey/Valueï¼‰ï¼Œç”¨äºä¸ºèŠ‚ç‚¹æˆ–å…³ç³»æä¾›æ‰©å±•çš„ä¿¡æ¯ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰nameå±æ€§ï¼Œç”¨äºå‘½åèŠ‚ç‚¹ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œnameå±æ€§çš„å€¼æ˜¯å”¯ä¸€çš„ã€‚

## Schema
Neo4jçš„æ¨¡å¼ï¼ˆSchemaï¼‰é€šå¸¸æ˜¯æŒ‡ç´¢å¼•ã€çº¦æŸå’Œç»Ÿè®¡ï¼Œé€šè¿‡åˆ›å»ºæ¨¡å¼ï¼ŒNeo4jèƒ½å¤Ÿè·å¾—æŸ¥è¯¢æ€§èƒ½çš„æå‡å’Œå»ºæ¨¡çš„ä¾¿åˆ©ï¼›Neo4jæ•°æ®åº“çš„æ¨¡å¼å¯é€‰çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ— æ¨¡å¼çš„ã€‚

### ç´¢å¼•
> [Indexes - Cypher Manual](https://neo4j.com/docs/cypher-manual/current/indexes/)  

```
    CREATE INDEX ON :Person(firstname)
    CREATE INDEX ON :Person(firstname, surname)
```

### çº¦æŸ
> [Constraints - Cypher Manual](https://neo4j.com/docs/cypher-manual/current/constraints/)  

### ç»Ÿè®¡ä¿¡æ¯

å½“ä½¿ç”¨CypheræŸ¥è¯¢å›¾å½¢æ•°æ®åº“æ—¶ï¼ŒCypherè„šæœ¬è¢«ç¼–è¯‘æˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œæ‰§è¡Œè¯¥æ‰§è¡Œè®¡åˆ’è·å¾—æŸ¥è¯¢ç»“æœã€‚ä¸ºäº†ç”Ÿæˆä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–çš„æ‰§è¡Œè®¡åˆ’ï¼ŒNeo4jéœ€è¦æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ä»¥å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ã€‚å½“ç»Ÿè®¡ä¿¡æ¯å˜åŒ–åˆ°ä¸€å®šçš„èµ‹å€¼æ—¶ï¼ŒNeo4jéœ€è¦é‡æ–°ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œä»¥ä¿è¯CypheræŸ¥è¯¢æ˜¯æ€§èƒ½ä¼˜åŒ–çš„

## Pattern
æ¨¡å¼ï¼ˆPatternï¼‰å’Œæ¨¡å¼åŒ¹é…ï¼ˆMatchï¼‰æ˜¯Cypherçš„æ ¸å¿ƒï¼Œä½¿ç”¨æ¨¡å¼æ¥æè¿°æ‰€éœ€æ•°æ®çš„å½¢çŠ¶ï¼Œè¯¥æ¨¡å¼ä½¿ç”¨å±æ€§å›¾çš„ç»“æ„æ¥æè¿°ï¼Œé€šå¸¸ä½¿ç”¨å°æ‹¬å·()è¡¨ç¤ºèŠ‚ç‚¹ï¼Œ-->è¡¨ç¤ºå…³ç³»ï¼Œ-[]->è¡¨ç¤ºå…³ç³»å’Œå…³ç³»çš„ç±»å‹ï¼Œç®­å¤´è¡¨ç¤ºå…³ç³»çš„æ–¹å‘ã€‚

èŠ‚ç‚¹æ¨¡å¼ (Variable:Lable1:Lable2{Key1:Value1,Key2,Value2}) 
- èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ç”¨äºåŒ¹é…ï¼Œ{}å†…åˆ™æ˜¯åŒ¹é…èŠ‚ç‚¹çš„å±æ€§å€¼

å…³ç³»æ¨¡å¼  åœ¨å±æ€§å›¾ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œå…³ç³»é€šè¿‡[]è¡¨ç¤ºï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»é€šè¿‡ç®­å¤´()-[]->()è¡¨ç¤º
- å…³è”èŠ‚ç‚¹æ¨¡å¼: èŠ‚ç‚¹ä¹‹é—´é€šè¿‡å…³ç³»è”ç³»åœ¨ä¸€ä¸‹ï¼Œç”±äºå…³ç³»å…·æœ‰æ–¹å‘æ€§ï¼Œå› æ­¤ï¼Œ-->è¡¨ç¤ºå­˜åœ¨æœ‰å‘çš„å…³ç³»ï¼Œ--è¡¨ç¤ºå­˜åœ¨å…³è”ï¼Œä¸æŒ‡å®šå…³ç³»çš„æ–¹å‘
    - `(a)-[r]->(b)` ï¼šè¯¥æ¨¡å¼ç”¨äºæè¿°èŠ‚ç‚¹aå’Œbä¹‹é—´å­˜åœ¨æœ‰å‘çš„å…³ç³»rï¼Œ
    - `(a)-->(b)`ï¼šè¯¥æ¨¡å¼ç”¨äºæè¿°aå’Œbä¹‹é—´å­˜åœ¨æœ‰å‘å…³ç³»ï¼›
- å˜é•¿è·¯å¾„çš„æ¨¡å¼: ä»ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡ç›´æ¥å…³ç³»ï¼Œè¿æ¥åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å«éå†ï¼Œç»è¿‡çš„èŠ‚ç‚¹å’Œå…³ç³»çš„ç»„åˆå«åšè·¯å¾„ï¼ˆPathï¼‰ï¼Œè·¯å¾„æ˜¯ç”±èŠ‚ç‚¹å’Œå…³ç³»çš„æœ‰åºç»„åˆ
    - `(a)-->(b)`ï¼šæ˜¯æ­¥é•¿ä¸º1çš„è·¯å¾„ï¼ŒèŠ‚ç‚¹aå’Œbä¹‹é—´æœ‰å…³ç³»ç›´æ¥å…³è”ï¼›
    - `(a)-->()-->(b)`ï¼šæ˜¯æ­¥é•¿ä¸º2çš„è·¯å¾„ï¼Œä»èŠ‚ç‚¹aï¼Œç»è¿‡ä¸¤ä¸ªå…³ç³»å’Œä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ°è¾¾èŠ‚ç‚¹bï¼›
    - Cypherè¯­è¨€æ”¯æŒå˜é•¿è·¯å¾„çš„æ¨¡å¼ï¼Œå˜é•¿è·¯å¾„çš„è¡¨ç¤ºæ–¹å¼æ˜¯ï¼š`[*N..M]`ï¼ŒNå’ŒMè¡¨ç¤ºè·¯å¾„é•¿åº¦çš„æœ€å°å€¼å’Œæœ€å¤§å€¼

************************

# åº”ç”¨
> [hokaso/hocassian-people-neo4j: NoSQLå¯è§†åŒ–äººè„‰å›¾è°±é¡¹ç›®](https://github.com/hokaso/hocassian-people-neo4j)  
> [NTDXYG/Neo4j: åŸºäºç”µå½±çŸ¥è¯†å›¾è°±å’Œå¾®ä¿¡å°ç¨‹åºçš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ](https://github.com/NTDXYG/Neo4j)  
> [lonngxiang/Knowledge-map-of-family-tree ï¼ˆå§“æ°å®¶æ—å®¶è°±çŸ¥è¯†å›¾è°±ï¼‰](https://github.com/lonngxiang/Knowledge-map-of-family-tree)  


